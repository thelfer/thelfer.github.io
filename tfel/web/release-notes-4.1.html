<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-EN" xml:lang="en-EN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Release notes of the 4.1 version of TFEL, MFront and MTest</title>
        <meta name="author" content="Thomas Helfer" />
            <meta name="date" content="2022-01-01" />
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <style type="text/css">code{white-space: pre;}</style>
            <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #c4a000; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #000000; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #000000; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #000000; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
            <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/main.css"/>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
          </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
        <header>
      <ul id="nav">
	<li><a href="news.html">News</a></li>
	<li><a href="index.html">Overview</a>
	  <ul>
	    <li><a>Domain specific languages</a>
	      <ul>
		<li><a href="material-properties.html">Material properties</a></li>
		<li><a href="behaviours.html">Mechanical behaviours</a></li>
		<li><a href="models.html">Models</a></li>
	      </ul>
            </li>
	    <li><a href="interfaces.html">Available interfaces</a></li>
	    <li><a href="associated-projects.html">Associated projects</a></li>
     	    <li><a>Tools</a>
	      <ul>
	        <li><a href="mfront-doc.html">mfront-doc</a></li>
	        <li><a href="mtest.html">mtest</a></li>
	        <li><a href="mfm.html">mfm</a></li>
	        <li><a href="mfm-test-generator.html">mfm-test-generator</a></li>
	        <li><a href="tfel-check.html">tfel-check</a></li>
	      </ul>
	    </li>
	  </ul>
	</li>
	<li><a>Getting started</a>
	  <ul>
	    <li><a href="https://github.com/thelfer/tfel/">Github repository</a></li>
	    <li><a href="https://github.com/thelfer/tfel/releases">Download</a></li>
	    <li><a href="release-notes.html">Release notes</a>
	      <ul>
		<li><a>Versions 2.0.x</a>
                  <ul>
                    <li><a href="release-notes.html">Versions prior to 2.0.5</a></li>
	 	    <li><a href="release-notes-2.0.5.html">Version 2.0.5</a></li>
                  </ul>
		</li>
		<li><a>Versions 3.0.x</a>
                  <ul>
		    <li><a href="release-notes-3.0.html">Version 3.0.0</a></li>
		    <li><a href="release-notes-3.0.1.html">Version 3.0.1</a></li>
		    <li><a href="release-notes-3.0.2.html">Version 3.0.2</a></li>
		    <li><a href="release-notes-3.0.3.html">Version 3.0.3</a></li>
		    <li><a href="release-notes-3.0.4.html">Version 3.0.4</a></li>
		    <li><a href="release-notes-3.0.5.html">Version 3.0.5</a></li>
		    <li><a href="release-notes-3.0.6.html">Version 3.0.6</a></li>
		    <li><a href="release-notes-3.0.7.html">Version 3.0.7</a></li>
		    <li><a href="release-notes-3.0.8.html">Version 3.0.8</a></li>
		    <li><a href="release-notes-3.0.9.html">Version 3.0.9</a></li>
		    <li><a href="release-notes-3.0.10.html">Version 3.0.10</a></li>
		    <li><a href="release-notes-3.0.11.html">Version 3.0.11</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.1.x</a>
		  <ul>
		    <li><a href="release-notes-3.1.html">Version 3.1.0</a></li>
		    <li><a href="release-notes-3.1.1.html">Version 3.1.1</a></li>
		    <li><a href="release-notes-3.1.2.html">Version 3.1.2</a></li>
		    <li><a href="release-notes-3.1.3.html">Version 3.1.3</a></li>
		    <li><a href="release-notes-3.1.4.html">Version 3.1.4</a></li>
		    <li><a href="release-notes-3.1.5.html">Version 3.1.5</a></li>
		    <li><a href="release-notes-3.1.6.html">Version 3.1.6</a></li>
		    <li><a href="release-notes-3.1.7.html">Version 3.1.7</a></li>
		    <li><a href="release-notes-3.1.8.html">Version 3.1.8</a></li>
		    <li><a href="release-notes-3.1.9.html">Version 3.1.9</a></li>
		    <li><a href="release-notes-3.1.10.html">Version 3.1.10</a></li>
		    <li><a href="release-notes-3.1.11.html">Version 3.1.11</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.2.x</a>
		  <ul>
		    <li><a href="release-notes-3.2.html">Version 3.2.0</a></li>
		    <li><a href="release-notes-3.2.1.html">Version 3.2.1</a></li>
		    <li><a href="release-notes-3.2.2.html">Version 3.2.2</a></li>
		    <li><a href="release-notes-3.2.3.html">Version 3.2.3</a></li>
		    <li><a href="release-notes-3.2.4.html">Version 3.2.4</a></li>
		    <li><a href="release-notes-3.2.5.html">Version 3.2.5</a></li>
		    <li><a href="release-notes-3.2.6.html">Version 3.2.6</a></li>
		    <li><a href="release-notes-3.2.7.html">Version 3.2.7</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.3.x</a>
		  <ul>
		    <li><a href="release-notes-3.3.html">Version 3.3.0</a></li>
		    <li><a href="release-notes-3.3.1.html">Version 3.3.1</a></li>
		    <li><a href="release-notes-3.3.1.html">Version 3.3.2</a></li>
		    <li><a href="release-notes-3.3.2.html">Version 3.3.2</a></li>
		    <li><a href="release-notes-3.3.3.html">Version 3.3.3</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.4.x</a>
		  <ul>
		    <li><a href="release-notes-3.4.html">Version 3.4.0</a></li>
		    <li><a href="release-notes-3.4.1.html">Version 3.4.1</a></li>
		    <li><a href="release-notes-3.4.2.html">Version 3.4.2</a></li>
		    <li><a href="release-notes-3.4.3.html">Version 3.4.3</a></li>
		    <li><a href="release-notes-3.4.4.html">Version 3.4.4</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.0.x</a>
		  <ul>
		    <li><a href="release-notes-4.0.html">Version 4.0.0</a></li>
		    <li><a href="release-notes-4.0.1.html">Version 4.0.1</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.1.x</a>
		  <ul>
		    <li><a href="release-notes-4.1.html">Version 4.1.0</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a href="coverity-scan.html">Coverity scan</a></li>
	    <li><a href="install.html">Installation</a></li>
	  </ul>
	</li>
	<li><a>Documentation</a>
	  <ul>
	    <li><a href="documentations.html">General documentation</a></li>
	    <li><a href="gallery.html">Gallery</a></li>
	    <li><a href="http://tfel.sourceforge.net/doxygen/index.html">Doxygen documentation</a></li>
	    <li><a>Behaviours</a>
	      <ul>
		<li><a href="tutorial.html">Tutorial</a></li>
		<li><a href="implicit-dsl.html">The implicit DSL</a></li>
		<li><a href="benchmark.html">Benchmark</a></li>
		<li><a href="parameters.html">Parameters</a></li>
		<li><a href="BehaviourBricks.html">Behaviour bricks</a></li>
		<li><a href="interfaces.html">Solver interfaces</a>
		  <ul>
		    <li><a href="castem.html">Cast3M</a></li>
		    <li><a href="amitex.html">AMITEX_FFTP</a></li>
		    <li><a href="aster.html">Code-Aster</a></li>
    		    <li><a href="abaqus.html">Abaqus</a></li>
    		    <li><a href="epx.html">EUROPLEXUS</a></li>
		    <li><a href="zmat.html">ZeBuLoN</a></li>
   		    <li><a href="calculix.html">CalculiX</a></li>
		    <!-- <li><a >TMFFT</a></li> -->
		    <li><a href="cyrano.html">Cyrano</a></li>
   		    <li><a href="generic-behaviours-interface.html">Generic Behaviour Interface</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a>TFEL libraries</a>
	      <ul>
		<li><a href="tfel-math.html">TFEL/Math</a></li>
		<li><a href="tfel-material.html">TFEL/Material</a></li>
	      </ul>
	    </li>
	    <li><a>Python modules</a>
	      <ul>
		<li><a href="tfel-python.html">TFEL modules</a></li>
		<li><a href="mfront-python.html">mfront module</a></li>
		<li><a href="mtest-python.html">mtest module</a></li>
	      </ul>
	    </li>
	    <li><a>MFront keywords</a>
	      <ul>
		<li><a href="DefaultDSL-keywords.html">DefaultDSL</a></li> 
		<li><a href="DefaultCZMDSL-keywords.html">DefaultCZMDSL</a></li> 
		<li><a href="DefaultFiniteStrainDSL-keywords.html">DefaultFiniteStrainDSL</a></li> 
		<li><a href="Implicit-keywords.html">Implicit</a></li> 
		<li><a href="ImplicitFiniteStrain-keywords.html">ImplicitFiniteStrain</a></li> 
		<li><a href="ImplicitII-keywords.html">ImplicitII</a></li> 
		<li><a href="IsotropicMisesCreep-keywords.html">IsotropicMisesCreep</a></li> 
		<li><a href="IsotropicPlasticMisesFlow-keywords.html">IsotropicPlasticMisesFlow</a></li> 
		<li><a href="IsotropicStrainHardeningMisesCreep-keywords.html">IsotropicStrainHardeningMisesCreep</a></li> 
		<li><a href="MaterialLaw-keywords.html">MaterialLaw</a></li> 
		<li><a href="Model-keywords.html">Model</a></li> 
		<li><a href="MultipleIsotropicMisesFlows-keywords.html">MultipleIsotropicMisesFlows</a></li> 
		<li><a href="RungeKutta-keywords.html">RungeKutta</a></li> 
	      </ul>
	    </li>
	    <li><a href="MTest-keywords.html">MTest keywords</a></li>
	    <li><a href="physical-constants.html">Physical constants</a></li>
	    <li><a href="glossary.html">Glossary</a></li>
	    <li><a href="publications.html">Publications</a></li>
	    <li><a href="faq.html">FAQ</a></li>
	    <li><a href="about.html">About</a></li>
	  </ul>
	</li>
	<li><a>Contributing</a>
	  <ul>
	    <li><a href="svn.html">Access to source repositories</a></li>
	    <li><a href="devel.html">Development guidelines</a></li>
	    <li><a href="https://github.com/thelfer/tfel/issues">Report bugs</a></li>
	  </ul>
	</li>
	<li><a>Getting Help</a>
	  <ul>
	    <li><a href="search.html">Search on this site</a></li>
	    <li><a href="https://github.com/thelfer/tfel/discussions">Forum</a></li>
	    <li><a href="http://sourceforge.net/p/tfel/tfel">Mailing lists</a></li>
	    <li><a href="mailto:tfel-contact@cea.fr">Contact</a></li>
	  </ul>
	</li>
      </ul>
    </header>
<div id="header">
<h1 class="title">Release notes of the 4.1 version of <code>TFEL</code>, <code>MFront</code> and <code>MTest</code></h1>
<h2 class="author">Thomas Helfer</h2>
<h3 class="date">2022</h3>
</div>
<div id="TOC">
<ul>
<li><a href="#mtest-improvements"><span class="toc-section-number">1</span> <code>MTest</code> improvements</a>
<ul>
<li><a href="#sec:tfel_4.1:mtest:mandrel"><span class="toc-section-number">1.1</span> Support for a boundary condition modelling the effet of a mandrel in pipe modelling</a></li>
<li><a href="#sec:tfel_4.1:mtest:small_strain_tridimensional_behaviour_wrapper"><span class="toc-section-number">1.2</span> Wrappers around <code>3D</code> behaviours</a></li>
<li><a href="#sec:tfel_4.1:mtest:rotation_matrix"><span class="toc-section-number">1.3</span> A more flexible declaration of the rotation matrix</a></li>
<li><a href="#sec:tfel_4.1:mtest:aster_logarithmic_strain_wrapper"><span class="toc-section-number">1.4</span> Wrapper around behaviours written in the logarithmic strain framework generated with the <code>aster</code> interface</a></li>
</ul></li>
<li><a href="#improvements-to-the-mtest-python-module"><span class="toc-section-number">2</span> Improvements to the <code>mtest</code> <code>python</code> module</a>
<ul>
<li><a href="#sec:tfel_4.1:pymtest:behaviour_constructor"><span class="toc-section-number">2.1</span> Support of named arguments in the constructor of the <code>Behaviour</code> class</a></li>
</ul></li>
<li><a href="#issues-fixed"><span class="toc-section-number">3</span> Issues fixed</a>
<ul>
<li><a href="#issue-55-mtest-creation-of-a-wrapper-around-behaviours-written-in-the-logarithmic-strain-framework-generated-with-the-aster-interface"><span class="toc-section-number">3.1</span> Issue #55: [mtest] Creation of a wrapper around behaviours written in the logarithmic strain framework generated with the <code>aster</code> interface</a></li>
<li><a href="#issue-57-gallery-mistakes-in-the-drucker-prager-cap-model-of-the-gallery"><span class="toc-section-number">3.2</span> Issue #57: [gallery] Mistakes in the Drucker Prager Cap model of the gallery</a></li>
<li><a href="#issue-44-mtest-add-support-for-a-boundary-condition-modelling-the-effet-of-a-mandrel-in-pipe-modelling"><span class="toc-section-number">3.3</span> Issue #44: [mtest] Add support for a boundary condition modelling the effet of a mandrel in pipe modelling</a></li>
<li><a href="#issue-39-tfel-config-add-query-associated-with-python-bindings-support"><span class="toc-section-number">3.4</span> Issue #39: [tfel-config] Add query associated with python bindings support</a></li>
<li><a href="#issue-38-tfel-config-add-query-associated-with-madnex-support"><span class="toc-section-number">3.5</span> Issue #38: [tfel-config] Add query associated with MADNEX support</a></li>
<li><a href="#issue-36-mfront-improved-support-for-mtest-file-generation-all-kind-of-state-variables"><span class="toc-section-number">3.6</span> Issue #36: [mfront] Improved support for <code>MTest</code> file generation (all kind of state variables)</a></li>
<li><a href="#issue-28-mtest-support-of-tensorial-external-state-variables"><span class="toc-section-number">3.7</span> Issue #28: [mtest] Support of tensorial external state variables</a></li>
<li><a href="#issue-28-mtest-support-of-tensorial-external-state-variables-1"><span class="toc-section-number">3.8</span> Issue #28: [mtest] Support of tensorial external state variables</a></li>
<li><a href="#issue-27-mfront-better-support-of-tensorial-external-state-variables"><span class="toc-section-number">3.9</span> Issue #27: [mfront] Better support of tensorial external state variables</a></li>
<li><a href="#issue-26-dont-use-explicit-instanciation-for-static-variables"><span class="toc-section-number">3.10</span> Issue #26: Don’t use explicit instanciation for static variables</a></li>
<li><a href="#issue-20-mtest-declaration-of-a-behaviour-wrapper-in-python-module"><span class="toc-section-number">3.11</span> Issue #20: [mtest] Declaration of a behaviour wrapper in python module</a></li>
<li><a href="#issue-18-mtest-usage-of-a-3d-behaviour-in-ptest"><span class="toc-section-number">3.12</span> Issue #18: [mtest] Usage of a <code>3D</code> behaviour in <code>ptest</code></a></li>
<li><a href="#issue-15-mtest-new-option-for-the-declaration-of-the-rotation-matrix-in-mtest"><span class="toc-section-number">3.13</span> Issue #15: [mtest] New option for the declaration of the rotation matrix in <code>MTest</code></a></li>
</ul></li>
</ul>
</div>
<p>The page describes the new functionalities of Version 4.1 of the <code>TFEL</code> project.</p>
<h1 data-number="1" id="mtest-improvements"><span class="header-section-number">1</span> <code>MTest</code> improvements</h1>
<h2 data-number="1.1" id="sec:tfel_4.1:mtest:mandrel"><span class="header-section-number">1.1</span> Support for a boundary condition modelling the effet of a mandrel in pipe modelling</h2>
<p>The effect of a non-deformable mandrel located inside the pipe can be modelled by defining the evolution of its radius <span class="math inline">\(R_{m}\)</span> using the <code>@MandrelRadiusEvolution</code> keyword. The inner radius <span class="math inline">\(R_{i}\)</span> will then satisfy the following unilateral boundary condition:</p>
<p><span class="math display">\[
R_{i} - R_{m} \geq 0
\]</span></p>
<p>This boundary condition is imposed by using a Lagrange multiplier. Its value is given by the contact pressure in the output file. The total pressure applied to the inner surface of the pipe is given by the sum of the imposed pressure (if any) and the contact pressure. Only the imposed inner pressure is used to compute the end cap effect.</p>
<p>This boundary condition is not compatible with:</p>
<ul>
<li>boundary conditions imposing the evolution of the inner radius of the pipe or the outer radius of the pipe.</li>
<li>the modelling of a tight pipe.</li>
</ul>
<h3 data-number="1.1.1" id="axial-binding"><span class="header-section-number">1.1.1</span> Axial binding</h3>
<p>If the evolution of the axial growth of the mandrel is defined using the <code>@MandrelAxialGrowthEvolution</code> keyword, an axial binding between the mandrel and the pipe is assumed, i.e. the difference between the axial growth of the pipe <span class="math inline">\(\varepsilon^{p}_{zz}\)</span> and the axial growth of the mandrel <span class="math inline">\(\varepsilon^{p}_{zz}\)</span> is assumed to be constant to its value when the contact between the mandrel and the pipe is detected:</p>
<p><span class="math display">\[
\varepsilon^{p}_{zz}-\varepsilon^{m}_{zz}=\textrm{Cste}
\]</span></p>
<p>This axial boundary condition is not compatible with the boundary condition imposing the evolution of the axial growth of the pipe.</p>
<h2 data-number="1.2" id="sec:tfel_4.1:mtest:small_strain_tridimensional_behaviour_wrapper"><span class="header-section-number">1.2</span> Wrappers around <code>3D</code> behaviours</h2>
<p>The <code>SmallStrainTridimensionalBehaviourWrapper</code> class allows to wrap a tridimensional behaviour into a behaviour usable in one of the following modelling hypotheses:</p>
<ul>
<li>axisymmetrical generalised plane strain,</li>
<li>generalised plane strain,</li>
<li>plane strain.</li>
</ul>
<p>Shear components of the strain tensor which are not meaningful for the targeted modelling hypothesis are set to zero.</p>
<p>After the behaviour integration, only the meaningful components of the stress tensor and stiffness matrix are retained.</p>
<h3 data-number="1.2.1" id="treatment-of-the-internal-state-variables"><span class="header-section-number">1.2.1</span> Treatment of the internal state variables</h3>
<p>The internal state variables are all declared as scalars.</p>
<p>For instance, let us assume that the <code>3D</code> behaviour declares an internal state variable called <code>s</code>. In this case, the wrapped behaviour will then declared <code>6</code> internal state variables associated with <code>s</code> named respectively <code>sXX</code>, <code>sYY</code>, <code>sZZ</code>, <code>sXY</code>, <code>sXZ</code>, <code>sYZ</code>.</p>
<h3 data-number="1.2.2" id="usage-in-mtest"><span class="header-section-number">1.2.2</span> Usage in <code>MTest</code></h3>
<p>The following code shows how to wrap a tridimensional behaviour to be used under the axisymmetrical plane strain modelling hypothesis:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Choice of the modelling hypothesis</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ModellingHypothesis <span class="st">&quot;AxisymmetricalGeneralisedPlaneStrain&quot;</span>;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Declaration of the behaviour</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Behaviour&lt;</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    generic,                                   <span class="co">// interface name</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    SmallStrainTridimensionalBehaviourWrapper&gt; <span class="co">// wrapper</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;src/libBehaviour.so&quot;</span> <span class="st">&quot;ImplicitNorton&quot;</span>;</span></code></pre></div>
<h3 data-number="1.2.3" id="usage-in-the-mtest-python-module"><span class="header-section-number">1.2.3</span> Usage in the <code>mtest</code> <code>python</code> module</h3>
<p>The following code shows how to load a tridimensional behaviour and how to wrap this behaviour to be used in plane strain:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mtest</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tfel.material</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> tfel.material.ModellingHypothesis.TRIDIMENSIONAL</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>b1 <span class="op">=</span> mtest.Behaviour(<span class="st">&#39;generic&#39;</span>, <span class="st">&#39;src/libBehaviour.so&#39;</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&#39;ImplicitNorton&#39;</span>, h)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># [&#39;ElasticStrain&#39;, &#39;p&#39;]</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b1.getInternalStateVariablesNames())</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>b2 <span class="op">=</span> mtest.Behaviour(wrapper <span class="op">=</span> <span class="st">&#39;SmallStrainTridimensionalBehaviourWrapper&#39;</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                     library <span class="op">=</span> <span class="st">&#39;src/libBehaviour.so&#39;</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                     function <span class="op">=</span> <span class="st">&#39;ImplicitNorton&#39;</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                     hypothesis <span class="op">=</span> <span class="st">&#39;PlaneStrain&#39;</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [&#39;ElasticStrainXX&#39;, &#39;ElasticStrainYY&#39;, &#39;ElasticStrainZZ&#39;,</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#  &#39;ElasticStrainXY&#39;, &#39;ElasticStrainXZ&#39;, &#39;ElasticStrainYZ&#39;, &#39;p&#39;]</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b2.getInternalStateVariablesNames())</span></code></pre></div>
<h2 data-number="1.3" id="sec:tfel_4.1:mtest:rotation_matrix"><span class="header-section-number">1.3</span> A more flexible declaration of the rotation matrix</h2>
<p>The <code>@RotationMatrix</code> keyword now has a <code>Direction</code> option which now let the user specify:</p>
<ul>
<li>a <span class="math inline">\(2D\)</span> vector giving the first direction of orthotropy in modelling hypotheses of space dimension <span class="math inline">\(2\)</span>.</li>
<li>two <span class="math inline">\(3D\)</span> vectors giving respectively the first and second directions of orthotropy under the tridimensional modelling hypothesis.</li>
</ul>
<p>The given vectors are not required to be normalised. In the <span class="math inline">\(3D\)</span> case, the second vector is not required to be orthogonal to the first one. If not, the second direction of orthotropy is deduced from the second vector by removing its projection along the first one.</p>
<h3 data-number="1.3.1" id="usage"><span class="header-section-number">1.3.1</span> Usage</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// using direction in 2D</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>RotationMatrix&lt;Direction&gt; {<span class="dv">0</span>,<span class="dv">1</span>};</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">// using directions in 3D</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>RotationMatrix&lt;Direction&gt; {{<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>},{<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>}};</span></code></pre></div>
<h2 data-number="1.4" id="sec:tfel_4.1:mtest:aster_logarithmic_strain_wrapper"><span class="header-section-number">1.4</span> Wrapper around behaviours written in the logarithmic strain framework generated with the <code>aster</code> interface</h2>
<p>Behaviours written in the logarithmic strain framework and generated with the <code>aster</code> interface were not handled by <code>MTest</code> because the logarithmic strain framework is treated by <code>code_aster</code> and not by the <code>aster</code> interface.</p>
<p>However, this is an issue for users using <code>MTest</code> for the identification of the behaviour, as described in <a href="https://github.com/thelfer/tfel/issues/55">Issue #55</a>.</p>
<p><code>MTest</code> now automatically wraps the behaviour to handle those behaviours. The wrapper handles the pre and post-processing steps around the behaviour integration.</p>
<h1 data-number="2" id="improvements-to-the-mtest-python-module"><span class="header-section-number">2</span> Improvements to the <code>mtest</code> <code>python</code> module</h1>
<h2 data-number="2.1" id="sec:tfel_4.1:pymtest:behaviour_constructor"><span class="header-section-number">2.1</span> Support of named arguments in the constructor of the <code>Behaviour</code> class</h2>
<p>Named arguments are now supported in the <code>Behaviour</code> constructor. The following arguments can be specified:</p>
<ul>
<li><code>interface</code>: name of the interface to be used (optional).</li>
<li><code>library</code>: name of the shared library to be loaded.</li>
<li><code>function</code>: name of the function implementing the behaviour.</li>
<li><code>hypothesis</code>: hypothesis to be used.</li>
<li><code>wrapper</code>: name of the behaviour wrapper to be used (optional).</li>
</ul>
<h3 data-number="2.1.1" id="example-of-usage"><span class="header-section-number">2.1.1</span> Example of usage</h3>
<p>The following piece of code loads a behaviour implemented in the <code>src/libBehaviour.so</code> shared library by the <code>ImplicitNorton</code> function for the <code>PlaneStrain</code> modelling hypothesis:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> mtest.Behaviour(library <span class="op">=</span> <span class="st">&#39;src/libBehaviour.so&#39;</span>,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                    function <span class="op">=</span> <span class="st">&#39;ImplicitNorton&#39;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                    hypothesis <span class="op">=</span> <span class="st">&#39;PlaneStrain&#39;</span>)</span></code></pre></div>
<h1 data-number="3" id="issues-fixed"><span class="header-section-number">3</span> Issues fixed</h1>
<h2 data-number="3.1" id="issue-55-mtest-creation-of-a-wrapper-around-behaviours-written-in-the-logarithmic-strain-framework-generated-with-the-aster-interface"><span class="header-section-number">3.1</span> Issue #55: [mtest] Creation of a wrapper around behaviours written in the logarithmic strain framework generated with the <code>aster</code> interface</h2>
<p>The wrapper is described in Section 1.4.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/55" class="uri">https://github.com/thelfer/tfel/issues/55</a></p>
<h2 data-number="3.2" id="issue-57-gallery-mistakes-in-the-drucker-prager-cap-model-of-the-gallery"><span class="header-section-number">3.2</span> Issue #57: [gallery] Mistakes in the Drucker Prager Cap model of the gallery</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/57" class="uri">https://github.com/thelfer/tfel/issues/57</a></p>
<h2 data-number="3.3" id="issue-44-mtest-add-support-for-a-boundary-condition-modelling-the-effet-of-a-mandrel-in-pipe-modelling"><span class="header-section-number">3.3</span> Issue #44: [mtest] Add support for a boundary condition modelling the effet of a mandrel in pipe modelling</h2>
<p>The feature is described in Section 1.1.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/38" class="uri">https://github.com/thelfer/tfel/issues/38</a></p>
<h2 data-number="3.4" id="issue-39-tfel-config-add-query-associated-with-python-bindings-support"><span class="header-section-number">3.4</span> Issue #39: [tfel-config] Add query associated with python bindings support</h2>
<p><code>tfel-config</code> now supports an command line option named <code>--python-bindings-support</code> which displays true if <code>python</code> bindings are available, <code>false</code> otherwise.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/38" class="uri">https://github.com/thelfer/tfel/issues/38</a></p>
<h2 data-number="3.5" id="issue-38-tfel-config-add-query-associated-with-madnex-support"><span class="header-section-number">3.5</span> Issue #38: [tfel-config] Add query associated with MADNEX support</h2>
<p><code>tfel-config</code> now supports an command line option named <code>--madnex-support</code> which displays true if <code>madnex</code> files are supported, <code>false</code> otherwise.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/38" class="uri">https://github.com/thelfer/tfel/issues/38</a></p>
<h2 data-number="3.6" id="issue-36-mfront-improved-support-for-mtest-file-generation-all-kind-of-state-variables"><span class="header-section-number">3.6</span> Issue #36: [mfront] Improved support for <code>MTest</code> file generation (all kind of state variables)</h2>
<p>In previous versions, only scalar and symmetric tensors state variables were supported when generation <code>MTest</code> file on integration failure.</p>
<p>All kind of state variables are now supported.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/36" class="uri">https://github.com/thelfer/tfel/issues/36</a></p>
<h2 data-number="3.7" id="issue-28-mtest-support-of-tensorial-external-state-variables"><span class="header-section-number">3.7</span> Issue #28: [mtest] Support of tensorial external state variables</h2>
<p>The <code>Behaviour</code> class has new methods:</p>
<ul>
<li><code>expandExternalStateVariablesNames</code> (wrapped in python)</li>
<li><code>getExternalStateVariableType</code> (wrapped in python)</li>
<li><code>getExternalStateVariablePosition</code> (wrapped in python)</li>
</ul>
<p>The <code>@ExternalStateVariable</code> now allows to define tensorial external state variables components by components or an array as follows:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Definition of an symmetric tensor external state variable</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g&quot;</span> {<span class="st">&quot;0&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3 * t&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;5 * t&quot;</span>};</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Definition of an symmetric tensor external state variable components by components</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2XX&quot;</span>  <span class="st">&quot;0&quot;</span>;</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2YY&quot;</span>  <span class="st">&quot;2&quot;</span>;</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2ZZ&quot;</span>  <span class="st">&quot;t&quot;</span>;</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2XY&quot;</span>  <span class="st">&quot;3&quot;</span>;</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2XZ&quot;</span>  <span class="st">&quot;4&quot;</span>;</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2YZ&quot;</span>  <span class="st">&quot;5*t&quot;</span>;</span></code></pre></div>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/28" class="uri">https://github.com/thelfer/tfel/issues/28</a></p>
<h2 data-number="3.8" id="issue-28-mtest-support-of-tensorial-external-state-variables-1"><span class="header-section-number">3.8</span> Issue #28: [mtest] Support of tensorial external state variables</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/28" class="uri">https://github.com/thelfer/tfel/issues/28</a></p>
<h2 data-number="3.9" id="issue-27-mfront-better-support-of-tensorial-external-state-variables"><span class="header-section-number">3.9</span> Issue #27: [mfront] Better support of tensorial external state variables</h2>
<p>The type of the external state variables are now exported.</p>
<ul>
<li><code>ExternalLibraryManager</code> has a new method called <code>getUMATExternalStateVariablesTypes</code> (wrapped in <code>python</code>)</li>
<li><code>ExternalBehaviourDescription</code> has a new method called <code>evtypes</code> (wrapped in <code>python</code>)</li>
</ul>
<p>Generation of <code>MTest</code> file also supports tensor external state variables.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/27" class="uri">https://github.com/thelfer/tfel/issues/27</a></p>
<h2 data-number="3.10" id="issue-26-dont-use-explicit-instanciation-for-static-variables"><span class="header-section-number">3.10</span> Issue #26: Don’t use explicit instanciation for static variables</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/26" class="uri">https://github.com/thelfer/tfel/issues/26</a></p>
<h2 data-number="3.11" id="issue-20-mtest-declaration-of-a-behaviour-wrapper-in-python-module"><span class="header-section-number">3.11</span> Issue #20: [mtest] Declaration of a behaviour wrapper in python module</h2>
<p>As described in Section 2.1, named parameters are now supported in the constructor of the <code>Behaviour</code> class. The (optional) <code>wrapper</code> argument can now be used to specify a behaviour wrapper.</p>
<p>Currently, two behaviours wrappers are available:</p>
<ul>
<li><code>LogarithmicStrain1D</code>: which turns a small strain behaviour in axisymmetrical generalised plane strain into a finite strain behaviour in the logarithmic strain framework following the ETO-PK1 kinematic assumption used by the <code>MTest</code> for the simulation of pipe in finite strain.</li>
<li><code>SmallStrainTridimensionalBehaviourWrapper</code> which allows to use a small strain tridimensional behaviour under the following modelling hypotheses: axisymmetrical generalised plane strain, plane strain, axisymmetry.</li>
</ul>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/20" class="uri">https://github.com/thelfer/tfel/issues/20</a></p>
<h2 data-number="3.12" id="issue-18-mtest-usage-of-a-3d-behaviour-in-ptest"><span class="header-section-number">3.12</span> Issue #18: [mtest] Usage of a <code>3D</code> behaviour in <code>ptest</code></h2>
<p>Thanks the <code>SmallStrainTridimensionalBehaviourWrapper</code> class detailled in Section 1.2, tridimensional behaviours can be used under the following modelling hypotheses: generalised plane strain, plane strain, axisymmetrical generalised plane strain.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/18" class="uri">https://github.com/thelfer/tfel/issues/18</a></p>
<h2 data-number="3.13" id="issue-15-mtest-new-option-for-the-declaration-of-the-rotation-matrix-in-mtest"><span class="header-section-number">3.13</span> Issue #15: [mtest] New option for the declaration of the rotation matrix in <code>MTest</code></h2>
<p>This option is described in depth in Section 1.3.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/15" class="uri">https://github.com/thelfer/tfel/issues/15</a></p>
<!--
# References
-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-62273823-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
