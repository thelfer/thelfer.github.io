<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-EN" xml:lang="en-EN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>The MTest Python API</title>
        <meta name="author" content="Thomas Helfer" />
            <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <style type="text/css">code{white-space: pre;}</style>
            <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #204a87; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #8f5902; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #204a87; font-weight: bold; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
            <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/main.css"/>
        <script
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
        type="text/javascript"></script>
          </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
        <header>
      <ul id="nav">
	<li><a href="news.html">News</a></li>
	<li><a href="index.html">Overview</a>
	  <ul>
	    <li><a>Domain specific languages</a>
	      <ul>
		<li><a href="material-properties.html">Material properties</a></li>
		<li><a href="behaviours.html">Mechanical behaviours</a></li>
		<li><a href="models.html">Models</a></li>
	      </ul>
            </li>
	    <li><a href="interfaces.html">Available interfaces</a></li>
	    <li><a href="associated-projects.html">Associated projects</a></li>
     	    <li><a>Tools</a>
	      <ul>
	        <li><a href="mfront-doc.html">mfront-doc</a></li>
	        <li><a href="mtest.html">mtest</a></li>
	        <li><a href="mfm.html">mfm</a></li>
	        <li><a href="mfm-test-generator.html">mfm-test-generator</a></li>
	        <li><a href="tfel-check.html">tfel-check</a></li>
	      </ul>
	    </li>
	  </ul>
	</li>
	<li><a>Getting started</a>
	  <ul>
	    <li><a href="https://github.com/thelfer/tfel/">Github repository</a></li>
	    <li><a href="https://github.com/thelfer/tfel/releases">Download</a></li>
	    <li><a href="release-notes.html">Release notes</a>
	      <ul>
		<li><a>Versions 2.0.x</a>
                  <ul>
                    <li><a href="release-notes.html">Versions prior to 2.0.5</a></li>
	 	    <li><a href="release-notes-2.0.5.html">Version 2.0.5</a></li>
                  </ul>
		</li>
		<li><a>Versions 3.0.x</a>
                  <ul>
		    <li><a href="release-notes-3.0.html">Version 3.0.0</a></li>
		    <li><a href="release-notes-3.0.1.html">Version 3.0.1</a></li>
		    <li><a href="release-notes-3.0.2.html">Version 3.0.2</a></li>
		    <li><a href="release-notes-3.0.3.html">Version 3.0.3</a></li>
		    <li><a href="release-notes-3.0.4.html">Version 3.0.4</a></li>
		    <li><a href="release-notes-3.0.5.html">Version 3.0.5</a></li>
		    <li><a href="release-notes-3.0.6.html">Version 3.0.6</a></li>
		    <li><a href="release-notes-3.0.7.html">Version 3.0.7</a></li>
		    <li><a href="release-notes-3.0.8.html">Version 3.0.8</a></li>
		    <li><a href="release-notes-3.0.9.html">Version 3.0.9</a></li>
		    <li><a href="release-notes-3.0.10.html">Version 3.0.10</a></li>
		    <li><a href="release-notes-3.0.11.html">Version 3.0.11</a></li>
		    <li><a href="release-notes-3.0.12.html">Version 3.0.12</a></li>
		    <li><a href="release-notes-3.0.13.html">Version 3.0.13</a></li>
		    <li><a href="release-notes-3.0.14.html">Version 3.0.14</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.1.x</a>
		  <ul>
		    <li><a href="release-notes-3.1.html">Version 3.1.0</a></li>
		    <li><a href="release-notes-3.1.1.html">Version 3.1.1</a></li>
		    <li><a href="release-notes-3.1.2.html">Version 3.1.2</a></li>
		    <li><a href="release-notes-3.1.3.html">Version 3.1.3</a></li>
		    <li><a href="release-notes-3.1.4.html">Version 3.1.4</a></li>
		    <li><a href="release-notes-3.1.5.html">Version 3.1.5</a></li>
		    <li><a href="release-notes-3.1.6.html">Version 3.1.6</a></li>
		    <li><a href="release-notes-3.1.7.html">Version 3.1.7</a></li>
		    <li><a href="release-notes-3.1.8.html">Version 3.1.8</a></li>
		    <li><a href="release-notes-3.1.9.html">Version 3.1.9</a></li>
		    <li><a href="release-notes-3.1.10.html">Version 3.1.10</a></li>
		    <li><a href="release-notes-3.1.11.html">Version 3.1.11</a></li>
		    <li><a href="release-notes-3.1.12.html">Version 3.1.12</a></li>
		    <li><a href="release-notes-3.1.13.html">Version 3.1.13</a></li>
		    <li><a href="release-notes-3.1.14.html">Version 3.1.14</a></li>
		    <li><a href="release-notes-3.1.15.html">Version 3.1.15</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.2.x</a>
		  <ul>
		    <li><a href="release-notes-3.2.html">Version 3.2.0</a></li>
		    <li><a href="release-notes-3.2.1.html">Version 3.2.1</a></li>
		    <li><a href="release-notes-3.2.2.html">Version 3.2.2</a></li>
		    <li><a href="release-notes-3.2.3.html">Version 3.2.3</a></li>
		    <li><a href="release-notes-3.2.4.html">Version 3.2.4</a></li>
		    <li><a href="release-notes-3.2.5.html">Version 3.2.5</a></li>
		    <li><a href="release-notes-3.2.6.html">Version 3.2.6</a></li>
		    <li><a href="release-notes-3.2.7.html">Version 3.2.7</a></li>
		    <li><a href="release-notes-3.2.8.html">Version 3.2.8</a></li>
		    <li><a href="release-notes-3.2.9.html">Version 3.2.9</a></li>
		    <li><a href="release-notes-3.2.10.html">Version 3.2.10</a></li>
		    <li><a href="release-notes-3.2.11.html">Version 3.2.11</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.3.x</a>
		  <ul>
		    <li><a href="release-notes-3.3.html">Version 3.3.0</a></li>
		    <li><a href="release-notes-3.3.1.html">Version 3.3.1</a></li>
		    <li><a href="release-notes-3.3.1.html">Version 3.3.2</a></li>
		    <li><a href="release-notes-3.3.2.html">Version 3.3.2</a></li>
		    <li><a href="release-notes-3.3.3.html">Version 3.3.3</a></li>
		    <li><a href="release-notes-3.3.4.html">Version 3.3.4</a></li>
		    <li><a href="release-notes-3.3.5.html">Version 3.3.5</a></li>
		    <li><a href="release-notes-3.3.6.html">Version 3.3.6</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.4.x</a>
		  <ul>
		    <li><a href="release-notes-3.4.html">Version 3.4.0</a></li>
		    <li><a href="release-notes-3.4.1.html">Version 3.4.1</a></li>
		    <li><a href="release-notes-3.4.2.html">Version 3.4.2</a></li>
		    <li><a href="release-notes-3.4.3.html">Version 3.4.3</a></li>
		    <li><a href="release-notes-3.4.4.html">Version 3.4.4</a></li>
		    <li><a href="release-notes-3.4.5.html">Version 3.4.5</a></li>
		    <li><a href="release-notes-3.4.6.html">Version 3.4.6</a></li>
		    <li><a href="release-notes-3.4.7.html">Version 3.4.7</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.0.x</a>
		  <ul>
		    <li><a href="release-notes-4.0.html">Version 4.0.0</a></li>
		    <li><a href="release-notes-4.0.1.html">Version 4.0.1</a></li>
		    <li><a href="release-notes-4.0.2.html">Version 4.0.2</a></li>
		    <li><a href="release-notes-4.0.3.html">Version 4.0.3</a></li>
		    <li><a href="release-notes-4.0.4.html">Version 4.0.4</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.1.x</a>
		  <ul>
		    <li><a href="release-notes-4.1.html">Version 4.1.0</a></li>
		    <li><a href="release-notes-4.1.1.html">Version 4.1.1</a></li>
		    <li><a href="release-notes-4.1.2.html">Version 4.1.2</a></li>
		    <li><a href="release-notes-4.1.3.html">Version 4.1.3</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.2.x</a>
		  <ul>
		    <li><a href="release-notes-4.2.html">Version 4.2.0</a></li>
		    <li><a href="release-notes-4.2.1.html">Version 4.2.1</a></li>
		    <li><a href="release-notes-4.2.2.html">Version 4.2.2</a></li>
		  </ul>
		</li>
		<li><a>Versions 5.0.x</a>
		  <ul>
		    <li><a href="release-notes-5.0.html">Version 5.0.0</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a href="coverity-scan.html">Coverity scan</a></li>
	    <li><a href="install.html">Installation</a></li>
	  </ul>
	</li>
	<li><a>Documentation</a>
	  <ul>
	    <li><a href="documentations.html">General documentation</a></li>
	    <li><a href="gallery.html">Gallery</a></li>
<!--	    
	    <li><a href="http://tfel.sourceforge.net/doxygen/index.html">Doxygen documentation</a></li>
-->
	    <li><a>Behaviours</a>
	      <ul>
		<li><a href="tutorial.html">Tutorial</a></li>
		<li><a href="implicit-dsl.html">The Implicit DSL</a></li>
		<li><a href="benchmark.html">Benchmark</a></li>
		<li><a href="parameters.html">Parameters</a></li>
		<li><a href="BehaviourBricks.html">Behaviour bricks</a></li>
		<li><a href="interfaces.html">Solver interfaces</a>
		  <ul>
		    <li><a href="castem.html">Cast3M</a></li>
		    <li><a href="amitex.html">AMITEX_FFTP</a></li>
		    <li><a href="aster.html">Code-Aster</a></li>
    		    <li><a href="abaqus.html">Abaqus</a></li>
    		    <li><a href="epx.html">EUROPLEXUS</a></li>
		    <li><a href="zmat.html">ZeBuLoN</a></li>
   		    <li><a href="calculix.html">CalculiX</a></li>
		    <!-- <li><a >TMFFT</a></li> -->
		    <li><a href="cyrano.html">Cyrano</a></li>
   		    <li><a href="generic-material-property-interface.html">Generic interface for material properties</a></li>
   		    <li><a href="generic-behaviours-interface.html">Generic interface for behaviours</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a>TFEL libraries</a>
	      <ul>
		<li><a href="libraries_usage.html">Usage of the TFEL libraries in C++</a></li>
		<li><a href="tfel-math.html">TFEL/Math</a></li>
		<li><a href="tfel-material.html">TFEL/Material</a></li>
	      </ul>
	    </li>
	    <li><a>Python modules</a>
	      <ul>
		<li><a href="tfel-python.html">TFEL modules</a></li>
		<li><a href="mfront-python.html">mfront module</a></li>
		<li><a href="mtest-python.html">mtest module</a></li>
	      </ul>
	    </li>
	    <li><a>MFront keywords</a>
	      <ul>
	        <li><a href="Default-keywords.html">Default</a></li>
	        <li><a href="DefaultCZM-keywords.html">DefaultCZM</a></li>
	        <li><a href="DefaultFiniteStrain-keywords.html">DefaultFiniteStrain</a></li>
	        <li><a href="DefaultGenericBehaviour-keywords.html">DefaultGenericBehaviour</a></li>
	        <li><a href="DefaultModel-keywords.html">DefaultModel</a></li>
	        <li><a href="Implicit-keywords.html">Implicit</a></li>
	        <li><a href="ImplicitCZM-keywords.html">ImplicitCZM</a></li>
	        <li><a href="ImplicitFiniteStrain-keywords.html">ImplicitFiniteStrain</a></li>
	        <li><a href="ImplicitGenericBehaviour-keywords.html">ImplicitGenericBehaviour</a></li>
	        <li><a href="ImplicitModel-keywords.html">ImplicitModel</a></li>
	        <li><a href="ImplicitII-keywords.html">ImplicitII</a></li>
	        <li><a href="IsotropicMisesCreep-keywords.html">IsotropicMisesCreep</a></li>
	        <li><a href="IsotropicMisesPlasticFlow-keywords.html">IsotropicMisesPlasticFlow</a></li>
	        <li><a href="IsotropicPlasticMisesFlow-keywords.html">IsotropicPlasticMisesFlow</a></li>
	        <li><a href="IsotropicStrainHardeningMisesCreep-keywords.html">IsotropicStrainHardeningMisesCreep</a></li>
	        <li><a href="MaterialLaw-keywords.html">MaterialLaw</a></li>
	        <li><a href="MaterialProperty-keywords.html">MaterialProperty</a></li>
	        <li><a href="Model-keywords.html">Model</a></li>
	        <li><a href="MultipleIsotropicMisesFlows-keywords.html">MultipleIsotropicMisesFlows</a></li>
	        <li><a href="RungeKutta-keywords.html">RungeKutta</a></li>
	        <li><a href="RungeKuttaFiniteStrain-keywords.html">RungeKuttaFiniteStrain</a></li>
	        <li><a href="RungeKuttaGenericBehaviour-keywords.html">RungeKuttaGenericBehaviour</a></li>
	        <li><a href="RungeKuttaModel-keywords.html">RungeKuttaModel</a></li>
	      </ul>
	    </li>
	    <li><a href="MTest-keywords.html">MTest keywords</a></li>
	    <li><a href="physical-constants.html">Physical constants</a></li>
	    <li><a href="glossary.html">Glossary</a></li>
	    <li><a href="publications.html">Publications</a></li>
	    <li><a href="faq.html">FAQ</a></li>
	    <li><a href="about.html">About</a></li>
	  </ul>
	</li>
	<li><a>Contributing</a>
	  <ul>
	    <li><a href="svn.html">Access to source repositories</a></li>
	    <li><a href="devel.html">Development guidelines</a></li>
	    <li><a href="https://github.com/thelfer/tfel/issues">Report bugs</a></li>
	  </ul>
	</li>
	<li><a>Getting Help</a>
	  <ul>
	    <li><a href="search.html">Search on this site</a></li>
	    <li><a href="https://github.com/thelfer/tfel/discussions">Forum</a></li>
	    <li><a href="https://github.com/thelfer/tfel/issues">Bug report</a></li>
	    <li><a href="https://github.com/thelfer/tfel/issues">Feature request</a></li>
	    <li><a href="mailto:tfel-contact@cea.fr">Contact</a></li>
	  </ul>
	</li>
      </ul>
    </header>
<div id="header">
<h1 class="title">The MTest Python API</h1>
<h2 class="author">Thomas Helfer</h2>
<h3 class="date">16/08/2021</h3>
</div>
<div id="TOC">
<ul>
<li><a href="#the-materialproperty-class"
id="toc-the-materialproperty-class">The <code>MaterialProperty</code>
class</a>
<ul>
<li><a href="#description" id="toc-description">Description</a></li>
<li><a href="#usage" id="toc-usage">Usage</a></li>
</ul></li>
<li><a href="#the-behaviour-class" id="toc-the-behaviour-class">The
<code>Behaviour</code> class</a>
<ul>
<li><a href="#rationale" id="toc-rationale">Rationale</a></li>
<li><a href="#usage-1" id="toc-usage-1">Usage</a></li>
<li><a href="#methods-available" id="toc-methods-available">Methods
available</a></li>
</ul></li>
<li><a href="#the-mtest-class" id="toc-the-mtest-class">The
<code>MTest</code> class</a>
<ul>
<li><a href="#the-mtestcurrentstate-class"
id="toc-the-mtestcurrentstate-class">The <code>MTestCurrentState</code>
class</a>
<ul>
<li><a href="#fields-of-the-mtestcurrentstate-class"
id="toc-fields-of-the-mtestcurrentstate-class">Fields of the
<code>MTestCurrentState</code> class</a></li>
<li><a href="#methods-of-the-mtestcurrentstate-class"
id="toc-methods-of-the-mtestcurrentstate-class">Methods of the
<code>MTestCurrentState</code> class</a></li>
</ul></li>
</ul></li>
<li><a href="#the-pipetest-class" id="toc-the-pipetest-class">The
<code>PipeTest</code> class</a>
<ul>
<li><a
href="#the-studycurrentstate-structurecurrentstate-and-currentstate-classes"
id="toc-the-studycurrentstate-structurecurrentstate-and-currentstate-classes">The
<code>StudyCurrentState</code>, <code>StructureCurrentState</code> and
<code>CurrentState</code> classes</a>
<ul>
<li><a href="#the-studycurrentstate-class"
id="toc-the-studycurrentstate-class">The <code>StudyCurrentState</code>
class</a></li>
<li><a href="#the-structurecurrentstate-class"
id="toc-the-structurecurrentstate-class">The
<code>StructureCurrentState</code> class</a></li>
<li><a href="#the-currentstate-class"
id="toc-the-currentstate-class">The <code>CurrentState</code>
class</a></li>
<li><a href="#example-of-use-of-the-pipetest-class"
id="toc-example-of-use-of-the-pipetest-class">Example of use of the
<code>PipeTest</code> class</a></li>
</ul></li>
</ul></li>
<li><a href="#references" id="toc-references">References</a></li>
</ul>
</div>
<p>This page describes the <code>mtest</code> module</p>
<h1 id="the-materialproperty-class">The <code>MaterialProperty</code>
class</h1>
<h2 id="description">Description</h2>
<p>The <code>MaterialProperty</code> class handles a material
property.</p>
<p>This class has the following core interface:</p>
<ul>
<li><code>getVariablesNames</code>, which returns the names of the
arguments of material property.</li>
<li><code>setVariableValue</code> which allows to set the value of an
argument of the material property.</li>
<li><code>getValue</code> which evaluates the material property for the
values of the arguments set by the <code>setVariableValue</code>
method.</li>
<li><code>getParametersNames</code>, which returns the names of the
parameters of material property.</li>
<li><code>setParameter</code> which allows to change the value of a
parameter.</li>
</ul>
<p>As described in the next paragraph, several convenient methods and
operators are also provided to simplify the usage of this class.</p>
<h2 id="usage">Usage</h2>
<p>Here is an example of the usage of the <code>MaterialProperty</code>
class.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mtest</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>young_modulus <span class="op">=</span> mtest.MaterialProperty(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;src/libCastemVanadium.so&#39;</span>, <span class="st">&#39;VanadiumAlloy_YoungModulus_SRMA&#39;</span>)</span></code></pre></div>
<p>Note that the <code>MaterialProperty</code> constructor automatically
detects the interface used to generate the material property and
instantiates the proper concrete implementation internally. In this
case, an instance of the <code>CastemMaterialProperty</code> class is
instanciated.</p>
<p>The arguments of the material property can then be set and the
material property can be evaluated:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>young_modulus.setVariableValue(<span class="st">&#39;Temperature&#39;</span>, <span class="dv">562</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>E <span class="op">=</span> young_modulus.getValue()</span></code></pre></div>
<p>Setting the variables’ values and evaluating the material property
can be tedious. To avoid this, overloaded versions of the
<code>getValue</code> are available:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using a dictionary</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>E <span class="op">=</span> young_modulus.getValue({<span class="st">&#39;Temperature&#39;</span>: <span class="dv">562</span>})</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for material properties with only one argument</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>E <span class="op">=</span> young_modulus.getValue(<span class="dv">562</span>)</span></code></pre></div>
<p>To make the code even more explicit, the call operator can also be
used, as follows:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using a dictionary</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>E <span class="op">=</span> young_modulus({<span class="st">&#39;Temperature&#39;</span>: <span class="dv">562</span>})</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for material properties with only one argument</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>E <span class="op">=</span> young_modulus(<span class="dv">562</span>)</span></code></pre></div>
<h1 id="the-behaviour-class">The <code>Behaviour</code> class</h1>
<h2 id="rationale">Rationale</h2>
<p>The <code>Behaviour</code> class retrieves information in a shared
library about a behaviour specific implementation.</p>
<p>Contrary the <code>tfel.system.ExternalBehaviourDescription</code>
class, the information given by the <code>Behaviour</code> class takes
into account the variables that are implicitly declared by the interface
to match its specific (internal) requirements.</p>
<p>For example, if a behaviour requires the stiffness tensor to be given
by the calling code (see the <code>@RequireStiffnessTensor</code>
<code>MFront</code>’ keyword for details), additional material
properties are provided to the behaviour. The number of those additional
material properties may depend on the modelling hypothesis (mostly for
orthotropic behaviours): the calling code generally only not provides
the minimal number of material properties needed, in order to reduce the
cost of handling those extra material properties.</p>
<p>One can give some other examples:</p>
<ul>
<li>If the <code>@AsterSaveTangentOperator</code> is used in
<code>MFront</code>, the consistent tangent operator will be saved as
additional state variables.</li>
<li>If the <code>@AbaqusOrthotropyManagementPolicy</code> is used to set
the orthotropy management policy to “<code>MFront</code>” in
<code>Abaqus/Standard</code> and <code>Abaqus/Explicit</code>, the
definition of the orthotropic axes must be given in additional state
variables.</li>
<li>Most of time, support for the plane stress hypothesis defines an
additional state variable, the axial strain (see for example the
<code>StandardElasticity</code> brick). This variable is only defined
for this specific modelling hypothesis.</li>
</ul>
<h2 id="usage-1">Usage</h2>
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mtest</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> mtest.Behaviour(<span class="st">&#39;aster&#39;</span>,<span class="st">&#39;libAsterBehaviour.so&#39;</span>,<span class="st">&#39;asterplasticity&#39;</span>,<span class="st">&#39;PlaneStrain&#39;</span>)</span></code></pre></div>
<h2 id="methods-available">Methods available</h2>
<p>The following methods are available:</p>
<ul>
<li><code>getBehaviourType</code>: Return the behaviour type. The value
returned has the following meaning:
<ul>
<li><code>0</code>: general behaviour.</li>
<li><code>1</code>: small strain behaviour.</li>
<li><code>2</code>: finite strain behaviour.</li>
<li><code>3</code>: cohesive zone model.</li>
</ul></li>
<li><code>getBehaviourKinematic</code>: Return the behaviour kinematic.
The value returned has the following meaning:
<ul>
<li><code>0</code>: undefined kinematic.</li>
<li><code>1</code>: standard small strain behaviour kinematic.</li>
<li><code>2</code>: cohesive zone model kinematic.</li>
<li><code>3</code>: standard finite strain kinematic (F-Cauchy).</li>
<li><code>4</code>: <code>PTest</code> finite strain kinematic (eto-pk1)
(see <span class="citation" data-cites="helfer_extension_2015">[<a
href="#ref-helfer_extension_2015"
role="doc-biblioref">1</a>]</span>).</li>
</ul></li>
<li><code>getDrivingVariablesSize</code>: Return the size of a vector
able to contain all the components of the driving variables.</li>
<li><code>getThermodynamicForcesSize</code>: Return the size of a vector
able to contain all the components of the thermodynamic forces.</li>
<li><code>getStensorComponentsSuffixes</code>: Return the components
suffixes of a symmetric tensor.</li>
<li><code>getVectorComponentsSuffixes</code>: Return the components
suffixes of a vector.</li>
<li><code>getTensorComponentsSuffixes</code>: Return the components
suffixes of a tensor.</li>
<li><code>getDrivingVariablesComponents</code>: Return the components of
the driving variables.</li>
<li><code>getThermodynamicForcesComponents</code>: Return the components
of the thermodynamic forces.</li>
<li><code>getDrivingVariableComponentPosition</code>: Return the
position of the component of a driving variable.</li>
<li><code>getThermodynamicForceComponentPosition</code>: Return the
position of the component of a thermodynamic force.</li>
<li><code>getSymmetryType</code>: Return the symmetry of the behaviour:
<ul>
<li><code>0</code> means that the behaviour is isotropic.</li>
<li><code>1</code> means that the behaviour is orthotropic.</li>
</ul></li>
<li><code>getMaterialPropertiesNames</code>: return the names of the
material properties.</li>
<li><code>getInternalStateVariablesNames</code>: Return the names of the
internal state variables.</li>
<li><code>expandInternalStateVariablesNames</code>: Return the names of
the internal state variables, taking into account the suffixes for
vectors, symmetric tensors and tensors.</li>
<li><code>getInternalStateVariablesSize</code>: Return the the size of
the array of internal variables.</li>
<li><code>getInternalStateVariablesDescriptions</code>: Return the
descriptions the internal variables.</li>
<li><code>getInternalStateVariableType</code>: Return the type of an
internal variable:
<ul>
<li><code>0</code> means that the internal state variable is a
scalar.</li>
<li><code>1</code> means that the internal state variable is a symmetric
tensor.</li>
<li><code>3</code> means that the internal state variable is a
tensor.</li>
</ul></li>
<li><code>getInternalStateVariablePosition</code>: Return the internal
state variable position.</li>
<li><code>getExternalStateVariablesNames</code>: Return the names of the
external state variables.</li>
<li><code>getParametersNames</code>: Return the names of the floating
point parameters.</li>
<li><code>getIntegerParametersNames</code>: Return the names of the
integer parameters.</li>
<li><code>getUnsignedShortParametersNames</code>: Return the names of
the unsigned short parameters.</li>
</ul>
<h1 id="the-mtest-class">The <code>MTest</code> class</h1>
<p>Here is a first example of the <code>MTest</code> class usage:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> std</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tfel.tests</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mtest <span class="im">import</span> <span class="op">*</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> MTest()</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>umax <span class="op">=</span> <span class="fl">3.e-6</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>setVerboseMode(VerboseLevel.VERBOSE_LEVEL2)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>m.setPredictionPolicy(PredictionPolicy.LINEARPREDICTION)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>m.setBehaviour(<span class="st">&quot;umat&quot;</span>,<span class="st">&quot;src/libUmatBehaviour.so&quot;</span>,<span class="st">&quot;umattvergaard&quot;</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>m.setMaterialProperty(<span class="st">&#39;NormalStiffness&#39;</span>,<span class="fl">2.e16</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>m.setMaterialProperty(<span class="st">&#39;TangentialStiffness&#39;</span>,<span class="fl">2.e16</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>m.setMaterialProperty(<span class="st">&#39;MassDensity&#39;</span>,<span class="fl">0.</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>m.setMaterialProperty(<span class="st">&#39;NormalThermalExpansion&#39;</span>,<span class="fl">0.</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>m.setMaterialProperty(<span class="st">&#39;MaximumStress&#39;</span>,<span class="fl">200.e6</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>m.setMaterialProperty(<span class="st">&#39;MaximumOpeningDisplacement&#39;</span>,<span class="fl">3.e-6</span>)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>m.setExternalStateVariable(<span class="st">&quot;Temperature&quot;</span>,<span class="fl">293.15</span>)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>m.setImposedOpeningDisplacement(<span class="st">&#39;Un&#39;</span>,{<span class="fl">0.</span>:<span class="fl">0.</span>,<span class="fl">1800.</span>:umax<span class="op">/</span><span class="dv">2</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>                      <span class="fl">2400.</span>:<span class="fl">0.</span>,<span class="dv">2600</span>:<span class="op">-</span><span class="fl">1.e-8</span>,<span class="dv">3000</span>:<span class="fl">0.</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>                      <span class="fl">3600.</span>:umax})</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>m.setTimes([<span class="fl">3.6</span><span class="op">*</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">1001</span>)])</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>m.setOutputFileName(<span class="st">&quot;castemtvergaard.res&quot;</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>m.execute()</span></code></pre></div>
<p>This example shows that there is almost a one to one mapping between
the keywords used in <code>mtest</code> input file and the methods of
the <code>MTest</code> class.</p>
<p>The last instruction will execute all the time steps defined the time
discretization defined using the <code>setTimes</code> method.</p>
<p>This is not convenient and the <code>mtest</code> module allows you
to precisely define and manage how the computations are performed.</p>
<p>The three last line are indeed equivalent to:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>s  <span class="op">=</span> MTestCurrentState()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>wk <span class="op">=</span> MTestWorkSpace()</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>m.setOutputFileName(<span class="st">&quot;castemtvergaard.res&quot;</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>m.completeInitialisation()</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>m.initializeCurrentState(s)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>m.initializeWorkSpace(wk)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> [<span class="fl">3.6</span><span class="op">*</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">1001</span>)]</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># values at 0</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>m.printOutput(t[<span class="dv">0</span>],s)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># do the job</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(t)<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    m.setEvolutionValue(<span class="st">&#39;Un&#39;</span>,t[i<span class="op">+</span><span class="dv">1</span>],umax<span class="op">*</span>t[i<span class="op">+</span><span class="dv">1</span>]<span class="op">/</span>t[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    m.execute(s,wk,t[i],t[i<span class="op">+</span><span class="dv">1</span>])</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    m.printOutput(t[i<span class="op">+</span><span class="dv">1</span>],s)</span></code></pre></div>
<p>The previous example introduces two classes: the
<code>MTestWorkSpace</code> class and the <code>MTestCurrentState</code>
class.</p>
<p>The <code>MTestWorkSpace</code> is of no interest for the end-user.
It only manages to memory allocated to perform the computation: this
memory is allocated once when calling the
<code>initializeWorkSpace</code> of the MTest class.</p>
<p>The <code>MTestCurrentState</code> class will be discussed in depth
in the next section.</p>
<h2 id="the-mtestcurrentstate-class">The <code>MTestCurrentState</code>
class</h2>
<p>The <code>MTestCurrentState</code> is a wrapper class around the
<code>StudyCurrentState</code> class discussed later.</p>
<p>It has been introduced for backward compatibility with previous
versions of <code>TFEL</code> and have a simpler interface for studies
handled by the <code>MTest</code> class (one structure, one integration
point..).</p>
<p>This structure contains the state of the (unique) integration point
at the beginning and at the end of the time step.</p>
<h3 id="fields-of-the-mtestcurrentstate-class">Fields of the
<code>MTestCurrentState</code> class</h3>
<p>The <code>MTestCurrentState</code> class provides the following
fields:</p>
<ul>
<li><code>u_1</code>: values of the unknowns (driving variables and
lagrange multipliers) at the beginning of the previous time step. This
information is used for extrapolation the unknowns evolution over the
time step.</li>
<li><code>u0</code>: values of the unknowns (driving variables and
lagrange multipliers) at the beginning of the current time step.</li>
<li><code>u1</code>: values of the unknowns (driving variables and
lagrange multipliers) at the end of the current time step.</li>
<li><code>s_1</code>: values of the forces (thermodynamic forces and
dual of the lagrange multipliers) at the beginning of the previous time
step.</li>
<li><code>s1</code>: values of the forces (thermodynamic forces and dual
of the lagrange multipliers) at the beginning of the end time step.</li>
<li><code>s0</code>: values of the forces (thermodynamic forces and dual
of the lagrange multipliers) at the beginning of the current time
step.</li>
<li><code>e0</code>: values of the driving variables at the beginning of
the time step.</li>
<li><code>e1</code>: values of the driving variables at the end of the
time step.</li>
<li><code>e_th0</code>: values of the thermal strain for small strain
behaviours at the beginning of the current time step. Those values are
not null only if the thermal strain is handled by <code>MTest</code> and
not by the behaviour.</li>
<li><code>e_th1</code>: values of the thermal strain for small strain
behaviours at the end of the time step. Those values are not null only
if the thermal strain is handled by <code>MTest</code> and not by the
behaviour.</li>
<li><code>mprops1</code>: values of the material properties at the end
of the time step.</li>
<li><code>iv_1</code>: values of the internal state variables at the
beginning of the previous time step.</li>
<li><code>iv0</code>: values of the internal state variables at the
beginning of the current time step.</li>
<li><code>iv1</code>: values of the internal state variables at the end
of the current time step.</li>
<li><code>evs0</code>: values of the external state variables at the
beginning of the current time step.</li>
<li><code>desv</code>: values of the increment of the external state
variables over the current time step.</li>
<li><code>period</code>: total number of time steps done so far.</li>
<li><code>iterations</code>: total number of iterations done so
far.</li>
<li><code>subSteps</code>: total number of sub steps done so far.</li>
<li><code>dt_1</code>: value of the previous time increment.</li>
<li><code>Tref</code>: value of the reference temperature for the
thermal strain computation.</li>
</ul>
<p>The meaning of the driving variables depends on the type of behaviour
treated:</p>
<ul>
<li>for small strain behaviours, they are the components of the
linearized strain tensor.</li>
<li>for finite strain behaviours, they are the components of the
deformation gradient tensor.</li>
<li>for cohesive zone models, they are the components of the opening
displacement vector.</li>
</ul>
<p>The meaning of the thermodynamic forces also depends on the type of
behaviour treated:</p>
<ul>
<li>for small strain behaviours, they are the components of the stress
tensor.</li>
<li>for finite strain behaviours, they are the components of the Cauchy
stress tensor gradient.</li>
<li>for cohesive zone models, they are the components of the traction
force vector.</li>
</ul>
<h3 id="methods-of-the-mtestcurrentstate-class">Methods of the
<code>MTestCurrentState</code> class</h3>
<p>The <code>MTestCurrentState</code> class provide the
<code>copy</code> method to get a deep copy of the structure. It is
mandatory to use such a copy in some advanced usage of the
<code>MTest</code> class. This includes the following cases:</p>
<ul>
<li>make appropriate time substepping in case of integration
failure</li>
<li>loading control based of the behaviour feed-back</li>
</ul>
<p>The <code>MTestCurrentState</code> also provides
<code>getInternalStateVariableValue</code> and
<code>setInternalStateVariableValue</code> methods, which are described
more in depth below.</p>
<h1 id="the-pipetest-class">The <code>PipeTest</code> class</h1>
<p>Here is an example:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> std</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tfel.tests</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mtest <span class="im">import</span> PipeTest,StudyCurrentState,SolverWorkSpace, <span class="op">\</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    setVerboseMode, VerboseLevel</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>setVerboseMode(VerboseLevel.VERBOSE_QUIET)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> PipeTest()</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># geometry and meshing</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>t.setInnerRadius(<span class="fl">4.2e-3</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>t.setOuterRadius(<span class="fl">4.7e-3</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>t.setNumberOfElements(<span class="dv">10</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>t.setElementType(<span class="st">&#39;Linear&#39;</span>)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co"># modelling hypothesis</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>t.setAxialLoading(<span class="st">&#39;None&#39;</span>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>t.performSmallStrainAnalysis()</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>t.setTimes([<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>t.setInnerPressureEvolution(<span class="fl">1.5e6</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>t.setOuterPressureEvolution({<span class="dv">0</span>:<span class="fl">1.5e6</span>,<span class="dv">1</span>:<span class="fl">10e6</span>})</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>t.setBehaviour(<span class="st">&#39;castem&#39;</span>,<span class="st">&#39;../../src/libUmatBehaviour.so&#39;</span>,<span class="st">&#39;umatelasticity&#39;</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>t.setMaterialProperty(<span class="st">&#39;YoungModulus&#39;</span>,<span class="fl">150e9</span>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>t.setMaterialProperty(<span class="st">&#39;PoissonRatio&#39;</span>,<span class="fl">0.3</span>)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>t.setExternalStateVariable(<span class="st">&#39;Temperature&#39;</span>,<span class="fl">293.15</span>)</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>t.setOutputFileName(<span class="st">&quot;pipe.res&quot;</span>)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>t.execute()</span></code></pre></div>
<h2
id="the-studycurrentstate-structurecurrentstate-and-currentstate-classes">The
<code>StudyCurrentState</code>, <code>StructureCurrentState</code> and
<code>CurrentState</code> classes</h2>
<h3 id="the-studycurrentstate-class">The <code>StudyCurrentState</code>
class</h3>
<p>As with the <code>MTest</code> class, the user can have precise
control of how the computations are performed. The last instruction of
the previous example can be changed by the following code:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>s  <span class="op">=</span> StudyCurrentState()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>wk <span class="op">=</span> SolverWorkSpace()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>t.completeInitialisation()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>t.initializeCurrentState(s)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>t.initializeWorkSpace(wk)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># values at 0</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>t.printOutput(<span class="dv">0</span>,s)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># resolution from 0 to 1</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>t.execute(s,wk,<span class="fl">0.</span>,<span class="fl">1.</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># values at 1</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>t.printOutput(<span class="fl">1.</span>,s)</span></code></pre></div>
<p>This code introduces two new classes: <code>SolverWorkSpace</code>
and <code>StudyCurrentState</code>. Only the latter is interesting for
the end user.</p>
<p>The <code>StudyCurrentState</code> has been designed to encapsulate
all the test cases handled by <code>MTest</code>, in the current and
future versions of <code>TFEL</code>.</p>
<p>The <code>StudyCurrentState</code> provides the following fields:</p>
<ul>
<li><code>u_1</code>: values of the unknowns (driving variables and
lagrange multipliers) at the beginning of the previous time step. This
information is used for extrapolation the unknowns evolution over the
time step.</li>
<li><code>u0</code>: values of the unknowns (driving variables and
lagrange multipliers) at the beginning of the current time step.</li>
<li><code>u1</code>: values of the unknowns (driving variables and
lagrange multipliers) at the end of the current time step.</li>
<li><code>u10</code>: values of the unknowns (driving variables and
lagrange multipliers) at the previous iteration.</li>
<li><code>period</code>: total number of time steps done so far.</li>
<li><code>iterations</code>: total number of iterations done so
far.</li>
<li><code>subSteps</code>: total number of sub steps done so far.</li>
<li><code>dt_1</code>: value of the previous time increment.</li>
</ul>
<p>Some of those fields are the same than those described earlier when
discussing the <code>MTestCurrentState</code> class. Indeed, the
<code>MTestCurrentState</code> is just a wrapper around the
<code>StudyCurrentState</code>.</p>
<p>In the case of pipes, the unknowns are the radial displacements of
the nodes of the pipe mesh and the axial displacement. There are no
Lagrange multipliers.</p>
<h3 id="the-structurecurrentstate-class">The
<code>StructureCurrentState</code> class</h3>
<p>A study may contains one or several structures. The current state of
those structures are handled by the <code>StructureCurrentState</code>
class which can be retrieved from a <code>StudyCurrentState</code>
object using the <code>getStructureCurrentState</code> method. This
latter method takes the name of the structure as argument.</p>
<p>In the case of pipes, only one <em>unnamed</em> structure is defined
(See the example below).</p>
<p>The <code>StructureCurrentState</code> has mostly one field:
<code>istates</code> which contains <code>CurrentState</code> objects
describing each integration points.</p>
<p>For a pipe, integration points in the <code>istates</code> array are
ordered using their position from the closest to the inner radius of the
pipe to the closest to the outer radius of the pipe.</p>
<h3 id="the-currentstate-class">The <code>CurrentState</code> class</h3>
<p>The <code>CurrentState</code> class contains the values at
integration points. It contains the following fields:</p>
<ul>
<li><code>s_1</code>: values of the forces (thermodynamic forces and
dual of the lagrange multipliers) at the beginning of the previous time
step.</li>
<li><code>s1</code>: values of the forces (thermodynamic forces and dual
of the lagrange multipliers) at the beginning of the end time step.</li>
<li><code>s0</code>: values of the forces (thermodynamic forces and dual
of the lagrange multipliers) at the beginning of the current time
step.</li>
<li><code>e0</code>: values of the driving variables at the beginning of
the time step.</li>
<li><code>e1</code>: values of the driving variables at the end of the
time step.</li>
<li><code>e_th0</code>: values of the thermal strain for small strain
behaviours at the beginning of the current time step. Those values are
not null only if the thermal strain is handled by <code>MTest</code> and
not by the behaviour.</li>
<li><code>e_th1</code>: values of the thermal strain for small strain
behaviours at the end of the time step. Those values are not null only
if the thermal strain is handled by <code>MTest</code> and not by the
behaviour.</li>
<li><code>mprops1</code>: values of the material properties at the end
of the time step.</li>
<li><code>iv_1</code>: values of the internal state variables at the
beginning of the previous time step.</li>
<li><code>iv0</code>: values of the internal state variables at the
beginning of the current time step.</li>
<li><code>iv1</code>: values of the internal state variables at the end
of the current time step.</li>
<li><code>evs0</code>: values of the external state variables at the
beginning of the current time step.</li>
<li><code>desv</code>: values of the increment of the external state
variables over the current time step.</li>
</ul>
<p>Those fields are the same than those of the
<code>MTestCurrentState</code> which indeed acts as a proxy for the
unique integration point it handles.</p>
<p>Here is an example of use of the <code>StudyCurrentState</code>
class:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the structure current state</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>scs <span class="op">=</span> s.getStructureCurrentState(<span class="st">&quot;&quot;</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># iterate of over the integration points</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cs <span class="kw">in</span> scs.istates:</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#print the radial stress, the axial stress, the hoop stress</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="bu">str</span>(cs.s1[<span class="dv">0</span>])<span class="op">+</span><span class="st">&quot; &quot;</span><span class="op">+</span><span class="bu">str</span>(cs.s1[<span class="dv">1</span>])<span class="op">+</span><span class="st">&quot; &quot;</span><span class="op">+</span><span class="bu">str</span>(cs .s1[<span class="dv">1</span>]))</span></code></pre></div>
<h4 id="accessing-the-values-of-the-internal-state-variables">Accessing
the values of the internal state variables</h4>
<p>The internal state variables are stored in the <code>iv_1</code>,
<code>iv0</code> and <code>iv1</code> fields. Beware that access to
those fields creates a copy of the underlying array of values.</p>
<p>The <code>CurrentState</code> also provides a method called
<code>getInternalStateVariableValue</code> which has two overloads.</p>
<p>The first one takes the name of a variable and returns its value at
the end of the time step.</p>
<p>The second one has one more argument: the depth of the values to be
accessed:</p>
<ul>
<li><code>-1</code> means that we are modifying the internal state
variable value at the beginning of the previous time step</li>
<li><code>0</code> means that we are modifying the internal state
variable value at the beginning of the current time step</li>
<li><code>1</code> means that we are modifying the internal state
variable value at the end of the current time step</li>
</ul>
<h4 id="initial-values-of-the-internal-state-variables">Initial values
of the internal state variables</h4>
<p>The initial values of the internal state variables can be specified
by the <code>setInternalStateVariableInitialValue</code> method of the
<code>MTest</code> or <code>PipeTest</code> class. This method takes the
name of internal state variable and a <code>list</code> of
<code>floats</code> (a <code>float</code> is accepted for scalar
internal state variables).</p>
<p>The values are stored in the <code>MTest</code> or
<code>PipeTest</code> object and will be used every time the
<code>initializeCurrentState</code> method is called.</p>
<p>Here is an example of use of the
<code>getInternalStateVariableValue</code> method:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>scs <span class="op">=</span> s.getStructureCurrentState(<span class="st">&quot;&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># get the maximum of the equivalent plastic strain over the integration points</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="bu">max</span>([cs.getInternalStateVariableValue(<span class="st">&#39;EquivalentPlasticStrain&#39;</span>) <span class="cf">for</span> cs <span class="kw">in</span> scs.istates])</span></code></pre></div>
<h4 id="modifying-the-values-of-the-internal-state-variables">Modifying
the values of the internal state variables</h4>
<p>Sometimes, it can be useful to modify the values of the internal
state variables during the computation. This can</p>
<p>The internal state variables are stored in the <code>iv_1</code>,
<code>iv0</code> and <code>iv1</code> fields. Access to those variables
creates a copy of the underlying array of values. Thus, modifying those
values has no effect of the <code>CurrentState</code> object.</p>
<p>To modify the values of a <code>CurrentState</code>, one may of the
two overloads of the <code>setInternalStateVariableValue</code>
method:</p>
<ul>
<li>the first one takes the name of the state variable to be modified,
the new values as a <code>list</code> of <code>floats</code> (a
<code>float</code> is accepted for scalar internal state variables). The
value given is affected to internal state variable values at the
beginning of the previous time step (<code>iv_1</code> field), the
beginning of the current time step (<code>iv0</code> field) and the end
of the current time step (<code>iv1</code> field).</li>
<li>the second one as one more argument than the first overload: the
depth of the values to be modified:
<ul>
<li><code>-1</code> means that we are modifying the internal state
variable value at the beginning of the previous time step</li>
<li><code>0</code> means that we are modifying the internal state
variable value at the beginning of the current time step</li>
<li><code>1</code> means that we are modifying the internal state
variable value at the end of the current time step</li>
</ul></li>
</ul>
<p>Here is an example of use of the
<code>setInternalStateVariableValue</code> method:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>scs <span class="op">=</span> s.getStructureCurrentState(<span class="st">&quot;&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># iterate of over the integration points</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cs <span class="kw">in</span> scs.istates:</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set the value of the equivalent plastic strain</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    cs.setInternalStateVariableValue(<span class="st">&#39;EquivalentPlasticStrain&#39;</span>,<span class="fl">2.e-2</span>)</span></code></pre></div>
<h3 id="example-of-use-of-the-pipetest-class">Example of use of the
<code>PipeTest</code> class</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mtest <span class="im">import</span> PipeTest,StudyCurrentState,SolverWorkSpace, <span class="op">\</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    setVerboseMode, VerboseLevel</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># no output</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>setVerboseMode(VerboseLevel.VERBOSE_QUIET)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>Re <span class="op">=</span> <span class="fl">4.18e-3</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>Fz <span class="op">=</span> <span class="fl">3.1415926</span><span class="op">*</span>Re<span class="op">*</span>Re<span class="op">*</span><span class="fl">20e6</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> PipeTest()</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># geometric and meshing options</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>t.setInnerRadius(<span class="dv">0</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>t.setOuterRadius(Re)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>t.setNumberOfElements(<span class="dv">1</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>t.setElementType(<span class="st">&#39;Quadratic&#39;</span>)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Type of loading</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>t.setAxialLoading(<span class="st">&#39;ImposedAxialForce&#39;</span>)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co"># no geometrical update</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>t.performSmallStrainAnalysis()</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="co"># by default, with the &#39;castem&#39; interface, one does not use the</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co"># consistent tangent operator. Using the acceleration algorithm</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co"># is mandatory for convergence.</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>t.setUseCastemAccelerationAlgorithm(<span class="va">True</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="co"># axial loading</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>t.setAxialForceEvolution({<span class="fl">0.</span>:<span class="fl">0.</span>,<span class="fl">1.e-6</span> :Fz,<span class="dv">3600</span>:Fz})</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="co"># definition of the mechanical behaviour and the material properties</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>t.setBehaviour(<span class="st">&#39;castem&#39;</span>,<span class="st">&#39;../../src/libUmatBehaviour.so&#39;</span>,<span class="st">&#39;umatnorton&#39;</span>)</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>t.setMaterialProperty(<span class="st">&#39;YoungModulus&#39;</span>,<span class="fl">150e9</span>)</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>t.setMaterialProperty(<span class="st">&#39;PoissonRatio&#39;</span>,<span class="fl">0.3</span>)</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>t.setMaterialProperty(<span class="st">&#39;A&#39;</span>,<span class="fl">8.e-67</span>)</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>t.setMaterialProperty(<span class="st">&#39;E&#39;</span>,<span class="fl">8.2</span>)</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="co"># temperature (mandatory)</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>t.setExternalStateVariable(<span class="st">&#39;Temperature&#39;</span>,<span class="fl">293.15</span>)</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a><span class="co"># results file</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>t.setOutputFileName(<span class="st">&#39;pipe4.res&#39;</span>)</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>s  <span class="op">=</span> StudyCurrentState()</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>wk <span class="op">=</span> SolverWorkSpace()</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a><span class="co"># complete initialisation of the problem</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>t.completeInitialisation()</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>t.initializeCurrentState(s)</span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>t.initializeWorkSpace(wk)</span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a><span class="co"># time discretization</span></span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>times <span class="op">=</span> [<span class="dv">0</span>]<span class="op">+</span>[<span class="fl">1.e-6</span><span class="op">+</span>((<span class="fl">3600.</span><span class="op">-</span><span class="fl">1.e-6</span>)<span class="op">/</span><span class="fl">20.</span>)<span class="op">*</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">21</span>)]<span class="op">;</span></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a><span class="co"># get the state of the pipe (unique structure defined)</span></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>scs <span class="op">=</span> s.getStructureCurrentState(<span class="st">&quot;&quot;</span>)</span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>p   <span class="op">=</span> <span class="bu">max</span>([cs.getInternalStateVariableValue(<span class="st">&quot;EquivalentViscoplasticStrain&quot;</span>)</span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>           <span class="cf">for</span> cs <span class="kw">in</span> scs.istates])</span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">str</span>(times[<span class="dv">0</span>])<span class="op">+</span><span class="st">&quot; &quot;</span><span class="op">+</span><span class="bu">str</span>(p))</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a><span class="co"># loop over the time steps</span></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(times)<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># search the mechanical equilibrium at the end of the time step</span></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>    t.execute(s,wk,times[i],times[i<span class="op">+</span><span class="dv">1</span>])</span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># write in the output file</span></span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>    t.printOutput(times[i<span class="op">+</span><span class="dv">1</span>],s)</span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># iterate of over the integration points</span></span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="bu">max</span>([cs.getInternalStateVariableValue(<span class="st">&quot;EquivalentViscoplasticStrain&quot;</span>)</span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a>             <span class="cf">for</span> cs <span class="kw">in</span> scs.istates])</span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="bu">str</span>(times[i<span class="op">+</span><span class="dv">1</span>])<span class="op">+</span><span class="st">&quot; &quot;</span><span class="op">+</span><span class="bu">str</span>(p))</span></code></pre></div>
<h1 id="references">References</h1>
<!-- Local IspellDict: english -->
<div id="refs" class="references csl-bib-body" role="list">
<div id="ref-helfer_extension_2015" class="csl-entry" role="listitem">
<div class="csl-left-margin">1. </div><div
class="csl-right-inline"><span class="smallcaps">Helfer</span>, Thomas.
Extension of monodimensional fuel performance codes to finite strain
analysis using a <span>Lagrangian</span> logarithmic strain framework.
<em>Nuclear Engineering and Design</em>. July 2015. Vol. 288, p. 75–81.
DOI <a
href="https://doi.org/10.1016/j.nucengdes.2015.02.010">10.1016/j.nucengdes.2015.02.010</a>.
Available from: <a
href="http://www.sciencedirect.com/science/article/pii/S0029549315000928">http://www.sciencedirect.com/science/article/pii/S0029549315000928</a></div>
</div>
</div>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-62273823-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
