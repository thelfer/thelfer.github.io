<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-EN" xml:lang="en-EN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Support of madnex files in MFront</title>
        <meta name="author" content="Thomas Helfer" />
            <meta name="date" content="2020-01-01" />
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <style type="text/css">code{white-space: pre;}</style>
            <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #204a87; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #8f5902; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #204a87; font-weight: bold; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
            <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/main.css"/>
        <script
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
        type="text/javascript"></script>
          </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
        <header>
      <ul id="nav">
	<li><a href="news.html">News</a></li>
	<li><a href="index.html">Overview</a>
	  <ul>
	    <li><a>Domain specific languages</a>
	      <ul>
		<li><a href="material-properties.html">Material properties</a></li>
		<li><a href="behaviours.html">Mechanical behaviours</a></li>
		<li><a href="models.html">Models</a></li>
	      </ul>
            </li>
	    <li><a href="interfaces.html">Available interfaces</a></li>
	    <li><a href="associated-projects.html">Associated projects</a></li>
     	    <li><a>Tools</a>
	      <ul>
	        <li><a href="mfront-doc.html">mfront-doc</a></li>
	        <li><a href="mtest.html">mtest</a></li>
	        <li><a href="mfm.html">mfm</a></li>
	        <li><a href="mfm-test-generator.html">mfm-test-generator</a></li>
	        <li><a href="tfel-check.html">tfel-check</a></li>
	      </ul>
	    </li>
	  </ul>
	</li>
	<li><a>Getting started</a>
	  <ul>
	    <li><a href="https://github.com/thelfer/tfel/">Github repository</a></li>
	    <li><a href="https://github.com/thelfer/tfel/releases">Download</a></li>
	    <li><a href="release-notes.html">Release notes</a>
	      <ul>
		<li><a>Versions 2.0.x</a>
                  <ul>
                    <li><a href="release-notes.html">Versions prior to 2.0.5</a></li>
	 	    <li><a href="release-notes-2.0.5.html">Version 2.0.5</a></li>
                  </ul>
		</li>
		<li><a>Versions 3.0.x</a>
                  <ul>
		    <li><a href="release-notes-3.0.html">Version 3.0.0</a></li>
		    <li><a href="release-notes-3.0.1.html">Version 3.0.1</a></li>
		    <li><a href="release-notes-3.0.2.html">Version 3.0.2</a></li>
		    <li><a href="release-notes-3.0.3.html">Version 3.0.3</a></li>
		    <li><a href="release-notes-3.0.4.html">Version 3.0.4</a></li>
		    <li><a href="release-notes-3.0.5.html">Version 3.0.5</a></li>
		    <li><a href="release-notes-3.0.6.html">Version 3.0.6</a></li>
		    <li><a href="release-notes-3.0.7.html">Version 3.0.7</a></li>
		    <li><a href="release-notes-3.0.8.html">Version 3.0.8</a></li>
		    <li><a href="release-notes-3.0.9.html">Version 3.0.9</a></li>
		    <li><a href="release-notes-3.0.10.html">Version 3.0.10</a></li>
		    <li><a href="release-notes-3.0.11.html">Version 3.0.11</a></li>
		    <li><a href="release-notes-3.0.12.html">Version 3.0.12</a></li>
		    <li><a href="release-notes-3.0.13.html">Version 3.0.13</a></li>
		    <li><a href="release-notes-3.0.14.html">Version 3.0.14</a></li>
		    <li><a href="release-notes-3.0.15.html">Version 3.0.15</a></li>
		    <li><a href="release-notes-3.0.16.html">Version 3.0.16</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.1.x</a>
		  <ul>
		    <li><a href="release-notes-3.1.html">Version 3.1.0</a></li>
		    <li><a href="release-notes-3.1.1.html">Version 3.1.1</a></li>
		    <li><a href="release-notes-3.1.2.html">Version 3.1.2</a></li>
		    <li><a href="release-notes-3.1.3.html">Version 3.1.3</a></li>
		    <li><a href="release-notes-3.1.4.html">Version 3.1.4</a></li>
		    <li><a href="release-notes-3.1.5.html">Version 3.1.5</a></li>
		    <li><a href="release-notes-3.1.6.html">Version 3.1.6</a></li>
		    <li><a href="release-notes-3.1.7.html">Version 3.1.7</a></li>
		    <li><a href="release-notes-3.1.8.html">Version 3.1.8</a></li>
		    <li><a href="release-notes-3.1.9.html">Version 3.1.9</a></li>
		    <li><a href="release-notes-3.1.10.html">Version 3.1.10</a></li>
		    <li><a href="release-notes-3.1.11.html">Version 3.1.11</a></li>
		    <li><a href="release-notes-3.1.12.html">Version 3.1.12</a></li>
		    <li><a href="release-notes-3.1.13.html">Version 3.1.13</a></li>
		    <li><a href="release-notes-3.1.14.html">Version 3.1.14</a></li>
		    <li><a href="release-notes-3.1.15.html">Version 3.1.15</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.2.x</a>
		  <ul>
		    <li><a href="release-notes-3.2.html">Version 3.2.0</a></li>
		    <li><a href="release-notes-3.2.1.html">Version 3.2.1</a></li>
		    <li><a href="release-notes-3.2.2.html">Version 3.2.2</a></li>
		    <li><a href="release-notes-3.2.3.html">Version 3.2.3</a></li>
		    <li><a href="release-notes-3.2.4.html">Version 3.2.4</a></li>
		    <li><a href="release-notes-3.2.5.html">Version 3.2.5</a></li>
		    <li><a href="release-notes-3.2.6.html">Version 3.2.6</a></li>
		    <li><a href="release-notes-3.2.7.html">Version 3.2.7</a></li>
		    <li><a href="release-notes-3.2.8.html">Version 3.2.8</a></li>
		    <li><a href="release-notes-3.2.9.html">Version 3.2.9</a></li>
		    <li><a href="release-notes-3.2.10.html">Version 3.2.10</a></li>
		    <li><a href="release-notes-3.2.11.html">Version 3.2.11</a></li>
		    <li><a href="release-notes-3.2.12.html">Version 3.2.12</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.3.x</a>
		  <ul>
		    <li><a href="release-notes-3.3.html">Version 3.3.0</a></li>
		    <li><a href="release-notes-3.3.1.html">Version 3.3.1</a></li>
		    <li><a href="release-notes-3.3.1.html">Version 3.3.2</a></li>
		    <li><a href="release-notes-3.3.2.html">Version 3.3.2</a></li>
		    <li><a href="release-notes-3.3.3.html">Version 3.3.3</a></li>
		    <li><a href="release-notes-3.3.4.html">Version 3.3.4</a></li>
		    <li><a href="release-notes-3.3.5.html">Version 3.3.5</a></li>
		    <li><a href="release-notes-3.3.6.html">Version 3.3.6</a></li>
		    <li><a href="release-notes-3.3.7.html">Version 3.3.7</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.4.x</a>
		  <ul>
		    <li><a href="release-notes-3.4.html">Version 3.4.0</a></li>
		    <li><a href="release-notes-3.4.1.html">Version 3.4.1</a></li>
		    <li><a href="release-notes-3.4.2.html">Version 3.4.2</a></li>
		    <li><a href="release-notes-3.4.3.html">Version 3.4.3</a></li>
		    <li><a href="release-notes-3.4.4.html">Version 3.4.4</a></li>
		    <li><a href="release-notes-3.4.5.html">Version 3.4.5</a></li>
		    <li><a href="release-notes-3.4.6.html">Version 3.4.6</a></li>
		    <li><a href="release-notes-3.4.7.html">Version 3.4.7</a></li>
		    <li><a href="release-notes-3.4.8.html">Version 3.4.8</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.0.x</a>
		  <ul>
		    <li><a href="release-notes-4.0.html">Version 4.0.0</a></li>
		    <li><a href="release-notes-4.0.1.html">Version 4.0.1</a></li>
		    <li><a href="release-notes-4.0.2.html">Version 4.0.2</a></li>
		    <li><a href="release-notes-4.0.3.html">Version 4.0.3</a></li>
		    <li><a href="release-notes-4.0.4.html">Version 4.0.4</a></li>
		    <li><a href="release-notes-4.0.5.html">Version 4.0.5</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.1.x</a>
		  <ul>
		    <li><a href="release-notes-4.1.html">Version 4.1.0</a></li>
		    <li><a href="release-notes-4.1.1.html">Version 4.1.1</a></li>
		    <li><a href="release-notes-4.1.2.html">Version 4.1.2</a></li>
		    <li><a href="release-notes-4.1.3.html">Version 4.1.3</a></li>
		    <li><a href="release-notes-4.1.4.html">Version 4.1.4</a></li>
		    <li><a href="release-notes-4.1.5.html">Version 4.1.5</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.2.x</a>
		  <ul>
		    <li><a href="release-notes-4.2.html">Version 4.2.0</a></li>
		    <li><a href="release-notes-4.2.1.html">Version 4.2.1</a></li>
		    <li><a href="release-notes-4.2.2.html">Version 4.2.2</a></li>
		    <li><a href="release-notes-4.2.3.html">Version 4.2.3</a></li>
		  </ul>
		</li>
		<li><a>Versions 5.0.x</a>
		  <ul>
		    <li><a href="release-notes-5.0.html">Version 5.0.0</a></li>
		    <li><a href="release-notes-5.0.1.html">Version 5.0.1</a></li>
		    <li><a href="release-notes-5.0.2.html">Version 5.0.2</a></li>
		  </ul>
		</li>
		<li><a>Versions 5.1.x</a>
		  <ul>
		    <li><a href="release-notes-5.1.html">Version 5.1.0</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a href="coverity-scan.html">Coverity scan</a></li>
	    <li><a href="install.html">Installation</a></li>
	  </ul>
	</li>
	<li><a>Documentation</a>
	  <ul>
	    <li><a href="documentations.html">General documentation</a></li>
	    <li><a href="gallery.html">Gallery</a></li>
<!--	    
	    <li><a href="http://tfel.sourceforge.net/doxygen/index.html">Doxygen documentation</a></li>
-->
	    <li><a>Behaviours</a>
	      <ul>
		<li><a href="tutorial.html">Tutorial</a></li>
		<li><a href="implicit-dsl.html">The Implicit DSL</a></li>
		<li><a href="benchmark.html">Benchmark</a></li>
		<li><a href="parameters.html">Parameters</a></li>
		<li><a href="BehaviourBricks.html">Behaviour bricks</a></li>
		<li><a href="interfaces.html">Solver interfaces</a>
		  <ul>
		    <li><a href="castem.html">Cast3M</a></li>
		    <li><a href="amitex.html">AMITEX_FFTP</a></li>
		    <li><a href="aster.html">Code-Aster</a></li>
    		    <li><a href="abaqus.html">Abaqus</a></li>
		    <li><a href="zmat.html">ZeBuLoN</a></li>
   		    <li><a href="calculix.html">CalculiX</a></li>
		    <!-- <li><a >TMFFT</a></li> -->
		    <li><a href="cyrano.html">Cyrano</a></li>
   		    <li><a href="generic-material-property-interface.html">Generic interface for material properties</a></li>
   		    <li><a href="generic-behaviours-interface.html">Generic interface for behaviours</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a>TFEL libraries</a>
	      <ul>
		<li><a href="libraries_usage.html">Usage of the TFEL libraries in C++</a></li>
		<li><a href="tfel-math.html">TFEL/Math</a></li>
		<li><a href="tfel-material.html">TFEL/Material</a></li>
	      </ul>
	    </li>
	    <li><a>Python modules</a>
	      <ul>
		<li><a href="tfel-python.html">TFEL modules</a></li>
		<li><a href="mfront-python.html">mfront module</a></li>
		<li><a href="mtest-python.html">mtest module</a></li>
	      </ul>
	    </li>
	    <li><a>MFront keywords</a>
	      <ul>
	        <li><a href="Default-keywords.html">Default</a></li>
	        <li><a href="DefaultCZM-keywords.html">DefaultCZM</a></li>
	        <li><a href="DefaultFiniteStrain-keywords.html">DefaultFiniteStrain</a></li>
	        <li><a href="DefaultGenericBehaviour-keywords.html">DefaultGenericBehaviour</a></li>
	        <li><a href="DefaultModel-keywords.html">DefaultModel</a></li>
	        <li><a href="Implicit-keywords.html">Implicit</a></li>
	        <li><a href="ImplicitCZM-keywords.html">ImplicitCZM</a></li>
	        <li><a href="ImplicitFiniteStrain-keywords.html">ImplicitFiniteStrain</a></li>
	        <li><a href="ImplicitGenericBehaviour-keywords.html">ImplicitGenericBehaviour</a></li>
	        <li><a href="ImplicitModel-keywords.html">ImplicitModel</a></li>
	        <li><a href="ImplicitII-keywords.html">ImplicitII</a></li>
	        <li><a href="IsotropicMisesCreep-keywords.html">IsotropicMisesCreep</a></li>
	        <li><a href="IsotropicMisesPlasticFlow-keywords.html">IsotropicMisesPlasticFlow</a></li>
	        <li><a href="IsotropicPlasticMisesFlow-keywords.html">IsotropicPlasticMisesFlow</a></li>
	        <li><a href="IsotropicStrainHardeningMisesCreep-keywords.html">IsotropicStrainHardeningMisesCreep</a></li>
	        <li><a href="MaterialLaw-keywords.html">MaterialLaw</a></li>
	        <li><a href="MaterialProperty-keywords.html">MaterialProperty</a></li>
	        <li><a href="Model-keywords.html">Model</a></li>
	        <li><a href="MultipleIsotropicMisesFlows-keywords.html">MultipleIsotropicMisesFlows</a></li>
	        <li><a href="RungeKutta-keywords.html">RungeKutta</a></li>
	        <li><a href="RungeKuttaFiniteStrain-keywords.html">RungeKuttaFiniteStrain</a></li>
	        <li><a href="RungeKuttaGenericBehaviour-keywords.html">RungeKuttaGenericBehaviour</a></li>
	        <li><a href="RungeKuttaModel-keywords.html">RungeKuttaModel</a></li>
	      </ul>
	    </li>
	    <li><a href="MTest-keywords.html">MTest keywords</a></li>
	    <li><a href="physical-constants.html">Physical constants</a></li>
	    <li><a href="glossary.html">Glossary</a></li>
	    <li><a href="publications.html">Publications</a></li>
	    <li><a href="faq.html">FAQ</a></li>
	    <li><a href="about.html">About</a></li>
	  </ul>
	</li>
	<li><a>Contributing</a>
	  <ul>
	    <li><a href="https://github.com/thelfer/tfel">Access to sources</a></li>
	    <li><a href="contributing.html">Contributing guidelines</a></li>
	    <li><a href="https://github.com/thelfer/tfel/issues">Report bugs</a></li>
	  </ul>
	</li>
	<li><a>Getting Help</a>
	  <ul>
	    <li><a href="search.html">Search on this site</a></li>
	    <li><a href="https://github.com/thelfer/tfel/discussions">Forum</a></li>
	    <li><a href="https://github.com/thelfer/tfel/issues">Bug report</a></li>
	    <li><a href="https://github.com/thelfer/tfel/issues">Feature request</a></li>
	    <li><a href="mailto:tfel-contact@cea.fr">Contact</a></li>
	  </ul>
	</li>
      </ul>
    </header>
<div id="header">
<h1 class="title">Support of <code>madnex</code> files in
<code>MFront</code></h1>
<h2 class="author">Thomas Helfer</h2>
<h3 class="date">2020</h3>
</div>
<div id="TOC">
<ul>
<li><a href="#compilation-of-tfel-with-madnex-files-support"
id="toc-compilation-of-tfel-with-madnex-files-support">Compilation of
<code>TFEL</code> with <code>madnex</code> files support</a></li>
<li><a href="#mfront-usage" id="toc-mfront-usage"><code>mfront</code>
usage</a>
<ul>
<li><a href="#sec:tfel-3.4.4:mfront:mandex_full_path"
id="toc-sec:tfel-3.4.4:mfront:mandex_full_path">Alternative way to
select a single material knowledge (material property, behaviour, model)
in a <code>madnex</code> file</a></li>
<li><a href="#add-a-madnex-file-to-the-search-paths"
id="toc-add-a-madnex-file-to-the-search-paths">Add a <code>madnex</code>
file to the search paths</a></li>
<li><a
href="#automatic-declaration-of-a-madnex-input-file-as-a-madnex-search-path"
id="toc-automatic-declaration-of-a-madnex-input-file-as-a-madnex-search-path">Automatic
declaration of a <code>madnex</code> input file as a <code>madnex</code>
search path</a></li>
</ul></li>
<li><a href="#mfront-python-module"
id="toc-mfront-python-module"><code>mfront</code> python module</a></li>
<li><a href="#mtest-usage" id="toc-mtest-usage"><code>mtest</code>
usage</a>
<ul>
<li><a href="#executing-a-test-stored-in-a-madnex-file"
id="toc-executing-a-test-stored-in-a-madnex-file">Executing a test
stored in a <code>madnex</code> file</a></li>
<li><a
href="#execution-all-tests-associated-with-a-behaviour-stored-in-a-madnex-file"
id="toc-execution-all-tests-associated-with-a-behaviour-stored-in-a-madnex-file">Execution
all tests associated with a behaviour stored in a <code>madnex</code>
file</a></li>
<li><a href="#alternative-way-to-select-a-single-test-in-a-madnex-file"
id="toc-alternative-way-to-select-a-single-test-in-a-madnex-file">Alternative
way to select a single test in a <code>madnex</code> file</a></li>
</ul></li>
<li><a href="#mfront-query-usage"
id="toc-mfront-query-usage"><code>mfront-query</code> usage</a>
<ul>
<li><a href="#options-specific-to-madnex-files"
id="toc-options-specific-to-madnex-files">Options specific to
<code>madnex</code> files</a></li>
<li><a
href="#querying-information-about-implementation-options-specific-to-madnex-files"
id="toc-querying-information-about-implementation-options-specific-to-madnex-files">Querying
information about implementation, options specific to
<code>madnex</code> files</a></li>
</ul></li>
<li><a href="#storing-an-mfront-file-in-a-madnex-file"
id="toc-storing-an-mfront-file-in-a-madnex-file">Storing an
<code>MFront</code> file in a <code>madnex</code> file</a></li>
<li><a href="#storing-an-mtest-file-in-a-madnex-file"
id="toc-storing-an-mtest-file-in-a-madnex-file">Storing an
<code>MTest</code> file in a <code>madnex</code> file</a>
<ul>
<li><a href="#c-application-programming-interface-api"
id="toc-c-application-programming-interface-api"><code>C++</code>
Application Programming Interface (API)</a></li>
<li><a href="#python-application-programming-interface-api"
id="toc-python-application-programming-interface-api"><code>Python</code>
Application Programming Interface (API)</a></li>
<li><a href="#best-practices" id="toc-best-practices">Best
practices</a></li>
</ul></li>
<li><a href="#storing-an-mfm-test-generator-file-in-a-madnex-file"
id="toc-storing-an-mfm-test-generator-file-in-a-madnex-file">Storing an
<code>mfm-test-generator</code> file in a <code>madnex</code> file</a>
<ul>
<li><a href="#c-application-programming-interface-api-1"
id="toc-c-application-programming-interface-api-1"><code>C++</code>
Application Programming Interface (API)</a></li>
<li><a href="#python-application-programming-interface-api-1"
id="toc-python-application-programming-interface-api-1"><code>Python</code>
Application Programming Interface (API)</a></li>
<li><a href="#best-practices-1" id="toc-best-practices-1">Best
practices</a></li>
</ul></li>
<li><a href="#references" id="toc-references">References</a></li>
</ul>
</div>
<p>The <code>madnex</code> file format has been developed by
<code>EDF</code> to store their experimental data. It extends the
<code>HDF5</code> file format by providing a suitable data model.
Internally, <code>EDF</code> uses a closed-source <code>python</code>
library to insert, query and extract data from <code>madnex</code>
file.</p>
<p>The <code>madnex</code> library is an open-source <code>C++</code>
library which currently focus on the storage of <code>MFront</code>
implementations. This library can be downloaded here:</p>
<p><a href="https://github.com/thelfer/madnex"
class="uri">https://github.com/thelfer/madnex</a></p>
<p>The website of this library <span class="citation"
data-cites="cea_edf_madnex_library_2020">[<a
href="#ref-cea_edf_madnex_library_2020"
role="doc-biblioref">1</a>]</span> details the data model used to store
<code>MFront</code> implementations.</p>
<h1 id="compilation-of-tfel-with-madnex-files-support">Compilation of
<code>TFEL</code> with <code>madnex</code> files support</h1>
<p>By default, support of <code>madnex</code> files is disabled.</p>
<p>Support for <code>madnex</code> files as inputs of
<code>MFront</code> must be explicitly enabled during the compilation of
the <code>TFEL</code> project. More precisely, when invoking the <a
href="https://cmake.org/"><code>cmake</code></a> build system, the
following variables must be set:</p>
<ol type="1">
<li><code>enable-madnex</code> must be set to <code>ON</code>.</li>
<li><code>Madnex_DIR</code> must be set to the path where the
<code>MadnexConfig.cmake</code> file has been installed. This path is
usually given by <code>$MADNEXHOME/share/madnex/cmake/</code> where
<code>MADNEXHOME</code> is the installation directory of the
<code>madnex</code> library.</li>
</ol>
<p>Hence, a typical call <code>cmake</code> to cmake would be similar
as:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cmake <span class="at">-Denable-madnex</span><span class="op">=</span>ON <span class="at">-DMadnex_DIR</span><span class="op">=</span><span class="va">$MADNEXHOME</span>/share/madnex/cmake ...</span></code></pre></div>
<p>This call assumes that that the <code>MADNEXHOME</code> environment
variable has been set.</p>
<p>More information about the options that can be passed to
<code>cmake</code> are given in the <code>INSTALL-cmake</code> file
which is located at the root of the <code>TFEL</code> sources.</p>
<h1 id="mfront-usage"><code>mfront</code> usage</h1>
<p>The only thing specific to <code>madnex</code> files is the selection
of the implementation to be treated.</p>
<p>For a behaviour, this selection is done through the
<code>--material</code> and <code>--behaviour</code> options. For
example:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront <span class="at">--obuild</span> <span class="at">--interface</span><span class="op">=</span>generic <span class="at">--material</span><span class="op">=&lt;</span>material_id<span class="op">&gt;</span> --behaviour=<span class="op">&lt;</span>behaviour_id<span class="op">&gt;</span> file.mdnx</span></code></pre></div>
<p>Here, <code>behaviour_id</code> can be a regular expression.</p>
<p>For material properties and models, the
<code>--material-property</code> and <code>--model</code> options have a
similar role than the <code>--behaviour</code> option for
behaviours.</p>
<p>The <code>--all-material-properties</code>,
<code>--all-behaviours</code>, and <code>--all-models</code> options
allows to select all the material properties, behaviours and models
respectively, as follows:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront <span class="at">--obuild</span> <span class="at">--interface</span><span class="op">=</span>generic <span class="at">--material</span><span class="op">=&lt;</span>material_id<span class="op">&gt;</span> --all-behaviours file.mdnx</span></code></pre></div>
<p>The material name <code>&lt;none&gt;</code> has a special meaning
here: it allows the selection of implementations that not associated
with a material.</p>
<h2 id="sec:tfel-3.4.4:mfront:mandex_full_path">Alternative way to
select a single material knowledge (material property, behaviour, model)
in a <code>madnex</code> file</h2>
<p><code>mfront</code>, <code>mfront-query</code> and
<code>mfront-doc</code> allow to select a specific material knowledge
inside a <code>madnex</code> file using the following syntax:</p>
<pre><code>madnex:&lt;file&gt;:&lt;type&gt;:&lt;material&gt;:&lt;name&gt;</code></pre>
<p>where:</p>
<ul>
<li><code>&lt;file&gt;</code> is the path to the <code>madnex</code>
file.</li>
<li><code>&lt;type&gt;</code> is the type of the material knowledge
(<code>material_property</code>, <code>behaviour</code> or
<code>model</code>).</li>
<li><code>&lt;material&gt;</code> is the name of the material
considered. This name can be empty or <code>&lt;none&gt;</code> if the
considered material knowledge is not associated to a material.</li>
<li><code>&lt;name&gt;</code> is the name of theconsidered material
knowledge.</li>
</ul>
<h3 id="example-of-usage">Example of usage</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront <span class="at">--obuild</span> <span class="at">--interface</span><span class="op">=</span>generic madnex:Plasticity.mdnx:behaviour::Plasticity</span></code></pre></div>
<p>or, equivalently:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront <span class="at">--obuild</span> <span class="at">--interface</span><span class="op">=</span>generic madnex:Plasticity.mdnx:behaviour:<span class="st">&quot;&lt;none&gt;&quot;</span>:Plasticity</span></code></pre></div>
<h2 id="add-a-madnex-file-to-the-search-paths">Add a <code>madnex</code>
file to the search paths</h2>
<p><code>MFront</code> files may depend on other <code>MFront</code>
files. A <code>madnex</code> file can be used resolve those dependencies
using the <code>--madnex-search-path</code> command line argument.</p>
<h3 id="a-first-example">A first example</h3>
<p>Let us consider a <code>madnex</code> file containing the
<code>YoungModulusTest</code> material property associated with no
material and a file <code>Test.mfront</code> requiring to have access to
this material property. For example, the <code>Test.mfront</code> may
contain an instruction such as:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>MaterialLaw <span class="st">&quot;YoungModulusTest&quot;</span><span class="op">;</span></span></code></pre></div>
<p>The <code>Test.mfront</code> file can be compiled as follows:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront <span class="op">--</span>obuild <span class="op">--</span>interface<span class="op">=</span>generic                 <span class="er">`</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>         <span class="op">--</span>madnex<span class="op">-</span>search<span class="op">-</span>path<span class="op">=</span>MaterialProperties<span class="op">.</span>mdnx <span class="er">`</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>         Test<span class="op">.</span>mfront</span></code></pre></div>
<h3 id="madnex-search-paths"><code>madnex</code> search paths</h3>
<p>Options to the <code>--madnex-search-path</code> can be decomposed
as</p>
<p><code>&lt;file_path&gt;:&lt;material_knowledge_type&gt;:&lt;material_identifier&gt;</code></p>
<p>where <code>&lt;material_knowledge_type&gt;</code> and
<code>&lt;material_identifier&gt;</code> are optionals, as in the
previous example.</p>
<h4 id="selecting-a-specific-type-of-material-kowledge">Selecting a
specific type of material kowledge</h4>
<p><code>material_knowledge_type</code> may have one of the following
values <code>material_property</code>, <code>behaviours</code> and
<code>models</code>.</p>
<p>If <code>material_knowledge_type</code> is not specified, materials
properties, behaviours and models are all considered (in that
order).</p>
<h4 id="about-the-material-identifier">About the material
identifier</h4>
<p>The <code>&lt;material_identifier&gt;</code> is interpreted as a
regular expression.</p>
<p>The regular expression that selects material knowledge associated
with all materials is <code>.+</code>, but this will exclude material
knowledge associated with no material.</p>
<p>The regular expression <code>.*</code> will select material knowledge
associated to all material <em>and</em> material knowledge associated
with no material. This is what happen if not
<code>material_identifier</code> is specified.</p>
<p>The special material identifier <code>&lt;none&gt;</code> selects
only material knowledge associated with no material.</p>
<h4 id="examples-of-madnex-search-paths">Examples of madnex search
paths</h4>
<ul>
<li><code>MaterialProperties.mdnx</code>: appends all the materials
properties, behaviours, models associated to any materials or to no
material to the search path.</li>
<li><code>MaterialProperties.mdnx:material_property</code>: appends all
the materials properties, associated to any materials or to no material
to the search path.</li>
<li><code>MaterialProperties.mdnx:material_property:Zircaloy4</code>:
appends all the materials properties, associated to
<code>Zircaloy4</code> to the search path.</li>
</ul>
<h3 id="how-madnex-files-are-searched">How <code>madnex</code> files are
searched</h3>
<p>The <code>madnex</code> files specified in <code>madnex</code> search
paths are first search in the current directory, and then in the
directories specified by the <code>--search-path</code> command line
arguments.</p>
<h2
id="automatic-declaration-of-a-madnex-input-file-as-a-madnex-search-path">Automatic
declaration of a <code>madnex</code> input file as a <code>madnex</code>
search path</h2>
<p>When <code>MFront</code> uses a <code>madnex</code> input file, this
file is automatically added to the <code>madnex</code> search path.</p>
<h3 id="example-of-usage-1">Example of usage</h3>
<p>Let us consider a file a <code>madnex</code> file containing a
behaviour <code>Test</code> and a material property
<code>YoungModulusTest</code> which is used by the <code>Test</code>
behaviour, then the following instructions work as expected:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront <span class="at">--obuild</span> <span class="at">--interface</span><span class="op">=</span>aster <span class="at">--behaviour</span><span class="op">=</span>Test Example.mdnx </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Treating</span> target : all</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> following libraries have been built :</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> libAsterBehaviour.so :  astertest</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--list-dependencies</span> <span class="at">--behaviour</span><span class="op">=</span>Test Example.mdnx </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="ex">madnex:Example.mdnx:MaterialProperty::YoungModulusTest</span> </span></code></pre></div>
<h1 id="mfront-python-module"><code>mfront</code> python module</h1>
<p>The <code>mfront</code> python module is fully described here:</p>
<p><a href="https://thelfer.github.io/tfel/web/mfront-python.html"
class="uri">https://thelfer.github.io/tfel/web/mfront-python.html</a></p>
<p>The main function related to <code>madnex</code> file support is the
<code>getImplementationsPaths</code> which takes five arguments:</p>
<ul>
<li>the name of the file. The name of this argument is
<code>file</code>;</li>
<li>the name of a material. If the material name is empty, the
implementations associated with all the materials are are considered and
also the implementations associated with no material. To select only
implementations associated with no material, one shall use the special
material name <code>&lt;none&gt;</code>. The name of this argument is
<code>material</code>.</li>
<li>a regular expression describing the searched material properties.
This argument can be empty. The name of this argument is
<code>material_property</code>.</li>
<li>a regular expression describing the searched behaviours. This
argument can be empty. The name of this argument is
<code>behaviour</code>.</li>
<li>a regular expression describing the searched models. This argument
can be empty. The name of this argument is <code>model</code>.</li>
</ul>
<p>This function returns a list of strings where the path of the
implementation is encoded.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mfront</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>paths <span class="op">=</span> mfront.getImplementationsPaths(<span class="st">&quot;file.mdnx&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                                       material<span class="op">=&lt;</span>material_id<span class="op">&gt;</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                                       behaviour<span class="op">=</span>behaviour_id<span class="op">&gt;</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>(paths) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">raise</span>(<span class="st">&quot;no matching implementation&quot;</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>dsl <span class="op">=</span> mfront.getDSL(paths[<span class="dv">0</span>])</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>dsl.analyseFile(paths[<span class="dv">0</span>])</span></code></pre></div>
<h1 id="mtest-usage"><code>mtest</code> usage</h1>
<h2 id="executing-a-test-stored-in-a-madnex-file">Executing a test
stored in a <code>madnex</code> file</h2>
<p>To execute a test stored in a <code>madnex</code> file, the user must
specify:</p>
<ul>
<li>the name of the <code>madnex</code> file</li>
<li>the name of the test using the <code>--test</code> (or
<code>-t</code>) command line argument.</li>
<li>the name of the behaviour to which the test is associated using the
<code>--behaviour</code> (or <code>-b</code>) command line
argument.</li>
<li>the name of the material is the behaviour to which the test is
associated is associated with a material using the
<code>--material</code> (or <code>-m</code>) command line argument. If
the material is not specified, or if the special material name
<code>&lt;none&gt;</code> is used, the behaviour associated with the
test is assumed not associated with any material.</li>
</ul>
<p>Note that the <code>--test</code> (or <code>-t</code>) command line
argument can accept regular expressions to select as set of tests.</p>
<h3 id="example-of-usage-2">Example of usage</h3>
<p>The following example executes the <code>UniaxialTensileTest</code>
test associated with the <code>Plasticity</code> behaviour (and not
attached to any material) using the behaviour
<code>cyranoplasticity</code> compiled with the <code>cyrano</code>
interface in a shared library <code>libCyranoBehaviours.so</code>
located in the <code>src</code> subdirectory and stored in the
<code>Plasticity.mdnx</code> file:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mtest  <span class="at">--behaviour</span><span class="op">=</span>Plasticity <span class="at">--test</span><span class="op">=</span>UniaxialTensileTest        <span class="dt">\</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">--@interface@</span><span class="op">=</span>cyrano <span class="at">--@behaviour@</span><span class="op">=</span><span class="st">&quot;&#39;cyranoplasticity&#39;&quot;</span>  <span class="dt">\</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">--@library@</span><span class="op">=</span><span class="st">&quot;&#39;src/libCyranoBehaviours.so&#39;&quot;</span>               <span class="dt">\</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>         Plasticity.mdnx</span></code></pre></div>
<h2
id="execution-all-tests-associated-with-a-behaviour-stored-in-a-madnex-file">Execution
all tests associated with a behaviour stored in a <code>madnex</code>
file</h2>
<p>The user can execute all tests associated with a behaviour using the
<code>--all-tests</code> command line arguments. The user must specify
the name of the behaviour (using the <code>--behaviour</code> (or
<code>-b</code>) command line argument) and optionally the name of the
material (using the <code>--material</code> (or <code>-m</code>) command
line argument).</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mtest  <span class="at">--behaviour</span><span class="op">=</span>Plasticity <span class="at">--@interface@</span><span class="op">=</span>cyrano <span class="dt">\</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">--@behaviour@</span><span class="op">=</span><span class="st">&quot;&#39;cyranoplasticity&#39;&quot;</span>          <span class="dt">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">--@library@</span><span class="op">=</span><span class="st">&quot;&#39;src/libCyranoBehaviours.so&#39;&quot;</span>  <span class="dt">\ </span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>         <span class="ex">--all-tests</span> Plasticity.mdnx                 <span class="dt">\</span></span></code></pre></div>
<p>The <code>--all-tests</code> command line argument is equivalent to
<code>--test=".+"</code>.</p>
<h2
id="alternative-way-to-select-a-single-test-in-a-madnex-file">Alternative
way to select a single test in a <code>madnex</code> file</h2>
<p><code>mtest</code> allows to select a test inside a
<code>madnex</code> file using the following path syntax:</p>
<pre><code>madnex:&lt;file&gt;:&lt;material&gt;:&lt;behaviour&gt;:&lt;test&gt;</code></pre>
<p>where:</p>
<ul>
<li><code>&lt;file&gt;</code> is the path to the <code>madnex</code>
file.</li>
<li><code>&lt;material&gt;</code> is the name of the material
considered. This name can be empty or <code>&lt;none&gt;</code> if the
considered test is not associated to a material.</li>
<li><code>&lt;behaviour&gt;</code> is the name of the behaviour</li>
<li><code>&lt;test&gt;</code> is the name of the test</li>
</ul>
<h1 id="mfront-query-usage"><code>mfront-query</code> usage</h1>
<h2 id="options-specific-to-madnex-files">Options specific to
<code>madnex</code> files</h2>
<p>Several options has been added to the <code>mfront-query</code>
specifically for <code>madnex</code> files.</p>
<p>Queries of the file itself (list of materials, behaviours, etc…) are
also provided by the <code>madnex-query</code> tool.</p>
<h3 id="listing-all-material-a-madnex-file">Listing all material a
<code>madnex</code> file</h3>
<p>The <code>--list-materials</code> returns the list of all materials
in a <code>MFront</code> file:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--list-materials</span> file.mdnx</span></code></pre></div>
<h3
id="listing-of-all-material-properties-all-behaviours-or-all-models">Listing
of all material properties, all behaviours or all models</h3>
<p>The following options are available:</p>
<ul>
<li><code>--list-material-properties</code>: list of material
properties.</li>
<li><code>--list-behaviours</code>: list of all behaviours.</li>
<li><code>--list-models</code>: list of all models.</li>
</ul>
<p>A typical call is as follows:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--list-behaviours</span> file.mdnx</span></code></pre></div>
<p>The previous options are affected by the the definition of a
material, as follows:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--material</span><span class="op">=&lt;</span>material_id<span class="op">&gt;</span> --list-behaviours file.mdnx</span></code></pre></div>
<h2
id="querying-information-about-implementation-options-specific-to-madnex-files">Querying
information about implementation, options specific to
<code>madnex</code> files</h2>
<p>For a behaviour, the selection of an implementation on which the
queries are made is done through the <code>--material</code> and
<code>--behaviour</code> options. For example:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--obuild</span> <span class="at">--interface</span><span class="op">=</span>generic <span class="at">--material</span><span class="op">=&lt;</span>material_id<span class="op">&gt;</span> --behaviour=<span class="op">&lt;</span>behaviour_id<span class="op">&gt;</span> file.mdnx <span class="at">--state-variables</span></span></code></pre></div>
<p>Here, <code>behaviour_id</code> can be a regular expression.</p>
<p>For material properties and models, the
<code>--material-property</code> and <code>--model</code> options have a
similar role than the <code>--behaviour</code> option for
behaviours.</p>
<h3
id="list-of-mtest-tests-associated-with-a-behaviour-in-a-madnex-file">List
of <code>MTest</code> tests associated with a behaviour in a
<code>madnex</code> file</h3>
<p>The <code>--list-behaviour-mtest-tests</code> command line argument
can be used to display the list of tests associated with a behaviour in
a <code>madnex</code> file.</p>
<p>Optionnally, this command line argument accept the options
<code>sorted-by-behaviours</code> or <code>unsorted</code> (see the
examples below).</p>
<h4 id="examples-of-usage">Examples of usage</h4>
<div class="sourceCode" id="cb18"><pre
class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront<span class="op">-</span>query <span class="op">--</span>list<span class="op">-</span>behaviour<span class="op">-</span>mtest<span class="op">-</span>tests <span class="op">--</span>test<span class="op">=</span><span class="st">&quot;.+Tensile.+&quot;</span> Plasticity<span class="op">.</span>mdnx</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> tests associated with behaviour Plasticity</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> UniaxialTensileTest</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre
class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront<span class="op">-</span>query <span class="op">--</span>list<span class="op">-</span>behaviour<span class="op">-</span>mtest<span class="op">-</span>tests<span class="op">=</span>unsorted <span class="op">--</span>test<span class="op">=</span><span class="st">&quot;.+Tensile.+&quot;</span> Plasticity<span class="op">.</span>mdnx</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>UniaxialTensileTest</span></code></pre></div>
<h3
id="list-of-mfm-test-generator-tests-associated-with-a-behaviour-in-a-madnex-file">List
of <code>mfm-test-generator</code> tests associated with a behaviour in
a <code>madnex</code> file</h3>
<p>The <code>--list-behaviour-mfm-test-generator-tests</code> command
line argument can be used to display the list of tests associated with a
behaviour in a <code>madnex</code> file.</p>
<p>Optionnally, this command line argument accept the options
<code>sorted-by-behaviours</code> or <code>unsorted</code> (see the
examples below).</p>
<h1 id="storing-an-mfront-file-in-a-madnex-file">Storing an
<code>MFront</code> file in a <code>madnex</code> file</h1>
<p>The easiest way to store an <code>MFront</code> file is to create an
instance of the <code>OverridableImplementation</code> class and then
call the <code>write</code> function. Here is an example in
<code>python</code>:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mfront</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> mfront.OverridableImplementation(<span class="st">&quot;Plasticity.mfront&quot;</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>mfront.write(i, <span class="st">&quot;Plasticity.mdnx&quot;</span>)</span></code></pre></div>
<p>Note that an override of the <code>write</code> function is available
to specify a template file, as follows:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>mfront.write(i, template_file_path,<span class="st">&quot;Plasticity.mdnx&quot;</span>)</span></code></pre></div>
<p>However, the <code>OverridableImplementation</code> class also allows
modifying the medata of a implementation, as follows:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mfront</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> mfront.OverridableImplementation(<span class="st">&quot;Plasticity.mfront&quot;</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>i.overrideBehaviourName(<span class="st">&quot;Plasticity_SRMA2022&quot;</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>i.overrideMaterial(<span class="st">&quot;A316LN&quot;</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>i.overrideAuthor(<span class="st">&quot;John Mac Enroe&quot;</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>mfront.write(i, <span class="st">&quot;Plasticity.mdnx&quot;</span>)</span></code></pre></div>
<h1 id="storing-an-mtest-file-in-a-madnex-file">Storing an
<code>MTest</code> file in a <code>madnex</code> file</h1>
<h2 id="c-application-programming-interface-api"><code>C++</code>
Application Programming Interface (API)</h2>
<p>The <code>TFELMTest</code> library exposes a data structure named
<code>TestDescription</code> which describes an <code>MTest</code> file
and two functions called respectively <code>loadMTestFileContent</code>
and <code>write</code>.</p>
<h3 id="the-testdescription-data-structure">The
<code>TestDescription</code> data structure</h3>
<p>The <code>TestDescription</code> data structure exposes the following
data members:</p>
<ul>
<li><code>author</code>, which describes the author of the test.</li>
<li><code>date</code>, which describes the date at which the test has
been created.</li>
<li><code>scheme</code>, which describes the type of test. Valid values
are <code>mtest</code> and <code>ptest</code>.</li>
<li><code>description</code>, which describes a description of the
test.</li>
<li><code>behaviour</code>, name of the behaviour to which the test is
associated. This data member is required to export the file in the
<code>madnex</code> file format.</li>
<li><code>material</code>, name of the material to which the test is
associated. This data member can be empty.</li>
<li><code>content</code>, content of the <code>MTest</code> file. This
content can be filled from an existing <code>MTest</code> file using the
<code>loadMTestFileContent</code> function.</li>
</ul>
<h3 id="the-loadmtestfilecontent-function">The
<code>loadMTestFileContent</code> function</h3>
<p>The <code>loadMTestFileContent</code> function loads the content of
an <code>MTest</code> file and stores it in the <code>content</code>
data member of a <code>TestDescription</code> data structure.</p>
<h3 id="the-write-function">The <code>write</code> function</h3>
<p>The <code>write</code> function exports an <code>MTest</code> test,
described by a <code>TestDescription</code> data structure, to a
file.</p>
<p>The file format is deduced from the extension of the file.</p>
<p>Currently, only extensions associated with the <a
href="https://github.com/thelfer/madnex"><code>madnex</code> file
format</a> are supported if <code>TFEL</code> is compiled with support
of this file format. Those extensions are: <code>mdnx</code>,
<code>madnex</code> (deprecated) or <code>edf</code> (experimental data
file, deprecated). Note that the behaviour member of the metadata must
be specified for export in the <code>madnex</code> file format.</p>
<h2
id="python-application-programming-interface-api"><code>Python</code>
Application Programming Interface (API)</h2>
<p>The <code>mtest</code> <code>python</code> module reflects the
<code>C++</code> API and exposes the <code>TestDescription</code> data
structure and the <code>loadMTestFileContent</code> and
<code>write</code> functions.</p>
<h3 id="example-of-usage-3">Example of usage</h3>
<p>The following example shows how to store an existing
<code>MTest</code> file to a <code>madnex</code> file:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mtest</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> mtest.TestDescription()</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>d.author <span class="op">=</span> <span class="st">&#39;John Doe&#39;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>d.date <span class="op">=</span> <span class="st">&#39;01/03/2022&#39;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>d.name <span class="op">=</span> <span class="st">&#39;UniaxialTensileTest&#39;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>d.scheme <span class="op">=</span> <span class="st">&#39;mtest&#39;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>d.behaviour <span class="op">=</span> <span class="st">&#39;Plasticity&#39;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>mtest.loadMTestFileContent(d, <span class="st">&#39;Plasticity.mtest&#39;</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>mtest.write(d,<span class="st">&#39;Plasticity.mdnx&#39;</span>)</span></code></pre></div>
<h2 id="best-practices">Best practices</h2>
<p>We highly recommend to use the following substitution variables when
defining the test:</p>
<ul>
<li><code>@interface@</code>, which is meant to be replaced by the
interface to be used. This is very handy if the test can be run for
different interfaces</li>
<li><code>@library@</code>, which is meant to be replaced by the path to
the shared library containing the tested behaviour.</li>
<li><code>@behaviour@</code>, which contains the name of the function
implementing the behaviour for the considered interface.</li>
</ul>
<h1 id="storing-an-mfm-test-generator-file-in-a-madnex-file">Storing an
<code>mfm-test-generator</code> file in a <code>madnex</code> file</h1>
<h2 id="c-application-programming-interface-api-1"><code>C++</code>
Application Programming Interface (API)</h2>
<p>The <code>MFMTestGenerator</code> library exposes a data structure
named <code>TestDescription</code> which describes an
<code>mfm-test-generator</code> file and two functions called
respectively <code>loadMFMTestGeneratorFileContent</code> and
<code>write</code>.</p>
<h3 id="the-testdescription-data-structure-1">The
<code>TestDescription</code> data structure</h3>
<p>The <code>TestDescription</code> data structure exposes the following
data members:</p>
<ul>
<li><code>author</code>, which describes the author of the test.</li>
<li><code>date</code>, which describes the date at which the test has
been created.</li>
<li><code>description</code>, which describes a description of the
test.</li>
<li><code>behaviour</code>, name of the behaviour to which the test is
associated. This data member is required to export the file in the
<code>madnex</code> file format.</li>
<li><code>material</code>, name of the material to which the test is
associated. This data member can be empty.</li>
<li><code>content</code>, content of the <code>mfm-test-generator</code>
file. This content can be filled from an existing
<code>mfm-test-generator</code> file using the
<code>loadMFMTestGeneratorFileContent</code> function.</li>
</ul>
<h3 id="the-loadmfmtestgeneratorfilecontent-function">The
<code>loadMFMTestGeneratorFileContent</code> function</h3>
<p>The <code>loadMFMTestGeneratorFileContent</code> function loads the
content of an <code>mfm-test-generator</code> file and stores it in the
<code>content</code> data member of a <code>TestDescription</code> data
structure.</p>
<h3 id="the-write-function-1">The <code>write</code> function</h3>
<p>The <code>write</code> function exports an
<code>mfm-test-generator</code> test, described by a
<code>TestDescription</code> data structure, to a file.</p>
<p>The file format is deduced from the extension of the file.</p>
<p>Currently, only extensions associated with the <a
href="https://github.com/thelfer/madnex"><code>madnex</code> file
format</a> are supported if <code>TFEL</code> is compiled with support
of this file format. Those extensions are: <code>mdnx</code>,
<code>madnex</code> (deprecated) or <code>edf</code> (experimental data
file, deprecated). Note that the behaviour member of the metadata must
be specified for export in the <code>madnex</code> file format.</p>
<h2
id="python-application-programming-interface-api-1"><code>Python</code>
Application Programming Interface (API)</h2>
<p>The <code>mfm_test_generator</code> <code>python</code> module
reflects the <code>C++</code> API and exposes the
<code>TestDescription</code> data structure and the
<code>loadMFMTestGeneratorFileContent</code> and <code>write</code>
functions.</p>
<h3 id="example-of-usage-4">Example of usage</h3>
<p>The following example shows how to store an existing
<code>mfm-test-generator</code> file to a <code>madnex</code> file:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mfm_test_generator</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> mfm_test_generator.TestDescription()</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>d.author <span class="op">=</span> <span class="st">&#39;John Doe&#39;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>d.date <span class="op">=</span> <span class="st">&#39;01/03/2022&#39;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>d.name <span class="op">=</span> <span class="st">&#39;UniaxialTensileTest&#39;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>d.behaviour <span class="op">=</span> <span class="st">&#39;Plasticity&#39;</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>mfm_test_generator.loadMFMTestGeneratorFileContent(d, <span class="st">&#39;Plasticity.mdnx&#39;</span>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>mfm_test_generator.write(d,<span class="st">&#39;Plasticity.mdnx&#39;</span>)</span></code></pre></div>
<h2 id="best-practices-1">Best practices</h2>
<p>We highly recommend to use the following substitution variables when
defining the test:</p>
<ul>
<li><code>@interface@</code>, which is meant to be replaced by the
interface to be used. This is very handy if the test can be run for
different interfaces</li>
<li><code>@library@</code>, which is meant to be replaced by the path to
the shared library containing the tested behaviour.</li>
<li><code>@behaviour@</code>, which contains the name of the function
implementing the behaviour for the considered interface.</li>
</ul>
<h1 class="unnumbered" id="references">References</h1>
<div id="refs" class="references csl-bib-body" role="list">
<div id="ref-cea_edf_madnex_library_2020" class="csl-entry"
role="listitem">
<div class="csl-left-margin">1. </div><div
class="csl-right-inline"><span class="smallcaps">CEA</span>, EDF. The
‘MADNEX‘ library. 2020. Available from: <a
href="https://thelfer.github.io/madnex/web/index.html">https://thelfer.github.io/madnex/web/index.html</a></div>
</div>
</div>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-62273823-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
