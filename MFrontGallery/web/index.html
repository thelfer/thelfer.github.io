<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-EN" xml:lang="en-EN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>The MFrontGallery project</title>
        <meta name="author" content="Thomas Helfer" />
            <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <style type="text/css">code{white-space: pre;}</style>
            <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #204a87; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #8f5902; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #204a87; font-weight: bold; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
            <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/main.css"/>
        <script
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
        type="text/javascript"></script>
          </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
        <header>
      <ul id="nav">
	    <li><a href="index.html">Overview</a></li>
        <li><a>Documentation</a>
      	  <ul>
	        <li><a href="install.html">Installation guide</a></li>
	        <li><a href="creating-derived-project.html">Creating derived project</a></li>
	        <li><a href="cmake-infrastructure.html">CMake infrastructure</a></li>
	        <li><a href="best-practices.html">Best practices</a></li>
            <li><a href="contributing.html">Contributing</a></li>
            <li><a>Tutorials</a>
                <ul>
                <li><a href="SmallStrainUmatWrapper.html">Small-strain UMAT wrapper</a></li>
                </ul>
            </li>
	      </ul>
        </li>
        <li><a>Materials</a>
          <ul>
             <li><a>Concrete</a>
                <ul>
                   <li><a>Behaviours</a>
                     <ul>
                       <li><a href="Burger_EDF_CIWAP_2021.html">Burger_EDF_CIWAP_2021</a></li>
                     </ul>
                   </li>
                </ul>
             </li>
             <li><a>Crushed Salt</a>
                <ul>
                   <li><a>Behaviours</a>
                     <ul>
                       <li><a href="CrushedSaltKorthausBehaviour.html">Korthaus' behaviour</a></li>
                     </ul>
                   </li>
                </ul>
             </li>
          </ul>
        </li>
        <li><a>Behaviours</a>
          <ul>
             <li><a>Plasticity</a>
                <ul>
                  <li><a href="SemiImplicitModifiedCamClay_OpenGeoSys2020.html">SemiImplicitModifiedCamClay_OpenGeoSys2020</a></li>
                </ul>
             </li>
          </ul>
        </li>
        <li><a>Getting Help</a>
      	  <ul>
	        <li><a href="https://github.com/thelfer/MFrontGallery/discussions">Forum</a></li>
	        <li><a href="faq.html">FAQ</a></li>
	        <li><a href="mailto:tfel-contact@cea.fr">Contact</a></li>
	      </ul>
       </li>
        <li><a>About</a>
      	  <ul>
	        <li><a href="contributors.html">Contributors</a></li>
	      </ul>
       </li>
      </ul><br>
    </header>

<div id="header">
<h1 class="title">The MFrontGallery project</h1>
<h2 class="author">Thomas Helfer</h2>
<h3 class="date">18/12/2021</h3>
</div>
<div id="TOC">
<ul>
<li><a href="#sec:mfm:introduction:statement_of_need"
id="toc-sec:mfm:introduction:statement_of_need"><span
class="toc-section-number">1</span> Statemement of need: material
knowledge management for safety criticial studies</a>
<ul>
<li><a
href="#role-of-material-knowledge-in-numerical-simulations-of-solids"
id="toc-role-of-material-knowledge-in-numerical-simulations-of-solids"><span
class="toc-section-number">1.1</span> Role of material knowledge in
numerical simulations of solids</a></li>
<li><a href="#sec:mfm:introduction:safety_critical_studies"
id="toc-sec:mfm:introduction:safety_critical_studies"><span
class="toc-section-number">1.2</span> Requirements related to
safety-critical studies</a></li>
<li><a href="#sec:mfm:introduction:implementations"
id="toc-sec:mfm:introduction:implementations"><span
class="toc-section-number">1.3</span> Implementations and
classification</a></li>
<li><a href="#discussion" id="toc-discussion"><span
class="toc-section-number">1.4</span> Discussion</a></li>
<li><a href="#solutions-provided-by-the-mfrontgallery-project"
id="toc-solutions-provided-by-the-mfrontgallery-project"><span
class="toc-section-number">1.5</span> Solutions provided by the
<code>MFrontGallery</code> project</a></li>
</ul></li>
<li><a href="#sec:mfm:introduction:typical_use_case"
id="toc-sec:mfm:introduction:typical_use_case"><span
class="toc-section-number">2</span> Typical use case of projects derived
from <code>MFrontGallery</code></a></li>
<li><a href="#sec:mfm:introduction:files"
id="toc-sec:mfm:introduction:files"><span
class="toc-section-number">3</span> Files organization</a>
<ul>
<li><a href="#storage-of-self-contained-implementations"
id="toc-storage-of-self-contained-implementations"><span
class="toc-section-number">3.1</span> Storage of self-contained
implementations</a></li>
<li><a href="#storage-of-generic-behaviours"
id="toc-storage-of-generic-behaviours"><span
class="toc-section-number">3.2</span> Storage of generic
behaviours</a></li>
</ul></li>
<li><a href="#sec:mfm:introduction:usage"
id="toc-sec:mfm:introduction:usage"><span
class="toc-section-number">4</span> Typical usage</a>
<ul>
<li><a href="#configuration" id="toc-configuration"><span
class="toc-section-number">4.1</span> Configuration</a></li>
<li><a href="#compilation" id="toc-compilation"><span
class="toc-section-number">4.2</span> Compilation</a></li>
<li><a href="#unit-tests" id="toc-unit-tests"><span
class="toc-section-number">4.3</span> Unit tests</a></li>
<li><a href="#installation" id="toc-installation"><span
class="toc-section-number">4.4</span> Installation</a></li>
</ul></li>
<li><a href="#acknowledgements"
id="toc-acknowledgements">Acknowledgements</a></li>
<li><a href="#references" id="toc-references">References</a></li>
</ul>
</div>
<p>This page introduces the <code>MFrontGallery</code> project whose
latest version is available at: <a
href="https://github.com/thelfer/MFrontGallery"
class="uri">https://github.com/thelfer/MFrontGallery</a></p>
<p>This project has two main almost orthogonal goals:</p>
<ol type="1">
<li>The first one is to show how solver developers may provide to their
users a set of ready-to-use (mechanical) behaviours which can be
parametrized by their users to match their needs.</li>
<li>The second one is to show how to set up a high-quality material
knowledge management project based on <a
href="https://thelfer.github.io/tfel/web/index.html"><code>MFront</code></a>,
able to meet the requirements of safety-critical studies as discussed in
Section 1.2.</li>
</ol>
<p>The distinction between those two approaches is profound and
discussed in depth in Sections 1 and 2.</p>
<p>While the first goal is common to all (mechanical) solvers, one
originality of the <code>MFrontGallery</code> project is to address the
second goal.</p>
<p>The <code>MFrontGallery</code> project also contains various
high-quality <code>MFront</code> implementations. Those implementations
may originate from the <code>MFront</code> tutorials, i.e. the <a
href="https://thelfer.github.io/tfel/web/gallery.html"><code>MFront gallery</code>
page</a> (hence the name of the project). This project is also meant to
store various contributions of academic or industrial users of
<code>MFront</code> willing to share their material knowledge and also
benefit from the continuous integration process to guarantee that no
regression would happen as <code>MFront</code> evolves.</p>
<blockquote>
<p><strong>The <code>MFrontGallery</code> and
<code>MFrontMaterials</code> projects</strong></p>
<p>The <code>MFrontGallery</code> project is the open-source counterpart
of the <code>MFrontMaterials</code> project (called internally
<code>mfm</code>). <code>MFrontMaterials</code> is used for material
knowledge management by the fuel performance codes developped on top of
the <code>PLEAIDES</code> platform <span class="citation"
data-cites="plancq_pleiades_2004 marelle_new_2016">[<a
href="#ref-plancq_pleiades_2004" role="doc-biblioref">1</a>, <a
href="#ref-marelle_new_2016" role="doc-biblioref">2</a>]</span> and
results from a common effort of CEA and its industrial partners EDF and
Framatome. See the <a href="faq.html">faq</a> for details about the
relation between those two projects.</p>
<p>As both projects shares the same <a
href="cmake-infrastructure.html"><code>cmake</code> infrastructure</a>,
the name <code>mfm</code> or references to the
<code>MFrontMaterials</code> project may appear in function names,
documentation, examples, etc.</p>
</blockquote>
<p>In particular, the project provides:</p>
<ul>
<li>A <a href="https://cmake.org"><code>cmake</code></a> infrastructure
that can be duplicated in (academic or industrial) derived projects.
This infrastructure allows:
<ul>
<li>to compile <code>MFront</code> sources using all interfaces
supported by <code>MFront</code>. For example, concerning behaviours,
the behaviours can be compiled for the following solvers: <a
href="http://www-cast3m.cea.fr/"><code>Cast3M</code></a>, <a
href="https://code-aster.org"><code>code_aster</code></a>, <a
href="https://europlexus.jrc.ec.europa.eu/"><code>Europlexus</code></a>,
<code>Abaqus/Standard</code>, <code>Abaqus/Explicit</code>,
<code>Ansys</code>, <code>AMITEX_FFTP</code>, <a
href="http://www.calculix.de/"><code>CalculiX</code></a>, <a
href="http://www.zset-software.com/"><code>ZSet</code></a>, <a
href="https://dianafea.com/"><code>DIANA   FEA</code></a>. Thanks to the
<code>generic</code> interface, those behaviours are also available in
all solvers using the <a
href="https://thelfer.github.io/mgis/web/index.html"><code>MFrontGenericInterfaceSupport</code>
projet</a> (MGIS), including: <a
href="https://www.opengeosys.org/"><code>OpenGeoSys</code></a>, <a
href="https://thelfer.github.io/mfem-mgis/web/index.html"><code>MFEM-MGIS</code></a>,
<code>MANTA</code>, <a
href="https://thelfer.github.io/mgis/web/mgis_fenics.html"><code>mgis.fenics</code></a>,
<a href="http://mofem.eng.gla.ac.uk/mofem/html"><code>MoFEM</code></a>,
XPER, etc.</li>
<li>to execute unit tests based on <code>MTest</code>. Those unit tests
generate <code>XML</code> result files conforming to the
<code>JUnit</code> standard that can readily be used by continuous
integration platforms such as <a
href="https://www.jenkins.io/">jenkins</a>.</li>
<li>generate the documentation associated with the stored
implementations.</li>
</ul>
<a href="creating-derived-project.html">This page</a> describes how to
create a derived project based on the same infrastructure as the
<code>MFrontGallery</code>.</li>
<li>A documentation of <a href="best-pratices.html">best practices</a>
to handle material knowledge implemented using <code>MFront</code>
implementations.</li>
<li>A set of high-quality <code>MFront</code> implementations.</li>
</ul>
<p>Section 1 discusses why a new approach to material knowledge
management is needed in the context of safety criticial studies.</p>
<p>Section 2 describes some typical use case of projects derived from
<code>MFrontGallery</code>.</p>
<p>Section 3 discusses how <code>MFront</code> implementations are
stored in the project.</p>
<p>Section 4 provides a short overview of the usage of the project.</p>
<h1 data-number="1" id="sec:mfm:introduction:statement_of_need"><span
class="header-section-number">1</span> Statemement of need: material
knowledge management for safety criticial studies</h1>
<h2 data-number="1.1"
id="role-of-material-knowledge-in-numerical-simulations-of-solids"><span
class="header-section-number">1.1</span> Role of material knowledge in
numerical simulations of solids</h2>
<p>Numerical simulations of solids are based on the description of the
evolution of the thermodynamical state of the materials of interest. In
the context of the <code>MFrontGallery</code> project, this
thermodynamical state is described at each point of space by a set of
internal state variables which can evolve with time due to various
physical phenomena (plasticity, viscoplaticity, damage, phase change,
swelling due to dessication, etc.).</p>
<p>The knowledge that one may have about a given material can be
represented in different forms. Here, the following categorization is
employed:</p>
<ul>
<li><strong>Material properties</strong> are defined here as functions
of the current state of the material.</li>
<li><strong>Behaviours</strong> describe how a material evolves and
reacts locally due to gradients inside the material. Here, the material
reaction is associated with fluxes (or forces) thermodynamically
conjugated with the gradients.</li>
<li><strong>Point-wise models</strong> describe the evolution of some
internal state variables with the evolution of other state variables.
Point-wise models may be seen as behaviours without gradients.</li>
</ul>
<h2 data-number="1.2"
id="sec:mfm:introduction:safety_critical_studies"><span
class="header-section-number">1.2</span> Requirements related to
safety-critical studies</h2>
<p>The <code>MFrontGallery</code> project has been developed to address
various issues related to material knowledge management for
safety-critical studies:</p>
<ul>
<li><strong>Intellectual property</strong>: Frequently, material
knowledge reflects the know-how of industrials and shall be kept private
for various reasons. For example, some mechanical behaviours result from
years of experimental testing in dedicated facilities and are thus
highly valuable. In some cases, material knowledge can be a competitive
advantage.</li>
<li><strong>Portability</strong>: safety-critical studies may involve
several partners which use different solvers for independent assessment
and review. From the same <code>MFront</code> source file, the
<code>MFrontGallery</code> can generate shared libraries for all the
solvers of interest. Moreover, the project employs <a
href="https://thelfer.github.io/MFrontGallery/web/best-practices.html">best
practices guidelines</a>[^mfm:best_practices] to ensure that a given
<code>MFront</code> implementation can be shared among several teams
while assuring quality.</li>
<li><strong>Maintainability over decades</strong>: Some safety-critical
studies can be used to design buildings, plants, or technological
systems for operation periods of decades or more. Over such periods of
time, both the solvers and the material knowledge will evolve. The
safety-critical studies, however, on which design choices or decisions
were based, need to remain accessible or reproducible.</li>
<li><strong>Progression of the state of the art</strong>:
Safety-critical studies need to reflect the state of the art. As such,
the material knowledge per se, numerical methods and software
engineering need to evolve while at the same time ensuring the other
principles listed here are not violated in order to maintain quality
assurance of past, present and future analyses.</li>
<li><strong>Continuous integration and unit testing</strong>: Each
implementation has associated unit tests with can check no-regression
during the development of <code>MFront</code>.</li>
<li><strong>Documentation</strong>: the project can generate the
documentation associated with the various implementations in an
automated manner. Implementations of material knowledge can be
associated to essential meta data.</li>
</ul>
<h2 data-number="1.3" id="sec:mfm:introduction:implementations"><span
class="header-section-number">1.3</span> Implementations and
classification</h2>
<p><code>MFront</code> implementations can be classified in two main
categories:</p>
<ul>
<li><strong>self-contained implementations</strong> that contain all the
physical information (e.g., model equations and parameters).</li>
<li><strong>generic implementations</strong> for which the solver is
required to provide additional physical information to the material
treated, e.g. the values of certain parameters. Those “generic”
implementations are usually shipped with solvers as ready-to-use
behaviours.</li>
</ul>
<p>An alternative way of expressing the disctinction between
self-contained and generic implementations is to consider that generic
implementations only describe a set of constitutive equations while
self-contained implementations describes a set of constitutive equations
<strong>and</strong> the material coefficients identified on a
well-defined set of experiments for a particular material.</p>
<p>In practice, the physical information contained in self-contained
implementations may be more complex than a set of material coefficients.
For example, the Young modulus of a material may be defined by an
analytical formula and can’t thus be reduced to a set of constants. This
analytical formula shall be part of a self-contained mechanical
behaviour implementation. Of course, this analytical formula could be
included in the set of constitutive equations and parametrized to
retrieve a bit of genericity. In our experience, such a hybrid approach
is fragile, less readable and and cumbersome. Moreover it does not
address the main issue of generic behaviours which is the management of
the physical information in a reliable and robust way.</p>
<h2 data-number="1.4" id="discussion"><span
class="header-section-number">1.4</span> Discussion</h2>
<p>Introducing generic implementations in solvers can be very useful for
rapid prototyping by the end-users. They can also be useful for
behaviours with little specificity (e.g. linear elasticity, von Mises
plasticity) often used in general analyses relying on a more frequent
and ad-hoc re-parameterization. However, such generic implementations
raise the issue of how to manage the physical information used in
engineering studies, particularly safety-critical ones.</p>
<p>For the sake of simplicity, we will first consider the case where the
solver provide all the generic implementations required by the users and
discuss in a second case the situation of external implementations (such
as <code>UMAT</code> behaviours in <code>Abaqus</code>).</p>
<h3 data-number="1.4.1"
id="a-basic-standard-solution-using-input-files-of-the-solver-to-define-materials"><span
class="header-section-number">1.4.1</span> A basic standard solution:
using input files of the solver to define materials</h3>
<p>Most commonly, the physical information will be in the input file of
the considered solver, generally in a section dedicated to the
definition of the materials.</p>
<p>But the input files not only contain that physical information but
also the boundary conditions, load step information, numerical
parameters, discretization information, etc. for the simulation it is
meant to describe.</p>
<p>When a new simulation is considered, physical information, i.e. the
material definition section, is often copy-pasted to a new input
file.</p>
<p>Such input files are also generally shared by engineers which will
modify them to their own needs.</p>
<p>Things get even worse if this physical information must be shared
with another team which uses a different solver. In general, the
physical information is manually adapted to input file format of the new
solver, an operation which is error-prone for a large number of reasons,
including non-consistent parameter definitions, unit conversions, or
plain-and-simple copy errors.</p>
<p>In the end, our experience shows that it is practically impossible to
track physical information reliably in this way, particularly if the
knowledge of the materials evolves over time.</p>
<h3 data-number="1.4.2" id="a-more-elaborate-solution"><span
class="header-section-number">1.4.2</span> A more elaborate
solution</h3>
<p>A more elaborate solution consists in splitting the input file into
multiple ones and separating the material declarations from the rest.
One can thus maintain a database of ready-to-use material
definitions.</p>
<p>A variant of this approach is to have specific keywords allowing to
request specific material definitions.</p>
<p>In each case, the physical information is associated to a label. If
this information evolves, one may just have to create a new label.</p>
<p>The solution is elegant and the physical information is no longer
duplicated with every change of geometry or boundary conditions.</p>
<p>However, this approach still has severe drawbacks:</p>
<ul>
<li>When the database is maintened by the developer of the code, new
material definitions can only be available when a new release of the
solver is made.</li>
<li>It may be limited to the solver’s built-in generic implementation
and is thus not extensible.</li>
<li>It does not solve the issue regarding the portability of the
physical information to another solver.</li>
</ul>
<h3 data-number="1.4.3"
id="solution-based-on-user-defined-subroutines"><span
class="header-section-number">1.4.3</span> Solution based on
user-defined subroutines</h3>
<ul>
<li>can be either generic or self-contained in the above sense</li>
<li>often outdated interfaces or languages, very solver-specific</li>
<li>information transfer limited by what the interface provides</li>
<li>version compatibility issues (solver release that changed an
interface, compilers)</li>
<li>use of the model in another solver typically requires
re-implementation (Hypela2, …)</li>
</ul>
<h3 data-number="1.4.4" id="conclusions"><span
class="header-section-number">1.4.4</span> Conclusions</h3>
<p>According to the experience of the authors, a rigorous material
knowledge management suitable for safety-critical studies is only
possible if self-contained implementations are considered.</p>
<h2 data-number="1.5"
id="solutions-provided-by-the-mfrontgallery-project"><span
class="header-section-number">1.5</span> Solutions provided by the
<code>MFrontGallery</code> project</h2>
<p>The <code>MFrontGallery</code> is based on the assumption that the
solvers of interest (note the plural) can use shared libraries generated
by the <code>MFront</code> code generator <span class="citation"
data-cites="Helfer2015 cea_edf_mfront_2021">[<a href="#ref-Helfer2015"
role="doc-biblioref">3</a>, <a href="#ref-cea_edf_mfront_2021"
role="doc-biblioref">4</a>]</span>.</p>
<p>This assumption allows to <strong>decouple the material knowledge
management from the development (source code) of the solvers of
interest</strong>.</p>
<h3 data-number="1.5.1"
id="code-re-use-and-self-contained-implementations"><span
class="header-section-number">1.5.1</span> Code re-use and
“self-contained” implementations</h3>
<p>However, an important argument in favor of generic implementation is
<strong>code-reuse</strong>. <code>MFront</code> provides several
techniques to facilitate code factorisation between implementations as
described in the <a href="best-practices.html">“Best practices”
page</a></p>
<h1 data-number="2" id="sec:mfm:introduction:typical_use_case"><span
class="header-section-number">2</span> Typical use case of projects
derived from <code>MFrontGallery</code></h1>
<p>The <code>cmake</code> infrastructure derived from
<code>MFrontGallery</code> is meant to be reused in derived projects.
The creation of a derived projet is described in depth on <a
href="creating-derived-project.html">this page</a>.</p>
<p>The <code>cmake</code> infrastructure is documented on <a
href="cmake-infrastructure.html">this page</a>.</p>
<p>This sections highlight two typical usage of projects derived from
<code>MFrontGallery</code>:</p>
<ul>
<li>It can be used to handle a set of <em>generic behaviours</em>
delivered along with a general purpose solver.</li>
<li>It can be used to built a domain-specific material data base
containing only <em>self-contained behaviours</em>.</li>
</ul>
<p>In both cases, we highly recommend reading the <a
href="best-practices.html">best practices page</a>.</p>
<h1 data-number="3" id="sec:mfm:introduction:files"><span
class="header-section-number">3</span> Files organization</h1>
<h2 data-number="3.1"
id="storage-of-self-contained-implementations"><span
class="header-section-number">3.1</span> Storage of self-contained
implementations</h2>
<p>Self-contained implementations are stored in the
<code>materials</code> directory. Under this directory, implementations
are stored by material and by kind (material property, behaviour or
model), as follows:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">materials/</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> Bentonite</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   └── behaviours</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>       └── include</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> Concrete</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   └── behaviours</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> CrushedSalt</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   └── behaviours</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> VanadiumAlloy</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   ├── behaviours</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="ex">│</span>   └── properties</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> Wood</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> behaviours</span></code></pre></div>
<h2 data-number="3.2" id="storage-of-generic-behaviours"><span
class="header-section-number">3.2</span> Storage of generic
behaviours</h2>
<p>Generic implementations are stored in the
<code>generic-behaviours</code> directory. Under this directory, the
implementations are more or less arbitraly classified by the main
phenomenon described, as follows:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">generic-behaviours/</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> damage</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> damage_viscoplasticity</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> finitestrainsinglecrystal</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> heattransfer</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> hyperelasticity</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> hyperviscoelasticity</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> nonlinearelasticity</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> plasticity</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> viscoelasticity</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> viscoplasticity</span></code></pre></div>
<p>These generic implementations have been introduced in the
<code>MFrontGallery</code> project to:</p>
<ul>
<li>test if those implementations still compile and run as
<code>̀MFront</code> evolves.</li>
<li>show to solver developers how they could provide to their users a
set of ready-to-use behaviours.</li>
</ul>
<h1 data-number="4" id="sec:mfm:introduction:usage"><span
class="header-section-number">4</span> Typical usage</h1>
<p>After downloading or cloning the sources of the
<code>MFrontGallery</code> project, a typical usage of the project is
divided in four steps (common to most <code>cmake</code> projects):</p>
<ul>
<li><strong>Configuration</strong>, which allows to select the
interfaces to be used.</li>
<li><strong>Compilation</strong>, which builds the shared libraries
associated with the selected interfaces.</li>
<li><strong>Unit testing</strong>, which allows to verify that no
regression has occured.</li>
<li><strong>Installation</strong>, which can deploy the built shared
libraries.</li>
</ul>
<blockquote>
<p>** Cloning the <code>master</code> branch of the
<code>MFrontGallery</code> project**</p>
<p>The <code>master</code> branch of the <code>MFrontGallery</code>
project can be cloned as follows:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git clone https://github.com/thelfer/MFrontGallery</span></code></pre></div>
</blockquote>
<h2 data-number="4.1" id="configuration"><span
class="header-section-number">4.1</span> Configuration</h2>
<p>The sources are assumed to be in the <code>MFrontGallery</code>
directory. While not strictly required, it is convienient to create a
<code>build</code> directory (here, at the same level as the
<code>MFrontGallery</code> directory):</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir build</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd build</span></code></pre></div>
<p>The configuration step is triggered by calling <code>cmake</code>,
e.g.:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cmake  ../MFrontGallery/ <span class="at">-DCMAKE_BUILD_TYPE</span><span class="op">=</span>Release     <span class="dt">\</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">-Denable-generic-behaviours</span><span class="op">=</span>ON <span class="at">-Denable-ansys</span><span class="op">=</span>ON</span></code></pre></div>
<p>The interfaces are selected by a set of <code>cmake</code> flags
prefixed by <code>enable</code>. In the previous command, we only
selected the <code>generic</code> and <code>ansys</code> interfaces.</p>
<blockquote>
<p><strong><code>TFEL</code> executables</strong></p>
<p>By default, the configuration step assumes that the various binaries
provided by the <code>TFEL</code> project (including
<code>mfront</code>) can be found in the current environment. See the <a
href="install.html">installation guide</a> for details.</p>
</blockquote>
<p>The complete set of available flags are described in the <a
href="install.html">installation guide</a>.</p>
<p>The outputs of the previous command shows the generated libraries and
their contents:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--</span> Adding library : HeatTransferBehaviours-generic <span class="er">(</span><span class="ex">/home/th202608/codes/MFrontGallery/master/src/build3/generic-behaviours/heattransfer/generic/src/StationaryLinearHeatTransfer-generic.cxx</span><span class="kw">;</span><span class="ex">/home/th202608/codes/MFrontGallery/master/src/build3/generic-behaviours/heattransfer/generic/src/StationaryLinearHeatTransfer.cxx</span><span class="kw">;</span><span class="ex">/home/th202608/codes/MFrontGallery/master/src/build3/generic-behaviours/heattransfer/generic/src/StationaryNonLinearHeatTransfer-generic.cxx</span><span class="kw">;</span><span class="ex">/home/th202608/codes/MFrontGallery/master/src/build3/generic-behaviours/heattransfer/generic/src/StationaryNonLinearHeatTransfer.cxx</span><span class="kw">;</span><span class="ex">/home/th202608/codes/MFrontGallery/master/src/build3/generic-behaviours/heattransfer/generic/src/TransientLinearHeatTransfer-generic.cxx</span><span class="kw">;</span><span class="ex">/home/th202608/codes/MFrontGallery/master/src/build3/generic-behaviours/heattransfer/generic/src/TransientLinearHeatTransfer.cxx</span><span class="kw">;</span><span class="ex">/home/th202608/codes/MFrontGallery/master/src/build3/generic-behaviours/heattransfer/generic/src/TransientNonLinearHeatTransfer-generic.cxx</span><span class="kw">;</span><span class="ex">/home/th202608/codes/MFrontGallery/master/src/build3/generic-behaviours/heattransfer/generic/src/TransientNonLinearHeatTransfer.cxx</span><span class="kw">)</span></span></code></pre></div>
<p>Some <code>MFront</code> files are not compatible with the selected
interface. For example, the <code>ansys</code> interface only supports
small and finite strain behaviours. Generalized behaviours are then
discarded as shown by the following ouptut:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--</span> StationaryLinearHeatTransfer has been discarded for interface ansys <span class="er">(</span><span class="ex">unsupported</span> behaviour type<span class="kw">)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">--</span> StationaryNonLinearHeatTransfer has been discarded for interface ansys <span class="er">(</span><span class="ex">unsupported</span> behaviour type<span class="kw">)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">--</span> TransientLinearHeatTransfer has been discarded for interface ansys <span class="er">(</span><span class="ex">unsupported</span> behaviour type<span class="kw">)</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">--</span> TransientNonLinearHeatTransfer has been discarded for interface ansys <span class="er">(</span><span class="ex">unsupported</span> behaviour type<span class="kw">)</span></span></code></pre></div>
<h2 data-number="4.2" id="compilation"><span
class="header-section-number">4.2</span> Compilation</h2>
<p>The selected libraries can be built as follows:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cmake <span class="at">--build</span> . <span class="at">--target</span> all</span></code></pre></div>
<p>Various targets are avaiable.</p>
<h2 data-number="4.3" id="unit-tests"><span
class="header-section-number">4.3</span> Unit tests</h2>
<p>Unit tests can be executed as follows:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cmake <span class="at">--build</span> . <span class="at">--target</span> check</span></code></pre></div>
<p>A summary of the executed tests and their status is displayed, as
follows:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Test</span> project /home/th202608/codes/MFrontGallery/master/src/build3</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Start</span> 1: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_ansys_UpWard_mtest</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="ex">1/8</span> Test <span class="co">#1: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_ansys_UpWard_mtest .........   Passed    0.02 sec</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Start</span> 2: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_ansys_DownWard_mtest</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="ex">2/8</span> Test <span class="co">#2: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_ansys_DownWard_mtest .......   Passed    0.02 sec</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Start</span> 3: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_ansys_ToNearest_mtest</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="ex">3/8</span> Test <span class="co">#3: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_ansys_ToNearest_mtest ......   Passed    0.02 sec</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Start</span> 4: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_ansys_TowardZero_mtest</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="ex">4/8</span> Test <span class="co">#4: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_ansys_TowardZero_mtest .....   Passed    0.02 sec</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Start</span> 5: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_generic_UpWard_mtest</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="ex">5/8</span> Test <span class="co">#5: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_generic_UpWard_mtest .......   Passed    0.02 sec</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Start</span> 6: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_generic_DownWard_mtest</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="ex">6/8</span> Test <span class="co">#6: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_generic_DownWard_mtest .....   Passed    0.02 sec</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Start</span> 7: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_generic_ToNearest_mtest</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="ex">7/8</span> Test <span class="co">#7: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_generic_ToNearest_mtest ....   Passed    0.02 sec</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Start</span> 8: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_generic_TowardZero_mtest</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="ex">8/8</span> Test <span class="co">#8: SemiImplicitModifiedCamClay_OpenGeoSys2020_Triax_generic_TowardZero_mtest ...   Passed    0.02 sec</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="ex">100%</span> tests passed, 0 tests failed out of 8</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="ex">Total</span> Test time <span class="er">(</span><span class="ex">real</span><span class="kw">)</span> <span class="ex">=</span>   0.13 sec</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="ex">Built</span> target check</span></code></pre></div>
<h2 data-number="4.4" id="installation"><span
class="header-section-number">4.4</span> Installation</h2>
<p>The built shared libraries can be installed as follows:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cmake <span class="at">--build</span> . <span class="at">--target</span> install</span></code></pre></div>
<h1 class="unnumbered" id="acknowledgements">Acknowledgements</h1>
<p>The <code>MFrontGallery</code> project has been developed by CEA, EDF
and Framatome as part of a common effort to build a common and robust
material knowledge management strategy to back safety-critical studies
which meet the quality requirements imposed by the French Safety
Authority (ANS).</p>
<h1 class="unnumbered" id="references">References</h1>
<div id="refs" class="references csl-bib-body" role="list">
<div id="ref-plancq_pleiades_2004" class="csl-entry" role="listitem">
<div class="csl-left-margin">1. </div><div
class="csl-right-inline"><span class="smallcaps">Plancq</span>, David,
<span class="smallcaps">Thouvenin</span>, Gilles, <span
class="smallcaps">Ricaud</span>, Jean-Marc, <span
class="smallcaps">Struzik</span>, Christine, <span
class="smallcaps">Helfer</span>, Thomas, <span
class="smallcaps">Bentejac</span>, Frédéric, <span
class="smallcaps">Thévenin</span>, Philippe and <span
class="smallcaps">Masson</span>, Renaud. <span>PLEIADES</span> : A
unified environment for multi-dimensional fuel performance modeling.
In : <em>International meeting on <span>LWR</span> fuel
performance</em>. Florida, 2004. </div>
</div>
<div id="ref-marelle_new_2016" class="csl-entry" role="listitem">
<div class="csl-left-margin">2. </div><div
class="csl-right-inline"><span class="smallcaps">Marelle</span>,
Vincent, <span class="smallcaps">Goldbronn</span>, Patrick, <span
class="smallcaps">Bernaud</span>, Stéphane, <span
class="smallcaps">Castelier</span>, Étienne, <span
class="smallcaps">Julien</span>, Jérôme, <span
class="smallcaps">Nkonga</span>, Katherine, <span
class="smallcaps">Noirot</span>, Laurence and <span
class="smallcaps">Ramière</span>, Isabelle. New developments in
<span>ALCYONE</span> 2.0 fuel performance code. In : Boise, USA, 2016.
</div>
</div>
<div id="ref-Helfer2015" class="csl-entry" role="listitem">
<div class="csl-left-margin">3. </div><div
class="csl-right-inline"><span class="smallcaps">Helfer</span>, Thomas,
<span class="smallcaps">Michel</span>, Bruno, <span
class="smallcaps">Proix</span>, Jean-Michel, <span
class="smallcaps">Salvo</span>, Maxime, <span
class="smallcaps">Sercombe</span>, Jérôme and <span
class="smallcaps">Casella</span>, Michel. <span
class="nocase">Introducing the open-source mfront code generator:
Application to mechanical behaviours and material knowledge management
within the PLEIADES fuel element modelling platform</span>.
<em>Computers <span>&amp;</span> Mathematics with Applications</em>.
September 2015. Vol. 70, no. 5, p. 994–1023. DOI <a
href="https://doi.org/10.1016/j.camwa.2015.06.027">10.1016/j.camwa.2015.06.027</a>.
Available from: <a
href="https://linkinghub.elsevier.com/retrieve/pii/S0898122115003132">https://linkinghub.elsevier.com/retrieve/pii/S0898122115003132</a></div>
</div>
<div id="ref-cea_edf_mfront_2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">4. </div><div
class="csl-right-inline"><span class="smallcaps">CEA, EDF</span>. <span
class="nocase">TFEL/MFront website</span>. 2021. Available from: <a
href="https://thelfer.github.io/tfel/web/index.html">https://thelfer.github.io/tfel/web/index.html</a></div>
</div>
</div>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-62273823-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
