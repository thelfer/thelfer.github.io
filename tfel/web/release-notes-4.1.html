<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-EN" xml:lang="en-EN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Release notes of the 4.1 version of TFEL, MFront and MTest</title>
        <meta name="author" content="Thomas Helfer" />
            <meta name="date" content="2022-01-01" />
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <style type="text/css">code{white-space: pre;}</style>
            <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #c4a000; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #000000; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #000000; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #000000; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
            <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/main.css"/>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
          </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
        <header>
      <ul id="nav">
	<li><a href="news.html">News</a></li>
	<li><a href="index.html">Overview</a>
	  <ul>
	    <li><a>Domain specific languages</a>
	      <ul>
		<li><a href="material-properties.html">Material properties</a></li>
		<li><a href="behaviours.html">Mechanical behaviours</a></li>
		<li><a href="models.html">Models</a></li>
	      </ul>
            </li>
	    <li><a href="interfaces.html">Available interfaces</a></li>
	    <li><a href="associated-projects.html">Associated projects</a></li>
     	    <li><a>Tools</a>
	      <ul>
	        <li><a href="mfront-doc.html">mfront-doc</a></li>
	        <li><a href="mtest.html">mtest</a></li>
	        <li><a href="mfm.html">mfm</a></li>
	        <li><a href="mfm-test-generator.html">mfm-test-generator</a></li>
	        <li><a href="tfel-check.html">tfel-check</a></li>
	      </ul>
	    </li>
	  </ul>
	</li>
	<li><a>Getting started</a>
	  <ul>
	    <li><a href="https://github.com/thelfer/tfel/">Github repository</a></li>
	    <li><a href="https://github.com/thelfer/tfel/releases">Download</a></li>
	    <li><a href="release-notes.html">Release notes</a>
	      <ul>
		<li><a>Versions 2.0.x</a>
                  <ul>
                    <li><a href="release-notes.html">Versions prior to 2.0.5</a></li>
	 	    <li><a href="release-notes-2.0.5.html">Version 2.0.5</a></li>
                  </ul>
		</li>
		<li><a>Versions 3.0.x</a>
                  <ul>
		    <li><a href="release-notes-3.0.html">Version 3.0.0</a></li>
		    <li><a href="release-notes-3.0.1.html">Version 3.0.1</a></li>
		    <li><a href="release-notes-3.0.2.html">Version 3.0.2</a></li>
		    <li><a href="release-notes-3.0.3.html">Version 3.0.3</a></li>
		    <li><a href="release-notes-3.0.4.html">Version 3.0.4</a></li>
		    <li><a href="release-notes-3.0.5.html">Version 3.0.5</a></li>
		    <li><a href="release-notes-3.0.6.html">Version 3.0.6</a></li>
		    <li><a href="release-notes-3.0.7.html">Version 3.0.7</a></li>
		    <li><a href="release-notes-3.0.8.html">Version 3.0.8</a></li>
		    <li><a href="release-notes-3.0.9.html">Version 3.0.9</a></li>
		    <li><a href="release-notes-3.0.10.html">Version 3.0.10</a></li>
		    <li><a href="release-notes-3.0.11.html">Version 3.0.11</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.1.x</a>
		  <ul>
		    <li><a href="release-notes-3.1.html">Version 3.1.0</a></li>
		    <li><a href="release-notes-3.1.1.html">Version 3.1.1</a></li>
		    <li><a href="release-notes-3.1.2.html">Version 3.1.2</a></li>
		    <li><a href="release-notes-3.1.3.html">Version 3.1.3</a></li>
		    <li><a href="release-notes-3.1.4.html">Version 3.1.4</a></li>
		    <li><a href="release-notes-3.1.5.html">Version 3.1.5</a></li>
		    <li><a href="release-notes-3.1.6.html">Version 3.1.6</a></li>
		    <li><a href="release-notes-3.1.7.html">Version 3.1.7</a></li>
		    <li><a href="release-notes-3.1.8.html">Version 3.1.8</a></li>
		    <li><a href="release-notes-3.1.9.html">Version 3.1.9</a></li>
		    <li><a href="release-notes-3.1.10.html">Version 3.1.10</a></li>
		    <li><a href="release-notes-3.1.11.html">Version 3.1.11</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.2.x</a>
		  <ul>
		    <li><a href="release-notes-3.2.html">Version 3.2.0</a></li>
		    <li><a href="release-notes-3.2.1.html">Version 3.2.1</a></li>
		    <li><a href="release-notes-3.2.2.html">Version 3.2.2</a></li>
		    <li><a href="release-notes-3.2.3.html">Version 3.2.3</a></li>
		    <li><a href="release-notes-3.2.4.html">Version 3.2.4</a></li>
		    <li><a href="release-notes-3.2.5.html">Version 3.2.5</a></li>
		    <li><a href="release-notes-3.2.6.html">Version 3.2.6</a></li>
		    <li><a href="release-notes-3.2.7.html">Version 3.2.7</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.3.x</a>
		  <ul>
		    <li><a href="release-notes-3.3.html">Version 3.3.0</a></li>
		    <li><a href="release-notes-3.3.1.html">Version 3.3.1</a></li>
		    <li><a href="release-notes-3.3.1.html">Version 3.3.2</a></li>
		    <li><a href="release-notes-3.3.2.html">Version 3.3.2</a></li>
		    <li><a href="release-notes-3.3.3.html">Version 3.3.3</a></li>
		    <li><a href="release-notes-3.3.4.html">Version 3.3.4</a></li>
		  </ul>
		</li>
		<li><a>Versions 3.4.x</a>
		  <ul>
		    <li><a href="release-notes-3.4.html">Version 3.4.0</a></li>
		    <li><a href="release-notes-3.4.1.html">Version 3.4.1</a></li>
		    <li><a href="release-notes-3.4.2.html">Version 3.4.2</a></li>
		    <li><a href="release-notes-3.4.3.html">Version 3.4.3</a></li>
		    <li><a href="release-notes-3.4.4.html">Version 3.4.4</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.0.x</a>
		  <ul>
		    <li><a href="release-notes-4.0.html">Version 4.0.0</a></li>
		    <li><a href="release-notes-4.0.1.html">Version 4.0.1</a></li>
		  </ul>
		</li>
		<li><a>Versions 4.1.x</a>
		  <ul>
		    <li><a href="release-notes-4.1.html">Version 4.1.0</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a href="coverity-scan.html">Coverity scan</a></li>
	    <li><a href="install.html">Installation</a></li>
	  </ul>
	</li>
	<li><a>Documentation</a>
	  <ul>
	    <li><a href="documentations.html">General documentation</a></li>
	    <li><a href="gallery.html">Gallery</a></li>
	    <li><a href="http://tfel.sourceforge.net/doxygen/index.html">Doxygen documentation</a></li>
	    <li><a>Behaviours</a>
	      <ul>
		<li><a href="tutorial.html">Tutorial</a></li>
		<li><a href="implicit-dsl.html">The Implicit DSL</a></li>
		<li><a href="benchmark.html">Benchmark</a></li>
		<li><a href="parameters.html">Parameters</a></li>
		<li><a href="BehaviourBricks.html">Behaviour bricks</a></li>
		<li><a href="interfaces.html">Solver interfaces</a>
		  <ul>
		    <li><a href="castem.html">Cast3M</a></li>
		    <li><a href="amitex.html">AMITEX_FFTP</a></li>
		    <li><a href="aster.html">Code-Aster</a></li>
    		    <li><a href="abaqus.html">Abaqus</a></li>
    		    <li><a href="epx.html">EUROPLEXUS</a></li>
		    <li><a href="zmat.html">ZeBuLoN</a></li>
   		    <li><a href="calculix.html">CalculiX</a></li>
		    <!-- <li><a >TMFFT</a></li> -->
		    <li><a href="cyrano.html">Cyrano</a></li>
   		    <li><a href="generic-behaviours-interface.html">Generic Behaviour Interface</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a>TFEL libraries</a>
	      <ul>
		<li><a href="tfel-math.html">TFEL/Math</a></li>
		<li><a href="tfel-material.html">TFEL/Material</a></li>
	      </ul>
	    </li>
	    <li><a>Python modules</a>
	      <ul>
		<li><a href="tfel-python.html">TFEL modules</a></li>
		<li><a href="mfront-python.html">mfront module</a></li>
		<li><a href="mtest-python.html">mtest module</a></li>
	      </ul>
	    </li>
	    <li><a>MFront keywords</a>
	      <ul>
		<li><a href="DefaultDSL-keywords.html">DefaultDSL</a></li> 
		<li><a href="DefaultCZMDSL-keywords.html">DefaultCZMDSL</a></li> 
		<li><a href="DefaultFiniteStrainDSL-keywords.html">DefaultFiniteStrainDSL</a></li> 
		<li><a href="Implicit-keywords.html">Implicit</a></li> 
		<li><a href="ImplicitFiniteStrain-keywords.html">ImplicitFiniteStrain</a></li> 
		<li><a href="ImplicitII-keywords.html">ImplicitII</a></li> 
		<li><a href="IsotropicMisesCreep-keywords.html">IsotropicMisesCreep</a></li> 
		<li><a href="IsotropicPlasticMisesFlow-keywords.html">IsotropicPlasticMisesFlow</a></li> 
		<li><a href="IsotropicStrainHardeningMisesCreep-keywords.html">IsotropicStrainHardeningMisesCreep</a></li> 
		<li><a href="MaterialLaw-keywords.html">MaterialLaw</a></li> 
		<li><a href="Model-keywords.html">Model</a></li> 
		<li><a href="MultipleIsotropicMisesFlows-keywords.html">MultipleIsotropicMisesFlows</a></li> 
		<li><a href="RungeKutta-keywords.html">RungeKutta</a></li> 
	      </ul>
	    </li>
	    <li><a href="MTest-keywords.html">MTest keywords</a></li>
	    <li><a href="physical-constants.html">Physical constants</a></li>
	    <li><a href="glossary.html">Glossary</a></li>
	    <li><a href="publications.html">Publications</a></li>
	    <li><a href="faq.html">FAQ</a></li>
	    <li><a href="about.html">About</a></li>
	  </ul>
	</li>
	<li><a>Contributing</a>
	  <ul>
	    <li><a href="svn.html">Access to source repositories</a></li>
	    <li><a href="devel.html">Development guidelines</a></li>
	    <li><a href="https://github.com/thelfer/tfel/issues">Report bugs</a></li>
	  </ul>
	</li>
	<li><a>Getting Help</a>
	  <ul>
	    <li><a href="search.html">Search on this site</a></li>
	    <li><a href="https://github.com/thelfer/tfel/discussions">Forum</a></li>
	    <li><a href="http://sourceforge.net/p/tfel/tfel">Mailing lists</a></li>
	    <li><a href="mailto:tfel-contact@cea.fr">Contact</a></li>
	  </ul>
	</li>
      </ul>
    </header>
<div id="header">
<h1 class="title">Release notes of the 4.1 version of <code>TFEL</code>, <code>MFront</code> and <code>MTest</code></h1>
<h2 class="author">Thomas Helfer</h2>
<h3 class="date">2022</h3>
</div>
<div id="TOC">
<ul>
<li><a href="#known-incompatiblities"><span class="toc-section-number">1</span> Known incompatiblities</a>
<ul>
<li><a href="#new-reserved-keywords-in-mfront"><span class="toc-section-number">1.1</span> New reserved keywords in <code>MFront</code></a></li>
</ul></li>
<li><a href="#tfelconfig-improvements"><span class="toc-section-number">2</span> <code>TFEL/Config</code> improvements</a>
<ul>
<li><a href="#sec:tfel_4.1:tfel_config:device_specification"><span class="toc-section-number">2.1</span> The <code>TFEL_HOST</code>, <code>TFEL_DEVICE</code> and <code>TFEL_HOST_DEVICE</code> macros</a></li>
</ul></li>
<li><a href="#tfelexceptions-improvements"><span class="toc-section-number">3</span> <code>TFEL/Exceptions</code> improvements</a>
<ul>
<li><a href="#sec:tfel_4.1:tfel_exception:reportContractViolation_gpu"><span class="toc-section-number">3.1</span> Disabling <code>reportContractViolation</code> on GPUs</a></li>
</ul></li>
<li><a href="#tfelsystem-improvements"><span class="toc-section-number">4</span> <code>TFEL/System</code> improvements</a>
<ul>
<li><a href="#improvements-to-the-externallibrarymanager-class"><span class="toc-section-number">4.1</span> Improvements to the <code>ExternalLibraryManager</code> class</a></li>
<li><a href="#new-class-externalmaterialknowledgedescription"><span class="toc-section-number">4.2</span> New class <code>ExternalMaterialKnowledgeDescription</code></a></li>
<li><a href="#improvements-to-the-externalmaterialpropertydescription-class"><span class="toc-section-number">4.3</span> Improvements to the <code>ExternalMaterialPropertyDescription</code> class</a></li>
<li><a href="#improvements-to-the-externalbehaviourdescription-class"><span class="toc-section-number">4.4</span> Improvements to the <code>ExternalBehaviourDescription</code> class</a></li>
</ul></li>
<li><a href="#tfelmath-improvements"><span class="toc-section-number">5</span> <code>TFEL/Math</code> improvements</a>
<ul>
<li><a href="#generalized-usage-of-the-constexpr-keyword"><span class="toc-section-number">5.1</span> Generalized usage of the <code>constexpr</code> keyword</a></li>
<li><a href="#port-to-gpus"><span class="toc-section-number">5.2</span> Port to GPUs</a></li>
<li><a href="#miscellaneous-improvements"><span class="toc-section-number">5.3</span> Miscellaneous improvements</a></li>
</ul></li>
<li><a href="#tfelmathparser-improvements"><span class="toc-section-number">6</span> <code>TFEL/Math/Parser</code> improvements</a>
<ul>
<li><a href="#improved-differentiation"><span class="toc-section-number">6.1</span> Improved differentiation</a></li>
</ul></li>
<li><a href="#tfelmaterial-improvements"><span class="toc-section-number">7</span> <code>TFEL/Material</code> improvements</a>
<ul>
<li><a href="#sec:tfel_4.1:tfel_material:constexpr"><span class="toc-section-number">7.1</span> Generalized usage of the <code>constexpr</code> keyword</a></li>
<li><a href="#sec:tfel_4.1:tfel_material:gpu"><span class="toc-section-number">7.2</span> Port to GPUs</a></li>
</ul></li>
<li><a href="#mfront-improvements"><span class="toc-section-number">8</span> <code>MFront</code> improvements</a>
<ul>
<li><a href="#options-to-domain-specific-languages"><span class="toc-section-number">8.1</span> Options to domain specific languages</a></li>
<li><a href="#sec:tfel_4.1:mfront:initialize_functions"><span class="toc-section-number">8.2</span> Initialize functions for behaviours</a></li>
<li><a href="#sec:tfel_4.1:mfront:postprocessings"><span class="toc-section-number">8.3</span> Post-processings of behaviours</a></li>
<li><a href="#sec:tfel_4.1:mfront:madnex_search_paths"><span class="toc-section-number">8.4</span> Add a <code>madnex</code> file to the search paths</a></li>
<li><a href="#sec:tfel_4.1:mfront:automatic_madnex_file_search_path"><span class="toc-section-number">8.5</span> Automatic declaration of a <code>madnex</code> input file as a <code>madnex</code> search path</a></li>
<li><a href="#improvements-to-the-standardelastoviscoplasticity-brick"><span class="toc-section-number">8.6</span> Improvements to the <code>StandardElastoViscoPlasticity</code> brick</a></li>
<li><a href="#improvements-to-the-rungekutta-domain-specific-language"><span class="toc-section-number">8.7</span> Improvements to the <code>RungeKutta</code> domain specific language</a></li>
<li><a href="#new-domain-specific-language-implicitczmdsl"><span class="toc-section-number">8.8</span> New domain specific language <code>ImplicitCZMDSL</code></a></li>
<li><a href="#sec:tfel:4.1:mfront:generic_material_property_interface"><span class="toc-section-number">8.9</span> <code>generic</code> interface for material properties</a></li>
<li><a href="#sec:tfel:4.1:mfront:generic_model_interface"><span class="toc-section-number">8.10</span> <code>generic</code> interface for point-wise models implemented using the <code>Model</code> domain specific language</a></li>
<li><a href="#miscellaneous-improvements-1"><span class="toc-section-number">8.11</span> Miscellaneous improvements</a></li>
</ul></li>
<li><a href="#mtest-improvements"><span class="toc-section-number">9</span> <code>MTest</code> improvements</a>
<ul>
<li><a href="#sec:tfel:4.1:mtest:madnex_support"><span class="toc-section-number">9.1</span> Support for <code>madnex</code> file</a></li>
<li><a href="#sec:tfel_4.1:mtest:mandrel"><span class="toc-section-number">9.2</span> Support for a boundary condition modelling the effet of a mandrel in pipe modelling</a></li>
<li><a href="#sec:tfel_4.1:mtest:small_strain_tridimensional_behaviour_wrapper"><span class="toc-section-number">9.3</span> Wrappers around <code>3D</code> behaviours</a></li>
<li><a href="#sec:tfel_4.1:mtest:rotation_matrix"><span class="toc-section-number">9.4</span> A more flexible declaration of the rotation matrix</a></li>
<li><a href="#sec:tfel_4.1:mtest:aster_logarithmic_strain_wrapper"><span class="toc-section-number">9.5</span> Wrapper around behaviours written in the logarithmic strain framework generated with the <code>aster</code> interface</a></li>
<li><a href="#sec:tfel:4.1:mtest:generic_material_property_support"><span class="toc-section-number">9.6</span> Support for material properties built using the <code>generic</code> interface</a></li>
</ul></li>
<li><a href="#mfm-test-generator-improvements"><span class="toc-section-number">10</span> <code>mfm-test-generator</code> improvements</a>
<ul>
<li><a href="#sec:tfel:4.1:mfmtg:madnex_support"><span class="toc-section-number">10.1</span> Support for <code>madnex</code> file</a></li>
</ul></li>
<li><a href="#improvements-to-the-python-bindings"><span class="toc-section-number">11</span> Improvements to the <code>python</code> bindings</a>
<ul>
<li><a href="#improvements-to-the-tfelsystem-python-module"><span class="toc-section-number">11.1</span> Improvements to the <code>TFEL/System</code> <code>python</code> module</a></li>
<li><a href="#improvements-to-the-mtest-python-module"><span class="toc-section-number">11.2</span> Improvements to the <code>mtest</code> <code>python</code> module</a></li>
<li><a href="#sec:tfel_4.1:pymtest:behaviour_constructor"><span class="toc-section-number">11.3</span> Support of named arguments in the constructor of the <code>Behaviour</code> class</a></li>
<li><a href="#sec:tfel:4.1:python:mtest:export_mtest_file"><span class="toc-section-number">11.4</span> Exporting an <code>MTest</code>test to a <code>madnex</code> file</a></li>
<li><a href="#the-mfm_test_generator-python-module"><span class="toc-section-number">11.5</span> The <code>mfm_test_generator</code> python module</a></li>
</ul></li>
<li><a href="#mfront-query-improvements"><span class="toc-section-number">12</span> <code>mfront-query</code> improvements</a>
<ul>
<li><a href="#general-queries"><span class="toc-section-number">12.1</span> General queries</a></li>
<li><a href="#new-material-property-query"><span class="toc-section-number">12.2</span> New material property query</a></li>
<li><a href="#new-behaviour-queries"><span class="toc-section-number">12.3</span> New behaviour queries</a></li>
</ul></li>
<li><a href="#tfel-check-improvements"><span class="toc-section-number">13</span> <code>tfel-check</code> improvements</a>
<ul>
<li><a href="#sec:tfel_4.1:tfel_check:default_substitutions"><span class="toc-section-number">13.1</span> Automatic declaration of substitutions for <code>TFEL</code> executables and <code>python</code> interpreter</a></li>
</ul></li>
<li><a href="#issues-fixed"><span class="toc-section-number">14</span> Issues fixed</a>
<ul>
<li><a href="#issue-210-tfel-check-allow-to-split-command-in-multiple-strings"><span class="toc-section-number">14.1</span> Issue #210: [tfel-check] Allow to split command in multiple strings</a></li>
<li><a href="#issue-209-tfel-utilities-convertion-from-data-to-stdvector-and-stdmap-shall-work-if-the-object-is-empty"><span class="toc-section-number">14.2</span> Issue #209: [tfel-utilities] Convertion from <code>Data</code> to <code>std::vector</code> and <code>std::map</code> shall work if the object is empty</a></li>
<li><a href="#issue-207-tfel-check-allow-comments-in-config-files"><span class="toc-section-number">14.3</span> Issue #207: [tfel-check] allow comments in config files</a></li>
<li><a href="#issue-200-mfront-generate-a-setparameter-function-for-material-properties-generated-with-the-python-interface"><span class="toc-section-number">14.4</span> Issue #200: [mfront] Generate a <code>setParameter</code> function for material properties generated with the <code>python</code> interface</a></li>
<li><a href="#issue-199-mfront-query-add-the---parameters-file-query-for-material-properties"><span class="toc-section-number">14.5</span> Issue #199: [mfront-query] Add the <code>--parameters-file</code> query for material properties</a></li>
<li><a href="#issue-197-mfront-extension-of-the-derivative_type-metafunction-to-higher-order-derivatives"><span class="toc-section-number">14.6</span> Issue #197: [mfront] Extension of the <code>derivative_type</code> metafunction to higher order derivatives</a></li>
<li><a href="#issue-192-tfelsystem-access-to-default-values-of-parameters-of-a-material-property-through-the-externalmaterialpropertydescription-class"><span class="toc-section-number">14.7</span> Issue #192: [TFEL/System] Access to default values of parameters of a material property through the <code>ExternalMaterialPropertyDescription</code> class</a></li>
<li><a href="#issue-191-tfelsystem-ability-to-request-bounds-of-variables-inputs-outputs-of-a-material-property-in-the-externalmaterialpropertydescription-class"><span class="toc-section-number">14.8</span> Issue #191: [TFEL/System] Ability to request bounds of variables (inputs, outputs) of a material property in the <code>ExternalMaterialPropertyDescription</code> class</a></li>
<li><a href="#issue-187-mfront-get-output-from-compiled-file-through-python-bindings"><span class="toc-section-number">14.9</span> Issue #187: [mfront] Get <code>@Output</code> from compiled file through <code>python</code> bindings</a></li>
<li><a href="#issue-186-mfront-get-material-law-author-date-description-from-compiled-file-through-python-binding"><span class="toc-section-number">14.10</span> Issue #186: [mfront] Get <code>@Material</code>, <code>@Law</code>, <code>@Author</code>, <code>@Date</code>, <code>@Description</code> from compiled file through Python binding</a></li>
<li><a href="#issue-183-mfront-the-rkcastem-algorithm-assumes-that-a-variable-young-is-defined"><span class="toc-section-number">14.11</span> Issue #183: [mfront] The <code>rkCastem</code> algorithm assumes that a variable <code>young</code> is defined</a></li>
<li><a href="#issue-181-mfront-query-add-query-about-the-output-of-a-material-property"><span class="toc-section-number">14.12</span> Issue #181: [mfront-query] add query about the output of a material property</a></li>
<li><a href="#issue-180-mfront-query-add-query-about-the-inputs-of-a-material-property"><span class="toc-section-number">14.13</span> Issue #180: [mfront-query] add query about the inputs of a material property</a></li>
<li><a href="#issue-177-mtest-support-of-material-properties-generated-with-the-generic-interface"><span class="toc-section-number">14.14</span> Issue #177: [mtest] Support of material properties generated with the generic interface</a></li>
<li><a href="#sec:tfel:4.1:issue:172"><span class="toc-section-number">14.15</span> Issue #172: [tfel-math-parser] Add the ability to derive the power function enhancement</a></li>
<li><a href="#issue-171-tfel-math-parser-correct-derivative-of-exponents-bug"><span class="toc-section-number">14.16</span> Issue #171: ￼[tfel-math-parser] Correct derivative of exponents bug</a></li>
<li><a href="#issue-170-tfel-math-parser-add-support-for-integer-exponent"><span class="toc-section-number">14.17</span> Issue #170: [tfel-math-parser] Add support for integer exponent</a></li>
<li><a href="#issue-169-tfel-math-parser-add-feature-to-simplify-formula"><span class="toc-section-number">14.18</span> Issue #169: [tfel-math-parser] Add feature to simplify formula</a></li>
<li><a href="#issue-157-disable-reportcontractviolation-on-gpus"><span class="toc-section-number">14.19</span> Issue #157: Disable <code>reportContractViolation</code> on GPUs</a></li>
<li><a href="#issue-150-tfelmaterial-add-device-specification"><span class="toc-section-number">14.20</span> Issue #150: [TFEL/Material] Add device specification</a></li>
<li><a href="#issue-148-tfelmaterial-constexpr-all-the-things"><span class="toc-section-number">14.21</span> Issue #148: [TFEL/Material] <code>constexpr</code> all the things</a></li>
<li><a href="#issue-145-mfront-automatically-add-a-madnex-input-file-to-the-search-paths"><span class="toc-section-number">14.22</span> Issue #145: [mfront] Automatically add a madnex input file to the search paths</a></li>
<li><a href="#issue-144-mfront-query-list-dependencies-of-a-mfront-file"><span class="toc-section-number">14.23</span> Issue #144: [mfront-query] List dependencies of a <code>mfront</code> file</a></li>
<li><a href="#issue-143-mfront-add-the-ability-to-append-a-madnex-paths-to-the-search-paths"><span class="toc-section-number">14.24</span> Issue #143: [mfront] Add the ability to append a madnex paths to the search paths</a></li>
<li><a href="#issue-125-mfront-remove-behaviour-sources-if-not-needed"><span class="toc-section-number">14.25</span> Issue #125: [mfront] Remove behaviour sources if not needed</a></li>
<li><a href="#issue-124-mfront-add-dsl-option-to-disable-runtime-change-of-the-out-of-bound-policy"><span class="toc-section-number">14.26</span> Issue #124: [mfront] Add DSL option to disable runtime change of the out of bound policy</a></li>
<li><a href="#issue-123-mfront-add-dsl-option-to-change-the-default-out-of-bounds-policy"><span class="toc-section-number">14.27</span> Issue #123: [mfront] Add DSL option to change the default out of bounds policy</a></li>
<li><a href="#issue-122-mfront-remove-usage-of-exceptions-in-the-computetangentoperator-method-generated-by-the-implicit-dsl"><span class="toc-section-number">14.28</span> Issue #122: [mfront] remove usage of exceptions in the computeTangentOperator method generated by the <code>Implicit</code> DSL</a></li>
<li><a href="#issue-111-mtest-support-for-madnex-file"><span class="toc-section-number">14.29</span> Issue #111: [mtest] Support for <code>madnex</code> file</a></li>
<li><a href="#issue-108-mtest-support-for-extended-types-in-mtest"><span class="toc-section-number">14.30</span> Issue #108: [mtest] Support for extended types in MTest</a></li>
<li><a href="#issue-94-mfront-add-option-to-disable-initialization-of-parameters-from-text-file"><span class="toc-section-number">14.31</span> Issue 94: [mfront] Add option to disable initialization of parameters from text file</a></li>
<li><a href="#issue-92-mfront-create-a-generic-interface-for-point-wise-models"><span class="toc-section-number">14.32</span> Issue 92: [mfront] create a generic interface for point wise models</a></li>
<li><a href="#issue-91-mfront-define-build-identifier-using-options"><span class="toc-section-number">14.33</span> Issue 91: [mfront] define build identifier using options</a></li>
<li><a href="#issue-90-mfront-create-a-generic-interface-for-material-properties"><span class="toc-section-number">14.34</span> Issue 90: [mfront] create a generic interface for material properties</a></li>
<li><a href="#issue-83-mfront-add-a-command-line-argument-to-retrieve-the-list-of-options-associated-with-a-domain-specific-language"><span class="toc-section-number">14.35</span> Issue #83: [mfront] Add a command line argument to retrieve the list of options associated with a domain specific language</a></li>
<li><a href="#issue-82-mfront-ability-to-define-dsl-options-on-the-command-line"><span class="toc-section-number">14.36</span> Issue #82: [mfront] Ability to define DSL options on the command line</a></li>
<li><a href="#issue-55-mtest-creation-of-a-wrapper-around-behaviours-written-in-the-logarithmic-strain-framework-generated-with-the-aster-interface"><span class="toc-section-number">14.37</span> Issue #55: [mtest] Creation of a wrapper around behaviours written in the logarithmic strain framework generated with the <code>aster</code> interface</a></li>
<li><a href="#issue-57-gallery-mistakes-in-the-drucker-prager-cap-model-of-the-gallery"><span class="toc-section-number">14.38</span> Issue #57: [gallery] Mistakes in the Drucker Prager Cap model of the gallery</a></li>
<li><a href="#sec:tfel:4.1:issue:50"><span class="toc-section-number">14.39</span> Issue #50: [mfront] Options to avoid the automatic declaration of the temperature as an external state variable</a></li>
<li><a href="#issue-44-mtest-add-support-for-a-boundary-condition-modelling-the-effet-of-a-mandrel-in-pipe-modelling"><span class="toc-section-number">14.40</span> Issue #44: [mtest] Add support for a boundary condition modelling the effet of a mandrel in pipe modelling</a></li>
<li><a href="#issue-39-tfel-config-add-query-associated-with-python-bindings-support"><span class="toc-section-number">14.41</span> Issue #39: [tfel-config] Add query associated with python bindings support</a></li>
<li><a href="#issue-38-tfel-config-add-query-associated-with-madnex-support"><span class="toc-section-number">14.42</span> Issue #38: [tfel-config] Add query associated with <code>madnex</code> support</a></li>
<li><a href="#issue-36-mfront-improved-support-for-mtest-file-generation-all-kind-of-state-variables"><span class="toc-section-number">14.43</span> Issue #36: [mfront] Improved support for <code>MTest</code> file generation (all kind of state variables)</a></li>
<li><a href="#issue-28-mtest-support-of-tensorial-external-state-variables"><span class="toc-section-number">14.44</span> Issue #28: [mtest] Support of tensorial external state variables</a></li>
<li><a href="#issue-28-mtest-support-of-tensorial-external-state-variables-1"><span class="toc-section-number">14.45</span> Issue #28: [mtest] Support of tensorial external state variables</a></li>
<li><a href="#issue-27-mfront-better-support-of-tensorial-external-state-variables"><span class="toc-section-number">14.46</span> Issue #27: [mfront] Better support of tensorial external state variables</a></li>
<li><a href="#issue-26-dont-use-explicit-instanciation-for-static-variables"><span class="toc-section-number">14.47</span> Issue #26: Don’t use explicit instanciation for static variables</a></li>
<li><a href="#issue-25-mfront-add-ability-to-define-initialisation-functions"><span class="toc-section-number">14.48</span> Issue #25: [mfront] Add ability to define initialisation functions</a></li>
<li><a href="#issue-24-mfront-add-ability-to-define-post-processings"><span class="toc-section-number">14.49</span> Issue #24: [mfront] Add ability to define post-processings</a></li>
<li><a href="#issue-23-mfront-remove-usage-of-c-reserved-variables-names"><span class="toc-section-number">14.50</span> Issue #23: [mfront] Remove usage of C++ reserved variables names</a></li>
<li><a href="#issue-22-mfront-option-to-treat-parameters-as-static-variables"><span class="toc-section-number">14.51</span> Issue #22 : [mfront] Option to treat parameters as static variables</a></li>
<li><a href="#issue-20-mtest-declaration-of-a-behaviour-wrapper-in-python-module"><span class="toc-section-number">14.52</span> Issue #20: [mtest] Declaration of a behaviour wrapper in python module</a></li>
<li><a href="#issue-18-mtest-usage-of-a-3d-behaviour-in-ptest"><span class="toc-section-number">14.53</span> Issue #18: [mtest] Usage of a <code>3D</code> behaviour in <code>ptest</code></a></li>
<li><a href="#issue-15-mtest-new-option-for-the-declaration-of-the-rotation-matrix-in-mtest"><span class="toc-section-number">14.54</span> Issue #15: [mtest] New option for the declaration of the rotation matrix in <code>MTest</code></a></li>
</ul></li>
</ul>
</div>
<p>The page describes the new functionalities of Version 4.1 of the <code>TFEL</code> project.</p>
<h1 data-number="1" id="known-incompatiblities"><span class="header-section-number">1</span> Known incompatiblities</h1>
<h2 data-number="1.1" id="new-reserved-keywords-in-mfront"><span class="header-section-number">1.1</span> New reserved keywords in <code>MFront</code></h2>
<p>As described in Section 8.2, behaviours can now declare initialize functions. Each initialize function has a dedicated name. If <code>@initialize_function@</code> be the name of a initialize function, <code>MFront</code> will automatically register <code>execute@initialize_function@IntializeFunction</code> as a member name.</p>
<p>As described in Section 8.3, behaviours can now declare post-processings. Each post-processing has a dedicated name. If <code>@postprocessing@</code> be the name of a post-processing, <code>MFront</code> will automatically register <code>execute@postprocessing@PostProcessing</code> as a member name.</p>
<h1 data-number="2" id="tfelconfig-improvements"><span class="header-section-number">2</span> <code>TFEL/Config</code> improvements</h1>
<h2 data-number="2.1" id="sec:tfel_4.1:tfel_config:device_specification"><span class="header-section-number">2.1</span> The <code>TFEL_HOST</code>, <code>TFEL_DEVICE</code> and <code>TFEL_HOST_DEVICE</code> macros</h2>
<p>The <code>TFEL_HOST</code> decorator can be used to mark functions that shall be used on the host.</p>
<p>The <code>TFEL_DEVICE</code> decorator can be used to mark functions that shall be used on the device.</p>
<p>The <code>TFEL_HOST_DEVICE</code> decorator can be used to mark functions that shall be used on the host and on the device.</p>
<h1 data-number="3" id="tfelexceptions-improvements"><span class="header-section-number">3</span> <code>TFEL/Exceptions</code> improvements</h1>
<h2 data-number="3.1" id="sec:tfel_4.1:tfel_exception:reportContractViolation_gpu"><span class="header-section-number">3.1</span> Disabling <code>reportContractViolation</code> on GPUs</h2>
<p>The <code>TFEL_NO_REPORT_CONTRACT_VIOLATION</code> macro replaces the standard implementation of the <code>reportContractViolation</code> by a dummy version which does nothing.</p>
<p>This macros is automatically defined with <code>CUDA</code> and <code>SYCL</code>.</p>
<h1 data-number="4" id="tfelsystem-improvements"><span class="header-section-number">4</span> <code>TFEL/System</code> improvements</h1>
<h2 data-number="4.1" id="improvements-to-the-externallibrarymanager-class"><span class="header-section-number">4.1</span> Improvements to the <code>ExternalLibraryManager</code> class</h2>
<h3 data-number="4.1.1" id="sec:tfel_4.1:system:elm:initialize_functions"><span class="header-section-number">4.1.1</span> Retrieving initialize functions generated by the <code>generic</code> interface</h3>
<p>The <code>generic</code> interface generates a function dedicated for each initialize function and each modelling hypothesis supported (see Section 8.2 for details about initialize functions).</p>
<p>The <code>ExternalLibraryManager</code> class now exposes the following methods:</p>
<ul>
<li><code>getGenericBehaviourInitializeFunctions</code>, which returns the initialize functions associated with a behaviour.</li>
<li><code>getGenericBehaviourInitializeFunction</code>, which returns the function implementing a initialize function.</li>
<li><code>getGenericBehaviourInitializeFunctionOutputs</code>, which returns the outputs of a initialize function function.</li>
<li><code>getGenericBehaviourInitializeFunctionOutputs</code>, which returns the types of the outputs of a initialize function function.</li>
</ul>
<h3 data-number="4.1.2" id="sec:tfel_4.1:system:elm:postprocessings"><span class="header-section-number">4.1.2</span> Retrieving post-processing functions generated by the <code>generic</code> interface</h3>
<p>The <code>generic</code> interface generates a function dedicated for each post-processing and each modelling hypothesis supported (see Section 8.3 for details about post-processings).</p>
<p>The <code>ExternalLibraryManager</code> class now exposes the following methods:</p>
<ul>
<li><code>getGenericBehaviourPostProcessingFunctions</code>, which returns the post-processings associated with a behaviour.</li>
<li><code>getGenericBehaviourPostProcessingFunction</code>, which returns the function implementing a post-processing.</li>
<li><code>getGenericBehaviourPostProcessingFunctionOutputs</code>, which returns the outputs of a post-processing function.</li>
<li><code>getGenericBehaviourPostProcessingFunctionOutputs</code>, which returns the types of the outputs of a post-processing function.</li>
</ul>
<h3 data-number="4.1.3" id="the-hastemperaturebeenremovedfromexternalstatevariables-method"><span class="header-section-number">4.1.3</span> The <code>hasTemperatureBeenRemovedFromExternalStateVariables</code> method</h3>
<p>In previous versions of <code>MFront</code>, the temperature was automatically defined as the first external state variable by domain specific languages handling behaviours.</p>
<p>By conventions, for consistency with behaviour interfaces derived from the <code>Abaqus</code>’ <code>UMAT</code> interface, the temperature was removed from the list of external state variables exported by the behaviour. This list can be retrieved using the <code>getUMATExternalStateVariablesNames</code> method of the <code>ExternalLibraryManager</code> class.</p>
<p>Following Issue #50 (see Sections 8.1.3 and 14.39), this automatic declaration is now optional.</p>
<p>For backward compatibility, the <code>getUMATExternalStateVariablesNames</code> method still return the list of external state variables without the temperature. To know if the temperature was removed, the user must call the <code>hasTemperatureBeenRemovedFromExternalStateVariables</code> method.</p>
<p>In pratice, if the <code>hasTemperatureBeenRemovedFromExternalStateVariables</code> method returns <code>true</code>, the full list of external state variables is given by the temperature followed by the list of external state variables returned by the <code>getUMATExternalStateVariablesNames</code> method.</p>
<h3 data-number="4.1.4" id="sec:tfel_4.1:system:elm:getLaw"><span class="header-section-number">4.1.4</span> The <code>getLaw</code> method</h3>
<p>The <code>getLaw</code> method returns the law name associated with a material property as defined by the <code>@Law</code> keyword in <code>MFront</code>.</p>
<h3 data-number="4.1.5" id="sec:tfel_4.1:system:elm:getAuthor"><span class="header-section-number">4.1.5</span> The <code>getAuthor</code> method</h3>
<p>The <code>getAuthor</code> method returns the author name associated with an entry point as defined by the <code>@Author</code> keyword in <code>MFront</code>. If this author name is not defined, an empty string is returned.</p>
<h3 data-number="4.1.6" id="sec:tfel_4.1:system:elm:getDate"><span class="header-section-number">4.1.6</span> The <code>getDate</code> method</h3>
<p>The <code>getDate</code> method returns the date associated with an entry point as defined by the <code>@Date</code> keyword in <code>MFront</code>. If this date is not defined, an empty string is returned.</p>
<h3 data-number="4.1.7" id="sec:tfel_4.1:system:elm:getDescription"><span class="header-section-number">4.1.7</span> The <code>getDescription</code> method</h3>
<p>The <code>getDescription</code> method returns the description associated with an entry point as defined by the <code>@Description</code> keyword in <code>MFront</code>. If this description is not defined, an empty string is returned.</p>
<h3 data-number="4.1.8" id="sec:tfel_4.1:system:elm:getMaterialPropertyOutput"><span class="header-section-number">4.1.8</span> The <code>getMaterialPropertyOutput</code> method</h3>
<p>The <code>getMaterialPropertyOutput</code> method returns the external name associated with the output of a material property.</p>
<h2 data-number="4.2" id="new-class-externalmaterialknowledgedescription"><span class="header-section-number">4.2</span> New class <code>ExternalMaterialKnowledgeDescription</code></h2>
<p>The <code>ExternalMaterialKnowledgeDescription</code> gathers information exported by <code>MFront</code> about an entry point (material property or behaviour). This class has been introduced as a base class for the <code>ExternalMaterialPropertyDescription</code> and <code>ExternalBehaviourDescription</code> classes.</p>
<p>This class exposes the following data members:</p>
<ul>
<li><code>library</code>: the name of the library</li>
<li><code>entry_point</code>: the name of the entry point</li>
<li><code>tfel_version</code>: the version of TFEL used to generate the entry point</li>
<li><code>build_id</code>: the build identifier (if any)</li>
<li><code>source</code>: the MFront source file</li>
<li><code>mfront_interface</code>: the name of the interface used to generate the entry point.</li>
<li><code>material</code>: the name of the material, as introduced by the <code>@Material</code> keyword in <code>MFront</code>.</li>
<li><code>author</code>: the author of the implementation, as introduced by the <code>@Author</code> keyword in <code>MFront</code>.</li>
<li><code>date</code>: the date of the implementation, as introduced by the <code>@Date</code> keyword in <code>MFront</code>.</li>
<li><code>description</code>: the description of the entry point, as introduced by the <code>@Description</code> keyword in <code>MFront</code>.</li>
</ul>
<h2 data-number="4.3" id="improvements-to-the-externalmaterialpropertydescription-class"><span class="header-section-number">4.3</span> Improvements to the <code>ExternalMaterialPropertyDescription</code> class</h2>
<p>The <code>ExternalMaterialPropertyDescription</code> class now inherits from the <code>ExternalMaterialKnowledgeDescription</code> class.</p>
<h3 data-number="4.3.1" id="new-data-members"><span class="header-section-number">4.3.1</span> New data members</h3>
<p>The <code>ExternalMaterialPropertyDescription</code> class exposes the following new data members:</p>
<ul>
<li><code>law</code>: the name of the law defining the material property as introduced by the <code>@Law</code> keyword.</li>
<li><code>output</code>: the external name of the ouput of the the material property.</li>
</ul>
<h3 data-number="4.3.2" id="new-member-functions"><span class="header-section-number">4.3.2</span> New member functions</h3>
<h4 data-number="4.3.2.1" id="sec:tfel_4.1:system:empd:getParameterDefaultValue"><span class="header-section-number">4.3.2.1</span> Retrieving the default value of a parameter</h4>
<p>The <code>getParameterDefaultValue</code> returns the default value of a parameter.</p>
<h4 data-number="4.3.2.2" id="sec:tfel_4.1:system:empd:bounds"><span class="header-section-number">4.3.2.2</span> Retrieving information about bounds of a variable</h4>
<ul>
<li>The <code>hasBounds</code> method indicates if the given variable has bounds (either lower or upper bounds).</li>
<li>The <code>hasLowerBound</code> method indicates if the given variable has a lower bound.</li>
<li>The <code>hasUpperBound</code> method indicates if the given variable has a upper bound.</li>
<li>The <code>getLowerBound</code> method returns the lower bound of the given variable.</li>
<li>The <code>getUpperBound</code> method returns the upper bound of the given variable.</li>
<li>The <code>hasPhysicalBounds</code> method indicates if the given variable has physical bounds (either lower or upper physical bounds).</li>
<li>The <code>hasLowerPhysicalBound</code> method indicates if the given variable has a lower physical bound.</li>
<li>The <code>hasUpperPhysicalBound</code> method indicates if the given variable has a upper physical bound.</li>
<li>The <code>getLowerPhysicalBound</code> method returns the lower physical bound of the given variable.</li>
<li>The <code>getUpperPhysicalBound</code> method returns the upper physical bound of the given variable.</li>
</ul>
<h2 data-number="4.4" id="improvements-to-the-externalbehaviourdescription-class"><span class="header-section-number">4.4</span> Improvements to the <code>ExternalBehaviourDescription</code> class</h2>
<p>The <code>ExternalBehaviourDescription</code> class now inherits from the <code>ExternalMaterialKnowledgeDescription</code> class.</p>
<h3 data-number="4.4.1" id="the-hastemperaturebeenremovedfromexternalstatevariables-data-member"><span class="header-section-number">4.4.1</span> The <code>hasTemperatureBeenRemovedFromExternalStateVariables</code> data member</h3>
<p>The <code>ExternalBehaviourDescription</code> class now have <code>hasTemperatureBeenRemovedFromExternalStateVariables</code> boolean public data member which states if the temperature was removed from the list of external state variables.</p>
<h1 data-number="5" id="tfelmath-improvements"><span class="header-section-number">5</span> <code>TFEL/Math</code> improvements</h1>
<h2 data-number="5.1" id="generalized-usage-of-the-constexpr-keyword"><span class="header-section-number">5.1</span> Generalized usage of the <code>constexpr</code> keyword</h2>
<h2 data-number="5.2" id="port-to-gpus"><span class="header-section-number">5.2</span> Port to GPUs</h2>
<h2 data-number="5.3" id="miscellaneous-improvements"><span class="header-section-number">5.3</span> Miscellaneous improvements</h2>
<h3 data-number="5.3.1" id="extension-of-the-derivative_type-metafunction-to-higher-order-derivatives"><span class="header-section-number">5.3.1</span> Extension of the <code>derivative_type</code> metafunction to higher order derivatives</h3>
<p>The <code>derivative_type</code> metafunction now accepts multiple arguments defining the variable types with respect to which the function type is derived.</p>
<h4 data-number="5.3.1.1" id="example"><span class="header-section-number">5.3.1.1</span> Example</h4>
<p>The declarations:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// declaration valid in Version 4.0 and 4.1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> d2E_dT2 = <span class="dt">derivative_type</span>&lt;<span class="dt">derivative_type</span>&lt;stress, temperature&gt;, temperature&gt;{};</span></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// declaration valid in Version 4.1</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> d2E_dT2 = <span class="dt">derivative_type</span>&lt;stress, temperature, temperature&gt;{};</span></code></pre></div>
<p>are now equivalent.</p>
<h1 data-number="6" id="tfelmathparser-improvements"><span class="header-section-number">6</span> <code>TFEL/Math/Parser</code> improvements</h1>
<h2 data-number="6.1" id="improved-differentiation"><span class="header-section-number">6.1</span> Improved differentiation</h2>
<p>The differentiation of formula defined by the <code>Evaluator</code> class has been improved in several manner.</p>
<p>For example, the derivation of the formula <code>2*sin(x)</code> would lead in previous versions in the following ev</p>
<h1 data-number="7" id="tfelmaterial-improvements"><span class="header-section-number">7</span> <code>TFEL/Material</code> improvements</h1>
<h2 data-number="7.1" id="sec:tfel_4.1:tfel_material:constexpr"><span class="header-section-number">7.1</span> Generalized usage of the <code>constexpr</code> keyword</h2>
<h2 data-number="7.2" id="sec:tfel_4.1:tfel_material:gpu"><span class="header-section-number">7.2</span> Port to GPUs</h2>
<h1 data-number="8" id="mfront-improvements"><span class="header-section-number">8</span> <code>MFront</code> improvements</h1>
<h2 data-number="8.1" id="options-to-domain-specific-languages"><span class="header-section-number">8.1</span> Options to domain specific languages</h2>
<p>Domain specific language can have options which can modify their default behaviour.</p>
<h3 data-number="8.1.1" id="sec:tfel:4.1:mfront:global_options:parameters_as_static_variables"><span class="header-section-number">8.1.1</span> Treat parameters as static variables</h3>
<p>The boolean option <code>parameters_as_static_variables</code> modifies the way parameters are treated. This option can be declared as follows:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>DSL Default{parameters_as_static_variables : <span class="kw">true</span>};</span></code></pre></div>
<p>By default, <code>MFront</code> behaves as if this option was set to <code>false</code>.</p>
<p>If <code>true</code>, the parameters will be treated as static variables. In particular, the values of the parameters can not be changed as runtime. From the solver point of view, the behaviour does not declare any parameter.</p>
<p>If the current domain specific language calls other domain specific languages (for example, a behaviour calling an external material property), the value of this option is automatically passed to those domain specific languages (unless superceeded by global options, as detailled in Section 8.1.7).</p>
<h3 data-number="8.1.2" id="sec:tfel:4.1:mfront:global_options:build_identifier"><span class="header-section-number">8.1.2</span> Specifying a build identifier</h3>
<p>In previous versions, a build identifier could be specified using the <code>TFEL_BUILD_ID</code> environment variable.</p>
<p>The <code>build_identifier</code> option is another way of specifying the build identifier, as follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>DSL IsotropicPlasticMisesFlow{</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  build_identifier : <span class="st">&quot;Cyrano-3.4&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>};</span></code></pre></div>
<p>However, the <code>build_identifier</code> is not meant to be directly specified in the <code>MFront</code> source file. It shall rather be defined on the command line (see Section 8.1.7).</p>
<h3 data-number="8.1.3" id="sec:tfel:4.1:mfront:global_options:temperature_as_first_external_state_variable"><span class="header-section-number">8.1.3</span> Automatic declaration of the temperature as the first external state variable for behaviours</h3>
<p>In previous versions of <code>MFront</code>, the temperature was automatically defined as the first external state variable by domain specific languages handling behaviours, as this is required by most behaviour interfaces derived from <code>Abaqus</code>’ <code>UMAT</code> interface.</p>
<p>This automatic declaration can now be disabled using the <code>automatic_declaration_of_the_temperature_as_first_external_state_variable</code> boolean option, as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>DSL IsotropicPlasticMisesFlow{</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  automatic_declaration_of_the_temperature_as_first_external_state_variable : <span class="kw">false</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>};</span></code></pre></div>
<p>By default, <code>MFront</code> behaves as if this option was set to <code>true</code>. Currently, only the generic interface supports behaviours which do not declare the temperature a the first external state variable.</p>
<h4 data-number="8.1.3.1" id="special-case-of-specialized-domain-specific-languages"><span class="header-section-number">8.1.3.1</span> Special case of specialized domain specific languages</h4>
<p><code>IsotropicMisesCreep</code>, <code>IsotropicMisesPlasticFlow</code>, <code>IsotropicStrainHardeningMisesCreep</code> and <code>MultipleIsotropicMisesFlows</code> domain specific languages used to automatically declare the temperature at the middle of the time step in a local variable named <code>T_</code>. This declaration is disabled if the <code>automatic_declaration_of_the_temperature_as_first_external_state_variable</code> option is set to <code>false</code>.</p>
<h3 data-number="8.1.4" id="sec:tfel:4.1:mfront:global_options:parameters_initialization_from_file"><span class="header-section-number">8.1.4</span> Disabling initialization of parameters from text file</h3>
<p>By default, parameters may be initialized from a text file in the current directory, if this text file exists. This feature is implemented and enabled by default for behaviours. For material properties, this feature is implemented by some interfaces (<code>Cast3M</code>, <code>Cyrano</code>, <code>Octave</code>, <code>Python</code>).</p>
<p>This behaviour can now be changed by using the <code>parameters_initialization_from_file</code> boolean option.</p>
<h3 data-number="8.1.5" id="sec:tfel:4.1:mfront:global_options:default_out_of_bounds_policy"><span class="header-section-number">8.1.5</span> Specifying the default out of bounds policy</h3>
<p>In previous versions, the default out of bound policy was <code>tfel::material::None</code>, which meant that nothing is done when a variable is out of its bound.</p>
<p>This behaviour can now be changed by using the <code>default_out_of_bounds_policy</code> string option which can take the values <code>None</code>, <code>Warning</code> or <code>Strict</code>.</p>
<h3 data-number="8.1.6" id="sec:tfel:4.1:mfront:global_options:out_of_bounds_policy_runtime_modification"><span class="header-section-number">8.1.6</span> Disabling runtime change of the out of bounds policy</h3>
<p>The <code>out_of_bounds_policy_runtime_modification</code> boolean option states if the out of bounds policy can be changed at runtime. By default, this option is <code>true</code>.</p>
<p>If <code>true</code>, many interfaces (<code>Cast3M</code>, <code>Python</code>, <code>Java</code>, etc..) uses environment variables to modify the out of bounds policy.</p>
<h3 data-number="8.1.7" id="sec:tfel_4.1:mfront:global_dsl_options"><span class="header-section-number">8.1.7</span> Defining global options from the command line</h3>
<p>Options passed to domain specific languages can be defined globally using one of the following command line arguments:</p>
<ul>
<li><code>--dsl-option</code>, which allows to define an option for all domain specific languages.</li>
<li><code>--material-property-dsl-option</code>, which allows to define an option for all domain specific languages related to material properties.</li>
<li><code>--behaviour-dsl-option</code>, which allows to define an option for all domain specific languages related to behaviours.</li>
<li><code>--model-dsl-option</code>, which allows to define an option for all domain specific languages related to models.</li>
</ul>
<p>The options defined by command line arguments are merged with the options defined inside the <code>MFront</code> file. In case of conflicts, an option defined on the command-line overwrites the option defined in the <code>MFront</code> file.</p>
<h4 data-number="8.1.7.1" id="example-of-usage"><span class="header-section-number">8.1.7.1</span> Example of usage</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront --obuild --interface=generic                          \</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    --behaviour-dsl-option=parameters_as_static_variables:<span class="kw">true</span> \</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    Plasticity.mfront</span></code></pre></div>
<h3 data-number="8.1.8" id="sec:tfel_4.1:mfront:list_dsl_options"><span class="header-section-number">8.1.8</span> Retrieving the list of options associated with a domain specific language</h3>
<p>The list of options associated with a domain specific language can be retrieved using the <code>--list-dsl-options</code> command line argument as follows:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront <span class="at">--list-dsl-options</span><span class="op">=</span>RungeKutta</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> parameters_as_static_variables: boolean stating if the parameter shall be treated as static variables.</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> automatic_declaration_of_the_temperature_as_first_external_state_variable: boolean stating if the temperature shall be automatically declared as an external state variable.</span></code></pre></div>
<h2 data-number="8.2" id="sec:tfel_4.1:mfront:initialize_functions"><span class="header-section-number">8.2</span> Initialize functions for behaviours</h2>
<p>The <code>@InitializeFunction</code> keyword introduces a code block that can be used to initialize internal state variables at the very beginning of the computation. Initalize functions may have user so-called <em>initialize funtion variables</em>.</p>
<p>In this version, only the <code>generic</code> interface generates functions associated with initialize functions (See Section 4.1.1 to see how to retrieve the initialize functions generated by the <code>generic</code> interfaces).</p>
<p>Because initialize functions are called before any behaviour integration, special care to the meaning of the variables must be taken:</p>
<ul>
<li>The gradients and external state variable will have their values at the beginning of the time step and their increments will be null.</li>
<li>The thermodynamic forces will have their values at the beginning of the time step.</li>
<li>The state variables and auxiliary state variables will have undefined values. The associated increments, if defined, will be null.</li>
</ul>
<p>Concerning material properties, they have their values at the beginning of the time step.</p>
<blockquote>
<p><strong>About initialisation of local variables</strong></p>
<p>The code block defined by the <code>@InitLocalVariables</code> code block shall be called before the execution of an initialize function.</p>
</blockquote>
<h3 data-number="8.2.1" id="example-of-usage-1"><span class="header-section-number">8.2.1</span> Example of usage</h3>
<p>The following code defines an initializer function which initializes the elastic strain from the value of stress:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>InitializeFunction ElasticStrainFromInitialStress{</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">const</span> <span class="kw">auto</span> K = <span class="dv">2</span> / (<span class="dv">3</span> * (<span class="dv">1</span> - <span class="dv">2</span> * nu));</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">const</span> <span class="kw">auto</span> pr = trace(sig) / <span class="dv">3</span>;</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">const</span> <span class="kw">auto</span> s = deviator(sig);</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  eel = eval((pr / K) * Stensor::Id() + s / mu);</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 data-number="8.2.2" id="about-initialize-function-variables"><span class="header-section-number">8.2.2</span> About initialize function variables</h3>
<p>Initialize function variables are introduced by the <code>@InitializeFunctionVariable</code> keyword.</p>
<p>Initialize function variables are only defined in initialize functions, and can’t be used in the other code blocks.</p>
<p>Contrary most variables (internal state variables, external state variables, etc.), initialize function variables can be defined after the first code block. However, care must be taken to declare initialize function variables <strong>before</strong> their use in an initialize function.</p>
<p>Note that an initialize function variable can be used in differents initialize function.</p>
<h2 data-number="8.3" id="sec:tfel_4.1:mfront:postprocessings"><span class="header-section-number">8.3</span> Post-processings of behaviours</h2>
<p>The <code>@PostProcessing</code> keyword introduces a code block that can be used to perform computations independently of the behaviour integration. The outputs of post-processings are stored in so-called <em>post-processing variables</em>.</p>
<p>Post-processings are typically meant to be called at the end of a time step, when the equilibrium has been reached.</p>
<p>In this version, only the <code>generic</code> interface generates functions associated with post-processings (See Section 4.1.2 to see how to retrieve the post-processing functions generated by the <code>generic</code> interfaces).</p>
<p>Because post-processings are called independently of the behaviour integration step, special care to the meaning of the variables must be taken:</p>
<ul>
<li>The thermodynamic forces will have their values at the end of the time step.</li>
<li>The state variables and auxiliary state variables will have their values at the end of the time step. The associated increments, if defined, will be null.</li>
</ul>
<p>The values of the thermodynamic forces, state variables, auxiliary state variables at the beginning of the time step are available in a special data structure named <code>initial_state</code>.</p>
<p>Concerning material properties, they have their values at the end of the time step as usual.</p>
<p>For the gradients and external state variables have their values at the end of the time step. Their values at the beginning of the time step are avaiable in the <code>initial_state</code> data structure. Their increments have their usual values.</p>
<blockquote>
<p><strong>About initialisation of local variables</strong></p>
<p>The code block defined by the <code>@InitLocalVariables</code> code block shall be called before the execution of the post-processing. However, this code block will be called with the thermodynamic forces, state variables, auxiliary state variables at the end of the time step.</p>
</blockquote>
<h3 data-number="8.3.1" id="example-of-usage-2"><span class="header-section-number">8.3.1</span> Example of usage</h3>
<p>The following code defines a post-processing computing the principal strain at the end of the time step:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">//! principal strains</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>PostProcessingVariable tvector&lt;<span class="dv">3</span><span class="bu">u</span>,strain&gt; εᵖ;</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>εᵖ.setEntryName(<span class="st">&quot;PrincipalStrain&quot;</span>);</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">//! compute the principal strain</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>PostProcessing PrincipalStrain {</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  εᵖ = eto.computeEigenValues();</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 data-number="8.3.2" id="about-post-processing-variables"><span class="header-section-number">8.3.2</span> About post-processing variables</h3>
<p>Post-processing variables are introduced by the <code>@PostProcessingVariable</code> keyword.</p>
<p>Post-processing variables are only defined in post-processings, and can’t be used in the other code blocks.</p>
<p>Contrary most variables (internal state variables, external state variables, etc.), post-processing variables can be defined after the first code block. However, care must be taken to declare post-processing variables <strong>before</strong> their use in a post-processing.</p>
<p>Note that a post-processing variable can be used in differents post-processings. Typically, one may compute the principal strains in a dedicated post-processing and in a post-processing computing the principal strains and the strain eigen vectors.</p>
<h2 data-number="8.4" id="sec:tfel_4.1:mfront:madnex_search_paths"><span class="header-section-number">8.4</span> Add a <code>madnex</code> file to the search paths</h2>
<p><code>MFront</code> files may depend on other <code>MFront</code> files. A <code>madnex</code> file can be used resolve those dependencies using the <code>--madnex-search-path</code> command line argument.</p>
<h3 data-number="8.4.1" id="a-first-example"><span class="header-section-number">8.4.1</span> A first example</h3>
<p>Let us consider a <code>madnex</code> file containing the <code>YoungModulusTest</code> material property associated with no material and a file <code>Test.mfront</code> requiring to have access to this material property. For example, the <code>Test.mfront</code> may contain an instruction such as:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>MaterialLaw <span class="st">&quot;YoungModulusTest&quot;</span>;</span></code></pre></div>
<p>The <code>Test.mfront</code> file can be compiled as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront --obuild --interface=generic                 <span class="er">`</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>         --madnex-search-path=MaterialProperties.mdnx <span class="er">`</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>         Test.mfront</span></code></pre></div>
<h3 data-number="8.4.2" id="madnex-search-paths"><span class="header-section-number">8.4.2</span> <code>madnex</code> search paths</h3>
<p>Options to the <code>--madnex-search-path</code> can be decomposed as</p>
<p><code>&lt;file_path&gt;:&lt;material_knowledge_type&gt;:&lt;material_identifier&gt;</code></p>
<p>where <code>&lt;material_knowledge_type&gt;</code> and <code>&lt;material_identifier&gt;</code> are optionals, as in the previous example.</p>
<h4 data-number="8.4.2.1" id="selecting-a-specific-type-of-material-kowledge"><span class="header-section-number">8.4.2.1</span> Selecting a specific type of material kowledge</h4>
<p><code>material_knowledge_type</code> may have one of the following values <code>material_property</code>, <code>behaviours</code> and <code>models</code>.</p>
<p>If <code>material_knowledge_type</code> is not specified, materials properties, behaviours and models are all considered (in that order).</p>
<h4 data-number="8.4.2.2" id="about-the-material-identifier"><span class="header-section-number">8.4.2.2</span> About the material identifier</h4>
<p>The <code>&lt;material_identifier&gt;</code> is interpreted as a regular expression.</p>
<p>The regular expression that selects material knowledge associated with all materials is <code>.+</code>, but this will exclude material knowledge associated with no material.</p>
<p>The regular expression <code>.*</code> will select material knowledge associated to all material <em>and</em> material knowledge associated with no material. This is what happen if not <code>material_identifier</code> is specified.</p>
<p>The special material identifier <code>&lt;none&gt;</code> selects only material knowledge associated with no material.</p>
<h4 data-number="8.4.2.3" id="examples-of-madnex-search-paths"><span class="header-section-number">8.4.2.3</span> Examples of madnex search paths</h4>
<ul>
<li><code>MaterialProperties.mdnx</code>: appends all the materials properties, behaviours, models associated to any materials or to no material to the search path.</li>
<li><code>MaterialProperties.mdnx:material_property</code>: appends all the materials properties, associated to any materials or to no material to the search path.</li>
<li><code>MaterialProperties.mdnx:material_property:Zircaloy4</code>: appends all the materials properties, associated to <code>Zircaloy4</code> to the search path.</li>
</ul>
<h3 data-number="8.4.3" id="how-madnex-files-are-searched"><span class="header-section-number">8.4.3</span> How <code>madnex</code> files are searched</h3>
<p>The <code>madnex</code> files specified in <code>madnex</code> search paths are first search in the current directory, and then in the directories specified by the <code>--search-path</code> command line arguments.</p>
<h2 data-number="8.5" id="sec:tfel_4.1:mfront:automatic_madnex_file_search_path"><span class="header-section-number">8.5</span> Automatic declaration of a <code>madnex</code> input file as a <code>madnex</code> search path</h2>
<p>When <code>MFront</code> uses a <code>madnex</code> input file, this file is automatically added to the <code>madnex</code> search path.</p>
<h3 data-number="8.5.1" id="example-of-usage-3"><span class="header-section-number">8.5.1</span> Example of usage</h3>
<p>Let us consider a file a <code>madnex</code> file containing a behaviour <code>Test</code> and a material property <code>YoungModulusTest</code> which is used by the <code>Test</code> behaviour, then the following instructions work as expected:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront <span class="at">--obuild</span> <span class="at">--interface</span><span class="op">=</span>aster <span class="at">--behaviour</span><span class="op">=</span>Test Example.mdnx </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Treating</span> target : all</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> following libraries have been built :</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> libAsterBehaviour.so :  astertest</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--list-dependencies</span> <span class="at">--behaviour</span><span class="op">=</span>Test Example.mdnx </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="ex">madnex:Example.mdnx:MaterialProperty::YoungModulusTest</span> </span></code></pre></div>
<h2 data-number="8.6" id="improvements-to-the-standardelastoviscoplasticity-brick"><span class="header-section-number">8.6</span> Improvements to the <code>StandardElastoViscoPlasticity</code> brick</h2>
<h3 data-number="8.6.1" id="user-defined-isotropic-hardening-rule"><span class="header-section-number">8.6.1</span> User defined isotropic hardening rule</h3>
<p>The <code>UserDefined</code> isotropic hardening rule allows the user to specify the radius of the yield surface as a function of the equivalent plastic strain <code>p</code>.</p>
<p>This function shall be given by a string option named <code>R</code> and must depend on <code>p</code>. The function may also depend on other variables. Let <code>A</code> be such a variable. The <code>UserDefined</code> isotropic hardening rule will look if an option named <code>A</code> has been given:</p>
<ul>
<li>If this option exists, it will be interpreted as a material coefficient as usal and this option can be a number, a formula or the name of an external <code>MFront</code> file.</li>
<li>If this option does not exist, a suitable variable will be search in the variables defined in the behaviour (static variables, parameters, material properties, etc…).</li>
</ul>
<p>If required, the derivative of <code>R</code> with respect to <code>f</code> and <code>p</code> can be provided through the option <code>dR_dp</code>. The derivative <code>dR_dp</code> can depend on the variable <code>R</code>.</p>
<p>If this derivative is not provided, automatic differentiation will be used. The user shall be warned that the automatic differentiation provided by the <code>tfel::math::Evaluator</code> class may result in inefficient code.</p>
<h4 data-number="8.6.1.1" id="example-of-usage-4"><span class="header-section-number">8.6.1.1</span> Example of usage</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Parameter stress R0 = <span class="fl">200e6</span>;</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Parameter stress Hy = <span class="fl">40e6</span>;</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Parameter real b = <span class="dv">100</span>;</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Brick StandardElastoViscoPlasticity{</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  stress_potential : <span class="st">&quot;Hooke&quot;</span> {young_modulus : <span class="fl">150e9</span>, poisson_ratio : <span class="fl">0.3</span>},</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  inelastic_flow : <span class="st">&quot;Plastic&quot;</span> {</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    criterion : <span class="st">&quot;Mises&quot;</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    isotropic_hardening : <span class="st">&quot;UserDefined&quot;</span> {</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>      R : <span class="st">&quot;R0 + Hy * (1 - exp(-b * p))&quot;</span>,     <span class="co">// Yield radius</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>      dR_dp : <span class="st">&quot;b * (R0 + Hy - R)&quot;</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>};</span></code></pre></div>
<h3 data-number="8.6.2" id="new-inelastic-flow-userdefinedviscoplasticity"><span class="header-section-number">8.6.2</span> New inelastic flow <code>UserDefinedViscoplasticity</code></h3>
<p>The <code>UserDefinedViscoplasticity</code> inelastic flow allows the user to specify the viscoplastic strain rate <code>vp</code> as a function of <code>f</code> and <code>p</code> where:</p>
<ul>
<li><code>f</code> is the positive part of the <span class="math inline">\(\phi\paren{\tsigma-\sum_{i}\tenseur{X}_{i}}-\sum_{i}R_{i}\paren{p}\)</span> where <span class="math inline">\(\phi\)</span> is the stress criterion.</li>
<li><code>p</code> is the equivalent viscoplastic strain.</li>
</ul>
<p>This function shall be given by a string option named <code>vp</code>. This function must depend on <code>f</code>. Dependance to <code>p</code> is optional.</p>
<p>The function may also depend on other variables. Let <code>A</code> be such a variable. The <code>UserDefinedViscoplasticity</code> flow will look if an option named <code>A</code> has been given to the flow:</p>
<ul>
<li>If this option exists, it will be interpreted as a material coefficient as usal and this option can be a number, a formula or the name of an external <code>MFront</code> file.</li>
<li>If this option does not exist, a suitable variable will be search in the variables defined in the behaviour (static variables, parameters, material properties, etc…).</li>
</ul>
<p>If required, the derivatives of <code>vp</code> with respect to <code>f</code> and <code>p</code> can be provided through the options <code>dvp_df</code> and <code>dvp_dp</code>. The derivatives <code>dvp_df</code> and <code>dvp_dp</code> can depend on two additional variables, <code>vp</code> and <code>seps</code>, which denotes the viscoplastic strain rate and a stress threshold.</p>
<p>If those derivatives are not provided, automatic differentiation will be used. The user shall be warned that the automatic differentiation provided by the <code>tfel::math::Evaluator</code> class may result in inefficient code.</p>
<h4 data-number="8.6.2.1" id="example-of-usage-5"><span class="header-section-number">8.6.2.1</span> Example of usage</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Parameter temperature Ta = <span class="dv">600</span>;</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Parameter strain p0 = <span class="fl">1e-8</span>;</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Brick StandardElastoViscoPlasticity{</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  stress_potential : <span class="st">&quot;Hooke&quot;</span> {young_modulus : <span class="fl">150e9</span>, poisson_ratio : <span class="fl">0.3</span>},</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  inelastic_flow : <span class="st">&quot;UserDefinedViscoplasticity&quot;</span> {</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    criterion : <span class="st">&quot;Mises&quot;</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    E : <span class="fl">8.2</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    A : <span class="st">&quot;8e-67 * exp(- T / Ta)&quot;</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    m : <span class="fl">0.32</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    vp : <span class="st">&quot;A * (f ** E) / ((p + p0) ** m)&quot;</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    dvp_df : <span class="st">&quot;E * vp / (max(f, seps))&quot;</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// dvp_dp is evaluated by automatic differentiation (which is not recommended)</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>};</span></code></pre></div>
<h2 data-number="8.7" id="improvements-to-the-rungekutta-domain-specific-language"><span class="header-section-number">8.7</span> Improvements to the <code>RungeKutta</code> domain specific language</h2>
<h3 data-number="8.7.1" id="sec:tfel_4.1:mfront:rkCastem"><span class="header-section-number">8.7.1</span> Improvements to the <code>rkCastem</code> algorithm</h3>
<p>The <code>rkCastem</code> algorithm compares the values of the stress computed by a predictor step and corrector step. The error between those values must be normalised. In previous versions, the existence of a variable named <code>young</code> was assumed.</p>
<p>The <code>@StressErrorNormalizationFactor</code> allows to specify this normalization factor more explicitely and consistenly.</p>
<p>For backward compatibility with previous versions, the <code>young</code> variable will be used, if an appropriate variable is defined and if the <code>@StressErrorNormalizationFactor</code> keyword was not used.</p>
<p>Note that if the <code>@StressErrorNormalizationFactor</code> keyword is not used and that the <code>young</code> variable is not defined, <code>MFront</code> will look:</p>
<ol type="1">
<li>if the stiffnes matrix is defined and take its first component.</li>
<li>if a material property, a parameter or a local variable is associated with the <code>YoungModulus</code> glossary name.</li>
</ol>
<h2 data-number="8.8" id="new-domain-specific-language-implicitczmdsl"><span class="header-section-number">8.8</span> New domain specific language <code>ImplicitCZMDSL</code></h2>
<p>The domain specific language <code>ImplicitCZMDSL</code> allows to implement a cohesive zone model using an implicit scheme.</p>
<h2 data-number="8.9" id="sec:tfel:4.1:mfront:generic_material_property_interface"><span class="header-section-number">8.9</span> <code>generic</code> interface for material properties</h2>
<p>The <code>generic</code> interface for material properties generates functions matching the following prototype:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>mfront_gmp_real (*)(mfront_gmp_OutputStatus* <span class="at">const</span>,       <span class="co">// output status</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">const</span> mfront_gmp_real* <span class="at">const</span>,         <span class="co">// arguments</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">const</span> <span class="dt">mfront_gmp_size_type</span>,           <span class="co">// number of arguments</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">const</span> mfront_gmp_OutOfBoundsPolicy);  <span class="co">// out of bounds policy</span></span></code></pre></div>
<p>The <code>mfront_gmp_OutputStatus</code> structure and the <code>mfront_gmp_OutOfBoundsPolicy</code> enumeration type are described in the next paragraphs.</p>
<p>The arguments are passed using a continuous array. The number of arguments is used to make some basic consistency checks. The list of arguments can be retrieved using the <code>ExternalLibraryManager</code> class (See Section @???).</p>
<p>If the material property declares parameters (and that the <code>parameters_as_static_variables</code> DSL option was not specified), their names and default values can be retrieved using the <code>ExternalLibraryManager</code> class. The value of those parameters can also be modified using the <code>ExternalLibraryManager</code> class (See Section @???).</p>
<blockquote>
<p><strong>Note: link with the <code>cyrano</code> interface for material properties</strong></p>
<p>The <code>generic</code> interface for material properties is very similar to the <code>cyrano</code> interface. In pratice, both interfaces shares a common base class (called <code>GenericMaterialPropertyInterfaceBase</code>).</p>
</blockquote>
<h3 data-number="8.9.1" id="the-mfront_gmp_outputstatus-structure"><span class="header-section-number">8.9.1</span> The <code>mfront_gmp_OutputStatus</code> structure</h3>
<p>The <code>mfront_gmp_OutputStatus</code> structure describes the output status of the evaluation of a material property.</p>
<p>This data structure is defined as follows:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*!</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">\brief</span><span class="co"> this structure summarizes the exit status of a function conforming to</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * one of the `generic` material property interface.</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> {</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">/*!</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">   * </span><span class="an">\brief</span><span class="co"> exit status</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">   *</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">   * The exit status is zero if the result has been correctly evaluated.</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">   *</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">   * If the exit status is 1, a result has been computed, but it must be used</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">   * with caution. This is typically used to report that one argument was out of</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">   * its bounds.</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">   *</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">   * All negative values indicates that the result is not usable. For a material</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">   * property, thereturned is `nan`.</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co">   *</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co">   * For a material property, a negative value has the following meaning:</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co">   *</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co">   * - If the exit status is -1, an argument was out of its physical bounds, or</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="co">   *   out of its bounds and a strict out of bounds policy is declared.</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="co">   * - If the exit status is -2, a C++ exception was thrown. If the exception</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="co">   *   was a child of `std::exception`, the content of the string returned by</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co">   *   the `what` method is copyied in the `message` field. Otherwise, the</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co">   *   message field contains the &quot;unknown exception&quot; string.</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co">   * - If the exit status is -3, an error occured in the `C` library, i.e. the</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="co">   *   `errno` value was set to a non zero value during the computation.</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co">   *   The value of `errno` corresponding to the error is stored to in the</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="co">   *   `c_error_number` field of this structure. The string returned by</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a><span class="co">   *   `strerrno` is returned. Note that the `errno` value is always reset to</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co">   *   the  value it had before the call.</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="co">   * - If the exit status is -4, the computed value is invalid (either </span><span class="an">\nan`,</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="co">   *   `inf`, or `-inf`).</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="co">   * - If the exit status is -5, the number of arguments is invalid.</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co">   */</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> status;</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">//! </span><span class="an">\brief</span><span class="co"> error number reported by the C library.</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> c_error_number;</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>  <span class="co">/*!</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="co">   * </span><span class="an">\brief</span><span class="co"> bounds status</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="co">   * This status has the following meaning:</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a><span class="co">   * - zero means that no argument was outside its bounds or its physical</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="co">   * bounds.</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a><span class="co">   * - a negative values means that one argument went beyond its physical</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a><span class="co">   * bounds.</span></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a><span class="co">   *   The absolute value gives the rank of this argument (here the rank starts</span></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a><span class="co">   * at 1).</span></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a><span class="co">   * - a positive value means that one argument went beyond its bounds.</span></span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a><span class="co">   *   The value gives the rank of this argument (here the rank starts at 1).</span></span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a><span class="co">   */</span></span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> bounds_status;</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>  <span class="co">//! </span><span class="an">\brief</span><span class="co"> error message</span></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a>  <span class="dt">char</span> msg[<span class="dv">512</span>];</span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a>} mfront_gmp_OutputStatus;  <span class="co">// end of struct mfront_gmp_OutputStatus</span></span></code></pre></div>
<h3 data-number="8.9.2" id="the-mfront_gmp_outofboundspolicy-enumeration-type"><span class="header-section-number">8.9.2</span> The <code>mfront_gmp_OutOfBoundsPolicy</code> enumeration type</h3>
<p>The <code>mfront_gmp_OutOfBoundsPolicy</code> enumeration type is defined as follows:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*!</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span><span class="an">\brief</span><span class="co"> available out of bounds policies</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> {</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  GENERIC_MATERIALPROPERTY_NONE_POLICY,    <span class="co">/*!&lt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * With this policy, nothing is done if</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * the arguments are    out of their</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * bounds    (checks are not even</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * performed).</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">                                            */</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  GENERIC_MATERIALPROPERTY_WARNING_POLICY, <span class="co">/*!&lt;</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * With this policy, checks on the</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * arguments are performed. If one</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * argument if out of its bounds,</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * this will be reported in the</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * output status and an</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * appropriate error message will be</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * reported. The computations are</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * however performed.</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co">                                            */</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  GENERIC_MATERIALPROPERTY_STRICT_POLICY   <span class="co">/*!&lt;</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * With this policy, checks on the</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * arguments are   performed. If one</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * argument   if out of its bounds,</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * this   will be reported in the</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * output   status and an   appropriate</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="co">                                            * error   message will be reported.</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="co">                                            */</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>} mfront_gmp_OutOfBoundsPolicy;  <span class="co">// end of mfront_gmp_OutOfBoundsPolicy</span></span></code></pre></div>
<h2 data-number="8.10" id="sec:tfel:4.1:mfront:generic_model_interface"><span class="header-section-number">8.10</span> <code>generic</code> interface for point-wise models implemented using the <code>Model</code> domain specific language</h2>
<p>The <code>Model</code> domain specific language (DSL) is mostly superseeded by the domain specific languages introduced in Version 3.4.3 (namely the <code>DefaultModel</code>, <code>RungeKuttaModel</code> and <code>ImplicitModel</code> DSL). However, backward-compatibility still requires to maintain the <code>Model</code> domain specific language.</p>
<p>It is also interesting to use of the existing point-wise models in solvers based on the <code>MFrontGenericInterfaceSupport</code>. This is the main motivation of the development for <code>generic</code> interface for point-wise models implemented using the <code>Model</code> domain specific language.</p>
<p>An interesting consequence of this development is those point-wise models can now be tested in <code>MTest</code>.</p>
<h3 data-number="8.10.1" id="example-of-usage-6"><span class="header-section-number">8.10.1</span> Example of usage</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront <span class="at">--obuild</span> <span class="at">--interface</span><span class="op">=</span>generic UO2_Shrinkage_RAPHAEL2008.mfront</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Treating</span> target : all</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> following libraries have been built :</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> libUO2-generic.so :  UO2_Shrinkage_RAPHAEL2008_AxisymmetricalGeneralisedPlaneStrain UO2_Shrinkage_RAPHAEL2008_AxisymmetricalGeneralisedPlaneStress UO2_Shrinkage_RAPHAEL2008_Axisymmetrical UO2_Shrinkage_RAPHAEL2008_PlaneStress UO2_Shrinkage_RAPHAEL2008_PlaneStrain UO2_Shrinkage_RAPHAEL2008_GeneralisedPlaneStrain UO2_Shrinkage_RAPHAEL2008_Tridimensional</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> </span></code></pre></div>
<p>This can be tested in <code>MTest</code>. As an exemple, the following test computes the swelling of uranium dioxide for a constant temperature for a burn-up increasing from <span class="math inline">\(0\)</span> to <span class="math inline">\(5\, at.%\)</span> (time has no physical meaning here):</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ModellingHypothesis <span class="ch">&#39;T</span><span class="er">ridimensional</span><span class="ch">&#39;</span>;</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Behaviour&lt;generic&gt; <span class="ch">&#39;s</span><span class="er">rc/libUO2-generic.so</span><span class="ch">&#39;</span> <span class="ch">&#39;U</span><span class="er">O2_Shrinkage_RAPHAEL2008</span><span class="ch">&#39;</span>;</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable <span class="ch">&#39;B</span><span class="er">urnUp_AtPercent</span><span class="ch">&#39;</span> {<span class="dv">0</span> : <span class="dv">0</span>, <span class="dv">1</span> : <span class="dv">5</span>};</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable <span class="ch">&#39;T</span><span class="er">emperature</span><span class="ch">&#39;</span> <span class="dv">800</span>;</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Times{<span class="dv">0</span>, <span class="dv">1</span> in <span class="dv">100</span>};</span></code></pre></div>
<h2 data-number="8.11" id="miscellaneous-improvements-1"><span class="header-section-number">8.11</span> Miscellaneous improvements</h2>
<h3 data-number="8.11.1" id="extension-of-the-derivative_type-metafunction-to-higher-order-derivatives-1"><span class="header-section-number">8.11.1</span> Extension of the <code>derivative_type</code> metafunction to higher order derivatives</h3>
<p>In variable declaration, the <code>derivative_type</code> metafunction now accepts multiple arguments defining the variable types with respect to which the function type is derived.</p>
<h4 data-number="8.11.1.1" id="example-1"><span class="header-section-number">8.11.1.1</span> Example</h4>
<p>The following declarations</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">// declaration valid in Version 4.0 and 4.1</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>LocalVariable <span class="dt">derivative_type</span>&lt;<span class="dt">derivative_type</span>&lt;stress, temperature&gt;, temperature&gt; d2E_dT2;</span></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// declaration valid in Version 4.1</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>LocalVariable <span class="dt">derivative_type</span>&lt;stress, temperature, temperature&gt; d2E_dT2;</span></code></pre></div>
<p>are now equivalent.</p>
<h1 data-number="9" id="mtest-improvements"><span class="header-section-number">9</span> <code>MTest</code> improvements</h1>
<h2 data-number="9.1" id="sec:tfel:4.1:mtest:madnex_support"><span class="header-section-number">9.1</span> Support for <code>madnex</code> file</h2>
<h3 data-number="9.1.1" id="exporting-an-mtest-test-to-a-madnex-file"><span class="header-section-number">9.1.1</span> Exporting an <code>MTest</code> test to a <code>madnex</code> file</h3>
<p>The <code>TFELMTest</code> library exposes a data structure named <code>TestDescription</code> which describes an <code>MTest</code> file and two functions called respectively <code>loadMTestFileContent</code> and <code>write</code>.</p>
<p>This data structure and functions are exported in <code>python</code>, as described in Section 11.4. Section 11.4.1 provides an example of use.</p>
<h4 data-number="9.1.1.1" id="sec:tfel:4.1:mtest:TestDescription"><span class="header-section-number">9.1.1.1</span> The <code>TestDescription</code> data structure</h4>
<p>The <code>TestDescription</code> data structure exposes the following data members:</p>
<ul>
<li><code>author</code>, which describes the author of the test.</li>
<li><code>date</code>, which describes the date at which the test has been created.</li>
<li><code>scheme</code>, which describes the type of test. Valid values are <code>mtest</code> and <code>ptest</code>.</li>
<li><code>description</code>, which describes a description of the test.</li>
<li><code>behaviour</code>, name of the behaviour to which the test is associated. This data member is <strong>required</strong> to export the file in the <code>madnex</code> file format.</li>
<li><code>material</code>, name of the material to which the test is associated. This data member can be empty.</li>
<li><code>content</code>, content of the <code>MTest</code> file. This content can be filled from an existing <code>MTest</code> file using the <code>loadMTestFileContent</code> function.</li>
</ul>
<h4 data-number="9.1.1.2" id="sec:tfel:4.1:mtest:loadMTestFileContent"><span class="header-section-number">9.1.1.2</span> The <code>loadMTestFileContent</code> function</h4>
<p>The <code>loadMTestFileContent</code> function loads the content of an <code>MTest</code> file and stores it in the <code>content</code> data member of a <code>TestDescription</code> data structure.</p>
<h4 data-number="9.1.1.3" id="sec:tfel:4.1:mtest:write"><span class="header-section-number">9.1.1.3</span> The <code>write</code> function</h4>
<p>The <code>write</code> function exports an <code>MTest</code> test, described by a <code>TestDescription</code> data structure, to a file.</p>
<p>The file format is deduced from the extension of the file.</p>
<p>Currently, only extensions associated with the <a href="https://github.com/thelfer/madnex"><code>madnex</code> file format</a> are supported if <code>TFEL</code> is compiled with support of this file format. Those extensions are: <code>mdnx</code>, <code>madnex</code> (deprecated) or <code>edf</code> (experimental data file, deprecated). Note that the behaviour member of the metadata must be specified for export in the <code>madnex</code> file format.</p>
<h4 data-number="9.1.1.4" id="best-practices"><span class="header-section-number">9.1.1.4</span> Best practices</h4>
<p>We highly recommend to use the following substitution variables when defining the test:</p>
<ul>
<li><code>@interface@</code>, which is meant to be replaced by the interface to be used. This is very handy if the test can be run for different interfaces</li>
<li><code>@library@</code>, which is meant to be replaced by the path to the shared library containing the tested behaviour.</li>
<li><code>@behaviour@</code>, which contains the name of the function implementing the behaviour for the considered interface.</li>
</ul>
<h3 data-number="9.1.2" id="executing-a-test-stored-in-a-madnex-file"><span class="header-section-number">9.1.2</span> Executing a test stored in a <code>madnex</code> file</h3>
<p>To execute a test stored in a <code>madnex</code> file, the user must specify:</p>
<ul>
<li>the name of the <code>madnex</code> file</li>
<li>the name of the test using the <code>--test</code> (or <code>-t</code>) command line argument.</li>
<li>the name of the behaviour to which the test is associated using the <code>--behaviour</code> (or <code>-b</code>) command line argument.</li>
<li>the name of the material is the behaviour to which the test is associated is associated with a material using the <code>--material</code> (or <code>-m</code>) command line argument. If the material is not specified, or if the special material name <code>&lt;none&gt;</code> is used, the behaviour associated with the test is assumed not associated with any material.</li>
</ul>
<p>Note that the <code>--test</code> (or <code>-t</code>) command line argument can accept regular expressions to select as set of tests.</p>
<h4 data-number="9.1.2.1" id="example-of-usage-7"><span class="header-section-number">9.1.2.1</span> Example of usage</h4>
<p>The following example executes the UniaxialTensileTest<code>test  associated with the</code>Plasticity<code>behaviour (and not attached to any material) using the behaviour</code>cyranoplasticity<code>compiled with the</code>cyrano<code>interface in a shared library</code>libCyranoBehaviours.so<code>located in the</code>src<code>subdirectory and stored in the</code>Plasticity.mdnx` file:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mtest  <span class="at">--behaviour</span><span class="op">=</span>Plasticity <span class="at">--test</span><span class="op">=</span>UniaxialTensileTest        <span class="dt">\</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">--@interface@</span><span class="op">=</span>cyrano <span class="at">--@behaviour@</span><span class="op">=</span><span class="st">&quot;&#39;cyranoplasticity&#39;&quot;</span>  <span class="dt">\</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">--@library@</span><span class="op">=</span><span class="st">&quot;&#39;src/libCyranoBehaviours.so&#39;&quot;</span>               <span class="dt">\</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>         Plasticity.mdnx</span></code></pre></div>
<h3 data-number="9.1.3" id="execution-all-tests-associated-with-a-behaviour-stored-in-a-madnex-file"><span class="header-section-number">9.1.3</span> Execution all tests associated with a behaviour stored in a <code>madnex</code> file</h3>
<p>The user can execute all tests associated with a behaviour using the <code>--all-tests</code> command line arguments. The user must specify the name of the behaviour (using the <code>--behaviour</code> (or <code>-b</code>) command line argument) and optionally the name of the material (using the <code>--material</code> (or <code>-m</code>) command line argument).</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mtest  <span class="at">--behaviour</span><span class="op">=</span>Plasticity <span class="at">--@interface@</span><span class="op">=</span>cyrano <span class="dt">\</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">--@behaviour@</span><span class="op">=</span><span class="st">&quot;&#39;cyranoplasticity&#39;&quot;</span>          <span class="dt">\</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">--@library@</span><span class="op">=</span><span class="st">&quot;&#39;src/libCyranoBehaviours.so&#39;&quot;</span>  <span class="dt">\ </span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>         <span class="ex">--all-tests</span> Plasticity.mdnx                 <span class="dt">\</span></span></code></pre></div>
<p>The <code>--all-tests</code> command line argument is equivalent to <code>--test=".+"</code>.</p>
<h3 data-number="9.1.4" id="alternative-way-to-select-a-single-test-in-a-madnex-file"><span class="header-section-number">9.1.4</span> Alternative way to select a single test in a <code>madnex</code> file</h3>
<p><code>mtest</code> allows to select a test inside a <code>madnex</code> file using the following path syntax:</p>
<pre><code>madnex:&lt;file&gt;:&lt;material&gt;:&lt;behaviour&gt;:&lt;test&gt;</code></pre>
<p>where:</p>
<ul>
<li><code>&lt;file&gt;</code> is the path to the <code>madnex</code> file.</li>
<li><code>&lt;material&gt;</code> is the name of the material considered. This name can be empty or <code>&lt;none&gt;</code> if the considered test is not associated to a material.</li>
<li><code>&lt;behaviour&gt;</code> is the name of the behaviour</li>
<li><code>&lt;test&gt;</code> is the name of the test</li>
</ul>
<h2 data-number="9.2" id="sec:tfel_4.1:mtest:mandrel"><span class="header-section-number">9.2</span> Support for a boundary condition modelling the effet of a mandrel in pipe modelling</h2>
<p>The effect of a non-deformable mandrel located inside the pipe can be modelled by defining the evolution of its radius <span class="math inline">\(R_{m}\)</span> using the <code>@MandrelRadiusEvolution</code> keyword. The inner radius <span class="math inline">\(R_{i}\)</span> will then satisfy the following unilateral boundary condition:</p>
<p><span class="math display">\[
R_{i} - R_{m} \geq 0
\]</span></p>
<p>This boundary condition is imposed by using a Lagrange multiplier. Its value is given by the contact pressure in the output file. The total pressure applied to the inner surface of the pipe is given by the sum of the imposed pressure (if any) and the contact pressure. Only the imposed inner pressure is used to compute the end cap effect.</p>
<p>This boundary condition is not compatible with:</p>
<ul>
<li>boundary conditions imposing the evolution of the inner radius of the pipe or the outer radius of the pipe.</li>
<li>the modelling of a tight pipe.</li>
</ul>
<h3 data-number="9.2.1" id="axial-binding"><span class="header-section-number">9.2.1</span> Axial binding</h3>
<p>If the evolution of the axial growth of the mandrel is defined using the <code>@MandrelAxialGrowthEvolution</code> keyword, an axial binding between the mandrel and the pipe is assumed, i.e. the difference between the axial growth of the pipe <span class="math inline">\(\varepsilon^{p}_{zz}\)</span> and the axial growth of the mandrel <span class="math inline">\(\varepsilon^{p}_{zz}\)</span> is assumed to be constant to its value when the contact between the mandrel and the pipe is detected:</p>
<p><span class="math display">\[
\varepsilon^{p}_{zz}-\varepsilon^{m}_{zz}=\textrm{Cste}
\]</span></p>
<p>This axial boundary condition is not compatible with the boundary condition imposing the evolution of the axial growth of the pipe.</p>
<h2 data-number="9.3" id="sec:tfel_4.1:mtest:small_strain_tridimensional_behaviour_wrapper"><span class="header-section-number">9.3</span> Wrappers around <code>3D</code> behaviours</h2>
<p>The <code>SmallStrainTridimensionalBehaviourWrapper</code> class allows to wrap a tridimensional behaviour into a behaviour usable in one of the following modelling hypotheses:</p>
<ul>
<li>axisymmetrical generalised plane strain,</li>
<li>generalised plane strain,</li>
<li>plane strain.</li>
</ul>
<p>Shear components of the strain tensor which are not meaningful for the targeted modelling hypothesis are set to zero.</p>
<p>After the behaviour integration, only the meaningful components of the stress tensor and stiffness matrix are retained.</p>
<h3 data-number="9.3.1" id="treatment-of-the-internal-state-variables"><span class="header-section-number">9.3.1</span> Treatment of the internal state variables</h3>
<p>The internal state variables are all declared as scalars.</p>
<p>For instance, let us assume that the <code>3D</code> behaviour declares an internal state variable called <code>s</code>. In this case, the wrapped behaviour will then declared <code>6</code> internal state variables associated with <code>s</code> named respectively <code>sXX</code>, <code>sYY</code>, <code>sZZ</code>, <code>sXY</code>, <code>sXZ</code>, <code>sYZ</code>.</p>
<h3 data-number="9.3.2" id="usage-in-mtest"><span class="header-section-number">9.3.2</span> Usage in <code>MTest</code></h3>
<p>The following code shows how to wrap a tridimensional behaviour to be used under the axisymmetrical plane strain modelling hypothesis:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Choice of the modelling hypothesis</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ModellingHypothesis <span class="st">&quot;AxisymmetricalGeneralisedPlaneStrain&quot;</span>;</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Declaration of the behaviour</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>Behaviour&lt;</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    generic,                                   <span class="co">// interface name</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    SmallStrainTridimensionalBehaviourWrapper&gt; <span class="co">// wrapper</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;src/libBehaviour.so&quot;</span> <span class="st">&quot;ImplicitNorton&quot;</span>;</span></code></pre></div>
<h3 data-number="9.3.3" id="usage-in-the-mtest-python-module"><span class="header-section-number">9.3.3</span> Usage in the <code>mtest</code> <code>python</code> module</h3>
<p>The following code shows how to load a tridimensional behaviour and how to wrap this behaviour to be used in plane strain:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mtest</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tfel.material</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> tfel.material.ModellingHypothesis.TRIDIMENSIONAL</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>b1 <span class="op">=</span> mtest.Behaviour(<span class="st">&#39;generic&#39;</span>, <span class="st">&#39;src/libBehaviour.so&#39;</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&#39;ImplicitNorton&#39;</span>, h)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># [&#39;ElasticStrain&#39;, &#39;p&#39;]</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b1.getInternalStateVariablesNames())</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>b2 <span class="op">=</span> mtest.Behaviour(wrapper <span class="op">=</span> <span class="st">&#39;SmallStrainTridimensionalBehaviourWrapper&#39;</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>                     library <span class="op">=</span> <span class="st">&#39;src/libBehaviour.so&#39;</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>                     function <span class="op">=</span> <span class="st">&#39;ImplicitNorton&#39;</span>,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>                     hypothesis <span class="op">=</span> <span class="st">&#39;PlaneStrain&#39;</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [&#39;ElasticStrainXX&#39;, &#39;ElasticStrainYY&#39;, &#39;ElasticStrainZZ&#39;,</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co">#  &#39;ElasticStrainXY&#39;, &#39;ElasticStrainXZ&#39;, &#39;ElasticStrainYZ&#39;, &#39;p&#39;]</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b2.getInternalStateVariablesNames())</span></code></pre></div>
<h2 data-number="9.4" id="sec:tfel_4.1:mtest:rotation_matrix"><span class="header-section-number">9.4</span> A more flexible declaration of the rotation matrix</h2>
<p>The <code>@RotationMatrix</code> keyword now has a <code>Direction</code> option which now let the user specify:</p>
<ul>
<li>a <span class="math inline">\(2D\)</span> vector giving the first direction of orthotropy in modelling hypotheses of space dimension <span class="math inline">\(2\)</span>.</li>
<li>two <span class="math inline">\(3D\)</span> vectors giving respectively the first and second directions of orthotropy under the tridimensional modelling hypothesis.</li>
</ul>
<p>The given vectors are not required to be normalised. In the <span class="math inline">\(3D\)</span> case, the second vector is not required to be orthogonal to the first one. If not, the second direction of orthotropy is deduced from the second vector by removing its projection along the first one.</p>
<h3 data-number="9.4.1" id="usage"><span class="header-section-number">9.4.1</span> Usage</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">// using direction in 2D</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>RotationMatrix&lt;Direction&gt; {<span class="dv">0</span>,<span class="dv">1</span>};</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">// using directions in 3D</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>RotationMatrix&lt;Direction&gt; {{<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>},{<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>}};</span></code></pre></div>
<h2 data-number="9.5" id="sec:tfel_4.1:mtest:aster_logarithmic_strain_wrapper"><span class="header-section-number">9.5</span> Wrapper around behaviours written in the logarithmic strain framework generated with the <code>aster</code> interface</h2>
<p>Behaviours written in the logarithmic strain framework and generated with the <code>aster</code> interface were not handled by <code>MTest</code> because the logarithmic strain framework is treated by <code>code_aster</code> and not by the <code>aster</code> interface.</p>
<p>However, this is an issue for users using <code>MTest</code> for the identification of the behaviour, as described in <a href="https://github.com/thelfer/tfel/issues/55">Issue #55</a>.</p>
<p><code>MTest</code> now automatically wraps the behaviour to handle those behaviours. The wrapper handles the pre and post-processing steps around the behaviour integration.</p>
<h2 data-number="9.6" id="sec:tfel:4.1:mtest:generic_material_property_support"><span class="header-section-number">9.6</span> Support for material properties built using the <code>generic</code> interface</h2>
<p><code>MTest</code> support material properties built using the <code>generic</code> interface:</p>
<ul>
<li>The <code>mtest::MaterialProperty</code> can manipulate can load such material properties.</li>
<li>The <code>@MaterialProperty</code> keyword now has a <code>generic</code> option.</li>
</ul>
<h3 data-number="9.6.1" id="example-of-usage-8"><span class="header-section-number">9.6.1</span> Example of usage</h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>MaterialProperty&lt;generic&gt; <span class="ch">&#39;Y</span><span class="er">oungModulus</span><span class="ch">&#39;</span> <span class="ch">&#39;s</span><span class="er">rc/libGenericInconel600.so</span><span class="ch">&#39;</span> <span class="ch">&#39;I</span><span class="er">nconel600_YoungModulus</span><span class="ch">&#39;</span>;</span></code></pre></div>
<h1 data-number="10" id="mfm-test-generator-improvements"><span class="header-section-number">10</span> <code>mfm-test-generator</code> improvements</h1>
<h2 data-number="10.1" id="sec:tfel:4.1:mfmtg:madnex_support"><span class="header-section-number">10.1</span> Support for <code>madnex</code> file</h2>
<h3 data-number="10.1.1" id="exporting-an-mfm-test-generator-test-to-a-madnex-file"><span class="header-section-number">10.1.1</span> Exporting an <code>mfm-test-generator</code> test to a <code>madnex</code> file</h3>
<p>The <code>MFMTestGenerator</code> library exposes a data structure named <code>TestDescription</code> which describes an <code>mfm-test-generator</code> file and two functions called respectively <code>loadMFMTestGeneratorFileContent</code> and <code>write</code>.</p>
<p>This data structure and functions are exported in <code>python</code>, as described in Section 11.5.1. Section 11.5.2 provides an example of use.</p>
<h4 data-number="10.1.1.1" id="sec:tfel:4.1:mfmtg:TestDescription"><span class="header-section-number">10.1.1.1</span> The <code>TestDescription</code> data structure</h4>
<p>The <code>TestDescription</code> data structure exposes the following data members:</p>
<ul>
<li><code>author</code>, which describes the author of the test.</li>
<li><code>date</code>, which describes the date at which the test has been created.</li>
<li><code>scheme</code>, which describes the type of test. Valid values are <code>mtest</code> and <code>ptest</code>.</li>
<li><code>description</code>, which describes a description of the test.</li>
<li><code>behaviour</code>, name of the behaviour to which the test is associated. This data member is <strong>required</strong> to export the file in the <code>madnex</code> file format.</li>
<li><code>material</code>, name of the material to which the test is associated. This data member can be empty.</li>
<li><code>content</code>, content of the <code>mfm-test-generator</code> file. This content can be filled from an existing <code>mfm-test-generator</code> file using the <code>loadMFMTestGeneratorFileContent</code> function.</li>
</ul>
<h4 data-number="10.1.1.2" id="sec:tfel:4.1:mfmtg:loadMFMTestGeneratorFileContent"><span class="header-section-number">10.1.1.2</span> The <code>loadMFMTestGeneratorFileContent</code> function</h4>
<p>The <code>loadMFMTestGeneratorFileContent</code> function loads the content of an <code>mfm_test_generator</code> file and stores it in the <code>content</code> data member of a <code>TestDescription</code> data structure.</p>
<h4 data-number="10.1.1.3" id="sec:tfel:4.1:mfmtg:write"><span class="header-section-number">10.1.1.3</span> The <code>write</code> function</h4>
<p>The <code>write</code> function exports an <code>mfm_test_generator</code> test, described by a <code>TestDescription</code> data structure, to a file.</p>
<p>The file format is deduced from the extension of the file.</p>
<p>Currently, only extensions associated with the <a href="https://github.com/thelfer/madnex"><code>madnex</code> file format</a> are supported if <code>TFEL</code> is compiled with support of this file format. Those extensions are: <code>mdnx</code>, <code>madnex</code> (deprecated) or <code>edf</code> (experimental data file, deprecated). Note that the behaviour member of the metadata must be specified for export in the <code>madnex</code> file format.</p>
<h4 data-number="10.1.1.4" id="best-practices-1"><span class="header-section-number">10.1.1.4</span> Best practices</h4>
<p>We highly recommend to use the following substitution variables when defining the test:</p>
<ul>
<li><code>@interface@</code>, which is meant to be replaced by the interface to be used. This is very handy if the test can be run for different interfaces</li>
<li><code>@library@</code>, which is meant to be replaced by the path to the shared library containing the tested behaviour.</li>
<li><code>@behaviour@</code>, which contains the name of the function implementing the behaviour for the considered interface.</li>
</ul>
<h1 data-number="11" id="improvements-to-the-python-bindings"><span class="header-section-number">11</span> Improvements to the <code>python</code> bindings</h1>
<h2 data-number="11.1" id="improvements-to-the-tfelsystem-python-module"><span class="header-section-number">11.1</span> Improvements to the <code>TFEL/System</code> <code>python</code> module</h2>
<h3 data-number="11.1.1" id="retrieving-information-about-behaviours-post-processings-generated-by-the-generic-interface"><span class="header-section-number">11.1.1</span> Retrieving information about behaviours’ post-processings generated by the <code>generic</code> interface</h3>
<p>The <code>generic</code> interface generates a function dedicated for each initialize function and each modelling hypothesis supported (see Section 8.2 for details about initialize functions).</p>
<p>The <code>ExternalLibraryManager</code> class now exposes the following methods:</p>
<ul>
<li><code>getGenericBehaviourInitializeFunctionFunctions</code>, which returns the initialize functions associated with a behaviour.</li>
<li><code>getGenericBehaviourInitializeFunctionFunctionOutputs</code>, which returns the outputs of a initialize function function.</li>
<li><code>getGenericBehaviourInitializeFunctionFunctionOutputs</code>, which returns the types of the outputs of a initialize function function.</li>
</ul>
<h3 data-number="11.1.2" id="retrieving-information-about-behaviours-post-processings-generated-by-the-generic-interface-1"><span class="header-section-number">11.1.2</span> Retrieving information about behaviours’ post-processings generated by the <code>generic</code> interface</h3>
<p>The <code>generic</code> interface generates a function dedicated for each post-processing and each modelling hypothesis supported (see Section 8.3 for details about post-processings).</p>
<p>The <code>ExternalLibraryManager</code> class now exposes the following methods:</p>
<ul>
<li><code>getGenericBehaviourPostProcessingFunctions</code>, which returns the post-processings associated with a behaviour.</li>
<li><code>getGenericBehaviourPostProcessingFunctionOutputs</code>, which returns the outputs of a post-processing function.</li>
<li><code>getGenericBehaviourPostProcessingFunctionOutputs</code>, which returns the types of the outputs of a post-processing function.</li>
</ul>
<h2 data-number="11.2" id="improvements-to-the-mtest-python-module"><span class="header-section-number">11.2</span> Improvements to the <code>mtest</code> <code>python</code> module</h2>
<h2 data-number="11.3" id="sec:tfel_4.1:pymtest:behaviour_constructor"><span class="header-section-number">11.3</span> Support of named arguments in the constructor of the <code>Behaviour</code> class</h2>
<p>Named arguments are now supported in the <code>Behaviour</code> constructor. The following arguments can be specified:</p>
<ul>
<li><code>interface</code>: name of the interface to be used (optional).</li>
<li><code>library</code>: name of the shared library to be loaded.</li>
<li><code>function</code>: name of the function implementing the behaviour.</li>
<li><code>hypothesis</code>: hypothesis to be used.</li>
<li><code>wrapper</code>: name of the behaviour wrapper to be used (optional).</li>
</ul>
<h3 data-number="11.3.1" id="example-of-usage-9"><span class="header-section-number">11.3.1</span> Example of usage</h3>
<p>The following piece of code loads a behaviour implemented in the <code>src/libBehaviour.so</code> shared library by the <code>ImplicitNorton</code> function for the <code>PlaneStrain</code> modelling hypothesis:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> mtest.Behaviour(library <span class="op">=</span> <span class="st">&#39;src/libBehaviour.so&#39;</span>,</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>                    function <span class="op">=</span> <span class="st">&#39;ImplicitNorton&#39;</span>,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                    hypothesis <span class="op">=</span> <span class="st">&#39;PlaneStrain&#39;</span>)</span></code></pre></div>
<h2 data-number="11.4" id="sec:tfel:4.1:python:mtest:export_mtest_file"><span class="header-section-number">11.4</span> Exporting an <code>MTest</code>test to a <code>madnex</code> file</h2>
<p>The <code>TestDescription</code> data structure (see Section 9.1.1.1) and the <code>loadMTestFileContent</code> and <code>write</code> functions (see Sections 9.1.1.2 and 9.1.1.3) are exposed in the <code>mtest</code> <code>python</code> module.</p>
<h3 data-number="11.4.1" id="sec:tfel:4.1:python:mtest:export_mtest_file:usage"><span class="header-section-number">11.4.1</span> Example of usage</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mtest</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> mtest.TestDescription()</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>d.author <span class="op">=</span> <span class="st">&#39;John Doe&#39;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>d.date <span class="op">=</span> <span class="st">&#39;01/03/2022&#39;</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>d.name <span class="op">=</span> <span class="st">&#39;UniaxialTensileTest&#39;</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>d.scheme <span class="op">=</span> <span class="st">&#39;mtest&#39;</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>d.behaviour <span class="op">=</span> <span class="st">&#39;Plasticity&#39;</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>mtest.loadMTestFileContent(d, <span class="st">&#39;Plasticity.mtest&#39;</span>)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>mtest.write(d,<span class="st">&#39;Plasticity.mdnx&#39;</span>)</span></code></pre></div>
<h2 data-number="11.5" id="the-mfm_test_generator-python-module"><span class="header-section-number">11.5</span> The <code>mfm_test_generator</code> python module</h2>
<h3 data-number="11.5.1" id="sec:tfel:4.1:python:mfmtg:export_mfmtg_file"><span class="header-section-number">11.5.1</span> Exporting an <code>mfm-test-generator</code> test to a <code>madnex</code> file</h3>
<p>The <code>TestDescription</code> data structure (see Section 10.1.1.1) and the <code>loadMFMTestGeneratorFileContent</code> and <code>write</code> functions (see Sections 10.1.1.2 and 10.1.1.3) are exposed in the <code>mfm_test_generator</code> <code>python</code> module.</p>
<h3 data-number="11.5.2" id="sec:tfel:4.1:python:mfmtg:export_mfmtg_file:usage"><span class="header-section-number">11.5.2</span> Example of usage</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mfm_test_generator</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> mfm_test_generator.TestDescription()</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>d.author <span class="op">=</span> <span class="st">&#39;John Doe&#39;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>d.date <span class="op">=</span> <span class="st">&#39;01/03/2022&#39;</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>d.name <span class="op">=</span> <span class="st">&#39;UniaxialTensileTest&#39;</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>d.behaviour <span class="op">=</span> <span class="st">&#39;Plasticity&#39;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>mfm_test_generator.loadMFMTestGeneratorFileContent(d, <span class="st">&#39;Plasticity.mfmtg&#39;</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>mfm_test_generator.write(d,<span class="st">&#39;Plasticity.mdnx&#39;</span>)</span></code></pre></div>
<h1 data-number="12" id="mfront-query-improvements"><span class="header-section-number">12</span> <code>mfront-query</code> improvements</h1>
<h2 data-number="12.1" id="general-queries"><span class="header-section-number">12.1</span> General queries</h2>
<h3 data-number="12.1.1" id="sec:tfel_4.1:mfront_query:list_dependencies"><span class="header-section-number">12.1.1</span> List of dependencies of an <code>MFront</code> file</h3>
<p>The <code>--list-dependencies</code> query lists all the dependencies of an <code>MFront</code> file.</p>
<p>If a dependency is encoded in a <code>madnex</code> file, an internal representation of the path to this dependency is returned (see example below).</p>
<h4 data-number="12.1.1.1" id="example-of-usage-10"><span class="header-section-number">12.1.1.1</span> Example of usage</h4>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--list-dependencies</span> <span class="at">--search-path</span><span class="op">=</span>generate   <span class="dt">\</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">--madnex-search-path</span><span class="op">=</span>MaterialProperties.mdnx <span class="dt">\</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>               Test.mfront </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="ex">madnex:generate/MaterialProperties.mdnx:MaterialProperty::YoungModulusTest</span></span></code></pre></div>
<h2 data-number="12.2" id="new-material-property-query"><span class="header-section-number">12.2</span> New material property query</h2>
<h3 data-number="12.2.1" id="sec:tfel_4.1:mfront_query:mp:output"><span class="header-section-number">12.2.1</span> Output of a material property</h3>
<p>The <code>--output</code> query displays information about the output of a material property.</p>
<h4 data-number="12.2.1.1" id="example-of-usage-11"><span class="header-section-number">12.2.1.1</span> Example of usage</h4>
<div class="sourceCode" id="cb34"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront-query --output Inconel600_YoungModulus.mfront </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>- YoungModulus (E): The Young modulus of an isotropic material</span></code></pre></div>
<h3 data-number="12.2.2" id="sec:tfel_4.1:mfront_query:mp:inputs"><span class="header-section-number">12.2.2</span> Inputs of a material property</h3>
<p>The <code>--inputs</code> query displays information about the inputs of a material property.</p>
<h4 data-number="12.2.2.1" id="example-of-usage-12"><span class="header-section-number">12.2.2.1</span> Example of usage</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront-query --inputs Inconel600_YoungModulus.mfront </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>- Temperature (TK): The temperature</span></code></pre></div>
<h2 data-number="12.3" id="new-behaviour-queries"><span class="header-section-number">12.3</span> New behaviour queries</h2>
<h3 data-number="12.3.1" id="list-of-initialize-functions"><span class="header-section-number">12.3.1</span> List of initialize functions</h3>
<p>The list of initialize functions defined by a behaviour can be retrieved using the <code>--initialize functions</code> query, as follows:</p>
<p>s~~<del>{.bash} mfront-query –initialize-functions Plasticity.mfront - ElasticStrainFromInitialStress: no description available.</del>~~</p>
<h3 data-number="12.3.2" id="list-of-initialize-function-variables"><span class="header-section-number">12.3.2</span> List of initialize function variables</h3>
<p>The list of initialize function’ variables defined by a behaviour can be retrieved using the <code>--initialize function-variables</code> query.</p>
<h3 data-number="12.3.3" id="list-of-post-processings"><span class="header-section-number">12.3.3</span> List of post-processings</h3>
<p>The list of post-processings defined by a behaviour can be retrieved using the <code>--post-processings</code> query, as follows:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--post-processings</span> Elasticity.mfront </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> PrincipalStrain: compute the principal strain. Modified post-processing variables are:</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">-</span> PrincipalStrain <span class="er">(</span><span class="ex">εᵖ</span><span class="kw">)</span></span></code></pre></div>
<h3 data-number="12.3.4" id="list-of-post-processing-variables"><span class="header-section-number">12.3.4</span> List of post-processing variables</h3>
<p>The list of post-processing’ variables defined by a behaviour can be retrieved using the <code>--post-processing-variables</code> query, as follows:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mfront-query <span class="at">--post-processing-variables</span> Elasticity.mfront </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> PrincipalStrain <span class="er">(</span><span class="ex">εᵖ</span><span class="kw">)</span></span></code></pre></div>
<h3 data-number="12.3.5" id="list-of-mtest-tests-associated-with-a-behaviour-in-a-madnex-file"><span class="header-section-number">12.3.5</span> List of <code>MTest</code> tests associated with a behaviour in a <code>madnex</code> file</h3>
<p>The <code>--list-behaviour-mtest-tests</code> command line argument can be used to display the list of tests associated with a behaviour in a <code>madnex</code> file.</p>
<p>Optionnally, this command line argument accept the options <code>sorted-by-behaviours</code> or <code>unsorted</code> (see the examples below).</p>
<h4 data-number="12.3.5.1" id="examples-of-usage"><span class="header-section-number">12.3.5.1</span> Examples of usage</h4>
<div class="sourceCode" id="cb38"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront-query --list-behaviour-mtest-tests --test=<span class="st">&quot;.+Tensile.+&quot;</span> Plasticity.mdnx</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>- tests associated with behaviour Plasticity</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    - UniaxialTensileTest</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront-query --list-behaviour-mtest-tests=unsorted --test=<span class="st">&quot;.+Tensile.+&quot;</span> Plasticity.mdnx</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>UniaxialTensileTest</span></code></pre></div>
<h3 data-number="12.3.6" id="list-of-mfm-test-generator-tests-associated-with-a-behaviour-in-a-madnex-file"><span class="header-section-number">12.3.6</span> List of <code>mfm-test-generator</code> tests associated with a behaviour in a <code>madnex</code> file</h3>
<p>The <code>--list-behaviour-mfm-test-generator-tests</code> command line argument can be used to display the list of tests associated with a behaviour in a <code>madnex</code> file.</p>
<p>Optionnally, this command line argument accept the options <code>sorted-by-behaviours</code> or <code>unsorted</code> (see the examples below).</p>
<h4 data-number="12.3.6.1" id="examples-of-usage-1"><span class="header-section-number">12.3.6.1</span> Examples of usage</h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront-query --list-behaviour-mfm-test-generator-tests --test=<span class="st">&quot;.+Tensile.+&quot;</span> Plasticity.mdnx</span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="er">$</span> mfront-query --list-behaviour-mfm-test-generator-tests=unsorted --test=<span class="st">&quot;.+Tensile.+&quot;</span> Plasticity.mdnx</span></code></pre></div>
<h1 data-number="13" id="tfel-check-improvements"><span class="header-section-number">13</span> <code>tfel-check</code> improvements</h1>
<h2 data-number="13.1" id="sec:tfel_4.1:tfel_check:default_substitutions"><span class="header-section-number">13.1</span> Automatic declaration of substitutions for <code>TFEL</code> executables and <code>python</code> interpreter</h2>
<p>The following substitutions are automatically declared: <code>@mfront@</code>, <code>@mfront-query@</code>, <code>@mtest@</code>, <code>@mfront-doc@</code>, <code>@mfm-test-generator@</code>.</p>
<p>In <code>python</code> bindings are enabled, the <code>@python</code> substitution is also automatically declared.</p>
<p>Those substitutions are declared after reading the configuration files and after parsing the command line arguments, so those default substitutions can be overriden by the user.</p>
<h1 data-number="14" id="issues-fixed"><span class="header-section-number">14</span> Issues fixed</h1>
<h2 data-number="14.1" id="issue-210-tfel-check-allow-to-split-command-in-multiple-strings"><span class="header-section-number">14.1</span> Issue #210: [tfel-check] Allow to split command in multiple strings</h2>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/210" class="uri">https://github.com/thelfer/tfel/issues/210</a>.</p>
<h2 data-number="14.2" id="issue-209-tfel-utilities-convertion-from-data-to-stdvector-and-stdmap-shall-work-if-the-object-is-empty"><span class="header-section-number">14.2</span> Issue #209: [tfel-utilities] Convertion from <code>Data</code> to <code>std::vector</code> and <code>std::map</code> shall work if the object is empty</h2>
<p>￼ For more details, see <a href="https://github.com/thelfer/tfel/issues/209" class="uri">https://github.com/thelfer/tfel/issues/209</a>.</p>
<p>￼ ## Issue #208: [tfel-check] Automatic declaration of substitutions for <code>TFEL</code> executables and <code>python</code> interpreter</p>
<p>This feature is described in Section 13.1.</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/208" class="uri">https://github.com/thelfer/tfel/issues/208</a>.</p>
<h2 data-number="14.3" id="issue-207-tfel-check-allow-comments-in-config-files"><span class="header-section-number">14.3</span> Issue #207: [tfel-check] allow comments in config files</h2>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/207" class="uri">https://github.com/thelfer/tfel/issues/207</a>.</p>
<h2 data-number="14.4" id="issue-200-mfront-generate-a-setparameter-function-for-material-properties-generated-with-the-python-interface"><span class="header-section-number">14.4</span> Issue #200: [mfront] Generate a <code>setParameter</code> function for material properties generated with the <code>python</code> interface</h2>
<p>￼</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/200" class="uri">https://github.com/thelfer/tfel/issues/200</a>.</p>
<h2 data-number="14.5" id="issue-199-mfront-query-add-the---parameters-file-query-for-material-properties"><span class="header-section-number">14.5</span> Issue #199: [mfront-query] Add the <code>--parameters-file</code> query for material properties</h2>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/199" class="uri">https://github.com/thelfer/tfel/issues/199</a>.</p>
<h2 data-number="14.6" id="issue-197-mfront-extension-of-the-derivative_type-metafunction-to-higher-order-derivatives"><span class="header-section-number">14.6</span> Issue #197: [mfront] Extension of the <code>derivative_type</code> metafunction to higher order derivatives</h2>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/197" class="uri">https://github.com/thelfer/tfel/issues/197</a>.</p>
<h2 data-number="14.7" id="issue-192-tfelsystem-access-to-default-values-of-parameters-of-a-material-property-through-the-externalmaterialpropertydescription-class"><span class="header-section-number">14.7</span> Issue #192: [TFEL/System] Access to default values of parameters of a material property through the <code>ExternalMaterialPropertyDescription</code> class</h2>
<p>This feature is described in Section 4.3.2.1.</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/192" class="uri">https://github.com/thelfer/tfel/issues/192</a>.</p>
<h2 data-number="14.8" id="issue-191-tfelsystem-ability-to-request-bounds-of-variables-inputs-outputs-of-a-material-property-in-the-externalmaterialpropertydescription-class"><span class="header-section-number">14.8</span> Issue #191: [TFEL/System] Ability to request bounds of variables (inputs, outputs) of a material property in the <code>ExternalMaterialPropertyDescription</code> class</h2>
<p>Those features are described in Section 4.3.2.2.</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/191" class="uri">https://github.com/thelfer/tfel/issues/191</a>.</p>
<h2 data-number="14.9" id="issue-187-mfront-get-output-from-compiled-file-through-python-bindings"><span class="header-section-number">14.9</span> Issue #187: [mfront] Get <code>@Output</code> from compiled file through <code>python</code> bindings</h2>
<p>This feature is described in Section 4.1.8.</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/187" class="uri">https://github.com/thelfer/tfel/issues/187</a>.</p>
<h2 data-number="14.10" id="issue-186-mfront-get-material-law-author-date-description-from-compiled-file-through-python-binding"><span class="header-section-number">14.10</span> Issue #186: [mfront] Get <code>@Material</code>, <code>@Law</code>, <code>@Author</code>, <code>@Date</code>, <code>@Description</code> from compiled file through Python binding</h2>
<p>Those features are described in Sections 4.1.4, 4.1.5, 4.1.6 and 4.1.7.</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/186" class="uri">https://github.com/thelfer/tfel/issues/186</a>.</p>
<h2 data-number="14.11" id="issue-183-mfront-the-rkcastem-algorithm-assumes-that-a-variable-young-is-defined"><span class="header-section-number">14.11</span> Issue #183: [mfront] The <code>rkCastem</code> algorithm assumes that a variable <code>young</code> is defined</h2>
<p>This feature is described in Section 8.7.1.</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/183" class="uri">https://github.com/thelfer/tfel/issues/183</a>.</p>
<h2 data-number="14.12" id="issue-181-mfront-query-add-query-about-the-output-of-a-material-property"><span class="header-section-number">14.12</span> Issue #181: [mfront-query] add query about the output of a material property</h2>
<p>This feature is described in Section 12.2.1.</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/181" class="uri">https://github.com/thelfer/tfel/issues/181</a></p>
<h2 data-number="14.13" id="issue-180-mfront-query-add-query-about-the-inputs-of-a-material-property"><span class="header-section-number">14.13</span> Issue #180: [mfront-query] add query about the inputs of a material property</h2>
<p>This feature is described in Section 12.2.2.</p>
<p>For more details, see <a href="https://github.com/thelfer/tfel/issues/180" class="uri">https://github.com/thelfer/tfel/issues/180</a></p>
<h2 data-number="14.14" id="issue-177-mtest-support-of-material-properties-generated-with-the-generic-interface"><span class="header-section-number">14.14</span> Issue #177: [mtest] Support of material properties generated with the generic interface</h2>
<p>The feature is described in Section 9.6.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/177" class="uri">https://github.com/thelfer/tfel/issues/177</a>.</p>
<h2 data-number="14.15" id="sec:tfel:4.1:issue:172"><span class="header-section-number">14.15</span> Issue #172: [tfel-math-parser] Add the ability to derive the power function enhancement</h2>
<p>Previous versions of <code>TFEL/Math</code> did not implement the evaluation the derivative of the formula <code>power&lt;N&gt;(x)</code>. This is now implemented properly.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/172" class="uri">https://github.com/thelfer/tfel/issues/172</a>.</p>
<h2 data-number="14.16" id="issue-171-tfel-math-parser-correct-derivative-of-exponents-bug"><span class="header-section-number">14.16</span> Issue #171: ￼[tfel-math-parser] Correct derivative of exponents bug</h2>
<p>The computation of the derivative of power functions lead to the following issues in previous versions of <code>TFEL</code>. The derivative of <code>a(x)**b(x)</code> with respect to <code>x</code> was computed as <code>(b(x)*a(x)**b(x)/a(x))*da(x)+log(a(x))*a(x)**b(x)*db(x)</code> where <code>da(x)</code> and <code>db(x)</code> denote the deriative of <code>a</code> and with respect to <code>x</code>.</p>
<ol type="1">
<li>The first term <code>b(x)*a(x)**b(x)/a(x)*da(x)</code> is singular if <code>a(x)</code> is null. This term is now computed as <code>b(x)*a(x)**(b(x)-1)*da(x)</code>.</li>
<li>The second term <code>log(a(x))*a(x)**b(x)*db(x)</code> is singular if <code>a(x)</code> is null although <code>log(a(x))*a(x)**b(x)</code> has a well defined limit as a tends to zero. The new implementation takes this case into account.</li>
</ol>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/171" class="uri">https://github.com/thelfer/tfel/issues/171</a>.</p>
<h2 data-number="14.17" id="issue-170-tfel-math-parser-add-support-for-integer-exponent"><span class="header-section-number">14.17</span> Issue #170: [tfel-math-parser] Add support for integer exponent</h2>
<p>In previous versions, the formula <code>x**N</code> was evaluated using <code>std::pow(x,N)</code> even if <code>N</code> was an integer.</p>
<p>This formula is now evaluated as:</p>
<ul>
<li><code>tfel::math::power&lt;N&gt;(x)</code> if <code>N</code> is in the ranges <code>[-16:-1]</code> or <code>[2:16]</code>.</li>
<li><code>x**0</code> is evaluated as <code>1</code>.</li>
<li><code>x**1</code> is evaluated as <code>x</code>.</li>
<li><code>std::pow(x,N)</code> otherwise.</li>
</ul>
<p>See also Issue 172.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/170" class="uri">https://github.com/thelfer/tfel/issues/170</a>.</p>
<h2 data-number="14.18" id="issue-169-tfel-math-parser-add-feature-to-simplify-formula"><span class="header-section-number">14.18</span> Issue #169: [tfel-math-parser] Add feature to simplify formula</h2>
<h3 data-number="14.18.1" id="more-efficient-evaluation-of-derivatives"><span class="header-section-number">14.18.1</span> More efficient evaluation of derivatives</h3>
<p>In previous versions, the evaluation of derivatives of a formula could lead to inefficient evaluation tree. For example, the derivative of the formula <code>x+exp(y)</code> with respect to <code>x</code> was computed as <code>1+exp(y)*0</code>, which required a useless evaluation of <code>exp(y)</code>. Version 4.1 evaluates this derivative as <code>1</code>.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/169" class="uri">https://github.com/thelfer/tfel/issues/169</a>.</p>
<h2 data-number="14.19" id="issue-157-disable-reportcontractviolation-on-gpus"><span class="header-section-number">14.19</span> Issue #157: Disable <code>reportContractViolation</code> on GPUs</h2>
<p>See Section 3.1.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/157" class="uri">https://github.com/thelfer/tfel/issues/157</a>.</p>
<h2 data-number="14.20" id="issue-150-tfelmaterial-add-device-specification"><span class="header-section-number">14.20</span> Issue #150: [TFEL/Material] Add device specification</h2>
<p>See Sections 2.1 and 7.2.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/150" class="uri">https://github.com/thelfer/tfel/issues/150</a>.</p>
<h2 data-number="14.21" id="issue-148-tfelmaterial-constexpr-all-the-things"><span class="header-section-number">14.21</span> Issue #148: [TFEL/Material] <code>constexpr</code> all the things</h2>
<p>See Section 7.1.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/148" class="uri">https://github.com/thelfer/tfel/issues/148</a>.</p>
<h2 data-number="14.22" id="issue-145-mfront-automatically-add-a-madnex-input-file-to-the-search-paths"><span class="header-section-number">14.22</span> Issue #145: [mfront] Automatically add a madnex input file to the search paths</h2>
<p>This feature is described in Section 8.5.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/145" class="uri">https://github.com/thelfer/tfel/issues/145</a>.</p>
<h2 data-number="14.23" id="issue-144-mfront-query-list-dependencies-of-a-mfront-file"><span class="header-section-number">14.23</span> Issue #144: [mfront-query] List dependencies of a <code>mfront</code> file</h2>
<p>This feature is described in Section 12.1.1.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/144" class="uri">https://github.com/thelfer/tfel/issues/144</a>.</p>
<h2 data-number="14.24" id="issue-143-mfront-add-the-ability-to-append-a-madnex-paths-to-the-search-paths"><span class="header-section-number">14.24</span> Issue #143: [mfront] Add the ability to append a madnex paths to the search paths</h2>
<p>This feature is described in Section 8.4.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/143" class="uri">https://github.com/thelfer/tfel/issues/143</a>.</p>
<h2 data-number="14.25" id="issue-125-mfront-remove-behaviour-sources-if-not-needed"><span class="header-section-number">14.25</span> Issue #125: [mfront] Remove behaviour sources if not needed</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/125" class="uri">https://github.com/thelfer/tfel/issues/125</a>.</p>
<h2 data-number="14.26" id="issue-124-mfront-add-dsl-option-to-disable-runtime-change-of-the-out-of-bound-policy"><span class="header-section-number">14.26</span> Issue #124: [mfront] Add DSL option to disable runtime change of the out of bound policy</h2>
<p>This feature is described in Section 8.1.6.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/124" class="uri">https://github.com/thelfer/tfel/issues/124</a>.</p>
<h2 data-number="14.27" id="issue-123-mfront-add-dsl-option-to-change-the-default-out-of-bounds-policy"><span class="header-section-number">14.27</span> Issue #123: [mfront] Add DSL option to change the default out of bounds policy</h2>
<p>This feature is described in Section 8.1.5.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/123" class="uri">https://github.com/thelfer/tfel/issues/123</a>.</p>
<h2 data-number="14.28" id="issue-122-mfront-remove-usage-of-exceptions-in-the-computetangentoperator-method-generated-by-the-implicit-dsl"><span class="header-section-number">14.28</span> Issue #122: [mfront] remove usage of exceptions in the computeTangentOperator method generated by the <code>Implicit</code> DSL</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/122" class="uri">https://github.com/thelfer/tfel/issues/122</a>.</p>
<h2 data-number="14.29" id="issue-111-mtest-support-for-madnex-file"><span class="header-section-number">14.29</span> Issue #111: [mtest] Support for <code>madnex</code> file</h2>
<p>This feature is described in depth in Section 9.1.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/111" class="uri">https://github.com/thelfer/tfel/issues/111</a>.</p>
<h2 data-number="14.30" id="issue-108-mtest-support-for-extended-types-in-mtest"><span class="header-section-number">14.30</span> Issue #108: [mtest] Support for extended types in MTest</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/108" class="uri">https://github.com/thelfer/tfel/issues/108</a>.</p>
<h2 data-number="14.31" id="issue-94-mfront-add-option-to-disable-initialization-of-parameters-from-text-file"><span class="header-section-number">14.31</span> Issue 94: [mfront] Add option to disable initialization of parameters from text file</h2>
<p>This feature is described in Section 8.1.4.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/94" class="uri">https://github.com/thelfer/tfel/issues/94</a>.</p>
<h2 data-number="14.32" id="issue-92-mfront-create-a-generic-interface-for-point-wise-models"><span class="header-section-number">14.32</span> Issue 92: [mfront] create a generic interface for point wise models</h2>
<p>This feature is described in Section 8.10.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/92" class="uri">https://github.com/thelfer/tfel/issues/92</a>.</p>
<h2 data-number="14.33" id="issue-91-mfront-define-build-identifier-using-options"><span class="header-section-number">14.33</span> Issue 91: [mfront] define build identifier using options</h2>
<p>This feature is described in Section 8.1.2.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/90" class="uri">https://github.com/thelfer/tfel/issues/90</a>.</p>
<h2 data-number="14.34" id="issue-90-mfront-create-a-generic-interface-for-material-properties"><span class="header-section-number">14.34</span> Issue 90: [mfront] create a generic interface for material properties</h2>
<p>This feature is described in Section 8.9.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/90" class="uri">https://github.com/thelfer/tfel/issues/90</a>.</p>
<h2 data-number="14.35" id="issue-83-mfront-add-a-command-line-argument-to-retrieve-the-list-of-options-associated-with-a-domain-specific-language"><span class="header-section-number">14.35</span> Issue #83: [mfront] Add a command line argument to retrieve the list of options associated with a domain specific language</h2>
<p>This feature is described in Section 8.1.8.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/83" class="uri">https://github.com/thelfer/tfel/issues/83</a>.</p>
<h2 data-number="14.36" id="issue-82-mfront-ability-to-define-dsl-options-on-the-command-line"><span class="header-section-number">14.36</span> Issue #82: [mfront] Ability to define DSL options on the command line</h2>
<p>This feature is described in Section 8.1.7.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/82" class="uri">https://github.com/thelfer/tfel/issues/82</a>.</p>
<h2 data-number="14.37" id="issue-55-mtest-creation-of-a-wrapper-around-behaviours-written-in-the-logarithmic-strain-framework-generated-with-the-aster-interface"><span class="header-section-number">14.37</span> Issue #55: [mtest] Creation of a wrapper around behaviours written in the logarithmic strain framework generated with the <code>aster</code> interface</h2>
<p>The wrapper is described in Section 9.5.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/55" class="uri">https://github.com/thelfer/tfel/issues/55</a>.</p>
<h2 data-number="14.38" id="issue-57-gallery-mistakes-in-the-drucker-prager-cap-model-of-the-gallery"><span class="header-section-number">14.38</span> Issue #57: [gallery] Mistakes in the Drucker Prager Cap model of the gallery</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/57" class="uri">https://github.com/thelfer/tfel/issues/57</a>.</p>
<h2 data-number="14.39" id="sec:tfel:4.1:issue:50"><span class="header-section-number">14.39</span> Issue #50: [mfront] Options to avoid the automatic declaration of the temperature as an external state variable</h2>
<p>This option is described in depth in Section 8.1.3.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/50" class="uri">https://github.com/thelfer/tfel/issues/50</a>.</p>
<h2 data-number="14.40" id="issue-44-mtest-add-support-for-a-boundary-condition-modelling-the-effet-of-a-mandrel-in-pipe-modelling"><span class="header-section-number">14.40</span> Issue #44: [mtest] Add support for a boundary condition modelling the effet of a mandrel in pipe modelling</h2>
<p>The feature is described in Section 9.2.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/38" class="uri">https://github.com/thelfer/tfel/issues/38</a>.</p>
<h2 data-number="14.41" id="issue-39-tfel-config-add-query-associated-with-python-bindings-support"><span class="header-section-number">14.41</span> Issue #39: [tfel-config] Add query associated with python bindings support</h2>
<p><code>tfel-config</code> now supports an command line option named <code>--python-bindings-support</code> which displays true if <code>python</code> bindings are available, <code>false</code> otherwise.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/39" class="uri">https://github.com/thelfer/tfel/issues/39</a>.</p>
<h2 data-number="14.42" id="issue-38-tfel-config-add-query-associated-with-madnex-support"><span class="header-section-number">14.42</span> Issue #38: [tfel-config] Add query associated with <code>madnex</code> support</h2>
<p><code>tfel-config</code> now supports an command line option named <code>--madnex-support</code> which displays true if <code>madnex</code> files are supported, <code>false</code> otherwise.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/38" class="uri">https://github.com/thelfer/tfel/issues/38</a>.</p>
<h2 data-number="14.43" id="issue-36-mfront-improved-support-for-mtest-file-generation-all-kind-of-state-variables"><span class="header-section-number">14.43</span> Issue #36: [mfront] Improved support for <code>MTest</code> file generation (all kind of state variables)</h2>
<p>In previous versions, only scalar and symmetric tensors state variables were supported when generation <code>MTest</code> file on integration failure.</p>
<p>All kind of state variables are now supported.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/36" class="uri">https://github.com/thelfer/tfel/issues/36</a>.</p>
<h2 data-number="14.44" id="issue-28-mtest-support-of-tensorial-external-state-variables"><span class="header-section-number">14.44</span> Issue #28: [mtest] Support of tensorial external state variables</h2>
<p>The <code>Behaviour</code> class has new methods:</p>
<ul>
<li><code>expandExternalStateVariablesNames</code> (wrapped in python)</li>
<li><code>getExternalStateVariableType</code> (wrapped in python)</li>
<li><code>getExternalStateVariablePosition</code> (wrapped in python)</li>
</ul>
<p>The <code>@ExternalStateVariable</code> now allows to define tensorial external state variables components by components or an array as follows:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Definition of an symmetric tensor external state variable</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g&quot;</span> {<span class="st">&quot;0&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;3 * t&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;5 * t&quot;</span>};</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Definition of an symmetric tensor external state variable components by components</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2XX&quot;</span>  <span class="st">&quot;0&quot;</span>;</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2YY&quot;</span>  <span class="st">&quot;2&quot;</span>;</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2ZZ&quot;</span>  <span class="st">&quot;t&quot;</span>;</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2XY&quot;</span>  <span class="st">&quot;3&quot;</span>;</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2XZ&quot;</span>  <span class="st">&quot;4&quot;</span>;</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="er">@</span>ExternalStateVariable&lt;function&gt; <span class="st">&quot;g2YZ&quot;</span>  <span class="st">&quot;5*t&quot;</span>;</span></code></pre></div>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/28" class="uri">https://github.com/thelfer/tfel/issues/28</a>.</p>
<h2 data-number="14.45" id="issue-28-mtest-support-of-tensorial-external-state-variables-1"><span class="header-section-number">14.45</span> Issue #28: [mtest] Support of tensorial external state variables</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/28" class="uri">https://github.com/thelfer/tfel/issues/28</a>.</p>
<h2 data-number="14.46" id="issue-27-mfront-better-support-of-tensorial-external-state-variables"><span class="header-section-number">14.46</span> Issue #27: [mfront] Better support of tensorial external state variables</h2>
<p>The type of the external state variables are now exported.</p>
<ul>
<li><code>ExternalLibraryManager</code> has a new method called <code>getUMATExternalStateVariablesTypes</code> (wrapped in <code>python</code>)</li>
<li><code>ExternalBehaviourDescription</code> has a new method called <code>evtypes</code> (wrapped in <code>python</code>)</li>
</ul>
<p>Generation of <code>MTest</code> file also supports tensor external state variables.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/27" class="uri">https://github.com/thelfer/tfel/issues/27</a>.</p>
<h2 data-number="14.47" id="issue-26-dont-use-explicit-instanciation-for-static-variables"><span class="header-section-number">14.47</span> Issue #26: Don’t use explicit instanciation for static variables</h2>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/26" class="uri">https://github.com/thelfer/tfel/issues/26</a>.</p>
<h2 data-number="14.48" id="issue-25-mfront-add-ability-to-define-initialisation-functions"><span class="header-section-number">14.48</span> Issue #25: [mfront] Add ability to define initialisation functions</h2>
<p>This feature is described in Section 8.2.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/25" class="uri">https://github.com/thelfer/tfel/issues/25</a>.</p>
<h2 data-number="14.49" id="issue-24-mfront-add-ability-to-define-post-processings"><span class="header-section-number">14.49</span> Issue #24: [mfront] Add ability to define post-processings</h2>
<p>This feature is described in Section 8.3.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/24" class="uri">https://github.com/thelfer/tfel/issues/24</a>.</p>
<h2 data-number="14.50" id="issue-23-mfront-remove-usage-of-c-reserved-variables-names"><span class="header-section-number">14.50</span> Issue #23: [mfront] Remove usage of C++ reserved variables names</h2>
<p>Some exported variables used to contain a double underscore in their names. Such names are reserved by the C++ standard for internal use by the compilers.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/23" class="uri">https://github.com/thelfer/tfel/issues/23</a>.</p>
<h2 data-number="14.51" id="issue-22-mfront-option-to-treat-parameters-as-static-variables"><span class="header-section-number">14.51</span> Issue #22 : [mfront] Option to treat parameters as static variables</h2>
<p>This option is described in depth in Section 8.1.1.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/22" class="uri">https://github.com/thelfer/tfel/issues/22</a>.</p>
<h2 data-number="14.52" id="issue-20-mtest-declaration-of-a-behaviour-wrapper-in-python-module"><span class="header-section-number">14.52</span> Issue #20: [mtest] Declaration of a behaviour wrapper in python module</h2>
<p>As described in Section 11.3, named parameters are now supported in the constructor of the <code>Behaviour</code> class. The (optional) <code>wrapper</code> argument can now be used to specify a behaviour wrapper.</p>
<p>Currently, two behaviours wrappers are available:</p>
<ul>
<li><code>LogarithmicStrain1D</code>: which turns a small strain behaviour in axisymmetrical generalised plane strain into a finite strain behaviour in the logarithmic strain framework following the ETO-PK1 kinematic assumption used by the <code>MTest</code> for the simulation of pipe in finite strain.</li>
<li><code>SmallStrainTridimensionalBehaviourWrapper</code> which allows to use a small strain tridimensional behaviour under the following modelling hypotheses: axisymmetrical generalised plane strain, plane strain, axisymmetry.</li>
</ul>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/20" class="uri">https://github.com/thelfer/tfel/issues/20</a>.</p>
<h2 data-number="14.53" id="issue-18-mtest-usage-of-a-3d-behaviour-in-ptest"><span class="header-section-number">14.53</span> Issue #18: [mtest] Usage of a <code>3D</code> behaviour in <code>ptest</code></h2>
<p>Thanks the <code>SmallStrainTridimensionalBehaviourWrapper</code> class detailled in Section 9.3, tridimensional behaviours can be used under the following modelling hypotheses: generalised plane strain, plane strain, axisymmetrical generalised plane strain.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/18" class="uri">https://github.com/thelfer/tfel/issues/18</a>.</p>
<h2 data-number="14.54" id="issue-15-mtest-new-option-for-the-declaration-of-the-rotation-matrix-in-mtest"><span class="header-section-number">14.54</span> Issue #15: [mtest] New option for the declaration of the rotation matrix in <code>MTest</code></h2>
<p>This option is described in depth in Section 9.4.</p>
<p>For more details, see : <a href="https://github.com/thelfer/tfel/issues/15" class="uri">https://github.com/thelfer/tfel/issues/15</a>.</p>
<!--
# References
-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-62273823-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
