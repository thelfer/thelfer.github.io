<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-EN" xml:lang="en-EN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>MFrontGenericInterfaceSupport Version 2.1</title>
        <meta name="author" content="Thomas Helfer" />
            <meta name="date" content="2020-01-01" />
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <style type="text/css">code{white-space: pre;}</style>
            <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #c4a000; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #000000; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #000000; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #000000; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
            <link rel="stylesheet" href="/home/th202608/codes/mgis/master/src/MFrontGenericInterfaceSupport/docs/web/css/main.css" />
        <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/main.css"/>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
          </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
        <header>
      <ul id="nav">
	<li><a href="index.html">Overview</a></li>
	<li><a>Documentation</a>
	  <ul>
	    <li><a href="https://www.theoj.org/joss-papers/joss.02003/10.21105.joss.02003.pdf"> JOSS paper</a></li>
	    <li><a href="bindings-cxx.html">Description of the C++ library</a></li>
	    <li><a href="install.html">Installation guide</a></li>
	    <!-- <li><a>Bindings</a> -->
	    <!-- 	<ul> -->
	    <!-- 	</ul> -->
	    <!-- </li> -->
	    <li><a href="mgis_fenics.html">mgis.fenics</a>
	      <ul>
		<li><a href="mgis_fenics.html">Overview of mgis.fenics</a></li>
		<li><a href="mgis_fenics_nonlinear_heat_transfer.html">Stationnary non-linear heat transfer</a></li>
		<li><a href="mgis_fenics_nonlinear_heat_transfer_3D.html">Stationnary non-linear heat transfer: 3D problem and performance comparisons</a></li>
		<li><a href="mgis_fenics_heat_equation_phase_change.html">Transient heat equation with phase change</a></li>
		<li><a href="mgis_fenics_monolithic_transient_thermoelasticity.html">Monolithic transient thermoelasticity</a></li>
		<li><a href="mgis_fenics_small_strain_elastoplasticity.html">Small-strain von Mises elastoplasticity</a></li>
		<li><a href="mgis_fenics_finite_strain_elastoplasticity.html">Finite-strain elastoplasticity within the logarithmic strain framework</a></li>
		<li><a href="mgis_fenics_multiphase_model.html">Multiphase model for fiber-reinforced materials</a></li>
		<li><a href="mgis_fenics_phase_field.html">Phase-field approach to brittle fracture</a></li>
	      </ul>
	    </li>
	    <li><a>Release notes</a>
	      <ul>
		<li><a>Version 1.1.x</a>
		  <ul>
		    <li><a href="release-notes-1.1.html">Version 1.1</a></li>
		    <li><a href="release-notes-1.1.1.html">Version 1.1.1</a></li>
		  </ul>
		</li>
		<li><a>Version 1.2.x</a>
		  <ul>
		    <li><a href="release-notes-1.2.html">Version 1.2</a></li>
		    <li><a href="release-notes-1.2.1.html">Version 1.2.1</a></li>
		    <li><a href="release-notes-1.2.2.html">Version 1.2.2</a></li>
		  </ul>
		</li>
		<li><a>Version 2.0.x</a>
		  <ul>
		    <li><a href="release-notes-2.0.html">Version 2.0</a></li>
		    <li><a href="release-notes-2.0.html">Version 2.1</a></li>
		  </ul>
		</li>
	      </ul>
	    </li>
	    <li><a>Specific topics</a>
	      <ul>
		<li><a href="orthotropic-behaviours.html">Support for orthotropic behaviours</a></li>
	      </ul>
	    </li>
	    <li><a href="faq.html">FAQ</a></li>
	    <li><a href="about.html">About</a></li>
	  </ul>
	</li>
	<li><a>Contributing</a>
	  <ul>
	    <li><a href="contributing.html">Contributing guidelines</a></li>
	    <li><a href="https://github.com/thelfer/MFrontGenericInterfaceSupport/issues">Report bugs</a></li>
	  </ul>
	</li>
	<li><a>Getting Help</a>
	  <ul>
	    <li><a href="https://github.com/thelfer/MFrontGenericInterfaceSupport/issues">Forum</a></li>
	    <li><a href="mailto:tfel-contact@cea.fr">Contact</a></li>
	  </ul>
	</li>
      </ul>
    </header>
    <br></br>
<div id="header">
<h1 class="title">MFrontGenericInterfaceSupport Version 2.1</h1>
<h2 class="author">Thomas Helfer</h2>
<h3 class="date">2020</h3>
</div>
<div id="TOC">
<ul>
<li><a href="#known-incompatibilities">Known incompatibilities</a>
<ul>
<li><a href="#integral-values-of-variablevector-and-variablestensor">Integral values of <code>Variable::VECTOR</code> and <code>Variable::STENSOR</code></a></li>
<li><a href="#removed-function-in-c">Removed function in <code>C++</code></a></li>
<li><a href="#c-bindings"><code>C</code> bindings</a>
<ul>
<li><a href="#integral-values-of-mgis_bv_vector-and-mgis_bv_stensor">Integral values of <code>MGIS_BV_VECTOR</code> and <code>MGIS_BV_STENSOR</code></a></li>
<li><a href="#removed-functions">Removed functions</a></li>
</ul></li>
<li><a href="#fortran-bindings"><code>fortran</code> bindings</a>
<ul>
<li><a href="#mgis_behaviour-module"><code>mgis_behaviour</code> module</a></li>
</ul></li>
</ul></li>
<li><a href="#new-features">New features</a>
<ul>
<li><a href="#sec:mgis:2.1:exented_types">Support for extended types</a></li>
<li><a href="#sec:mgis:2.1:initialize_functions">Support for behaviours’ initialize functions</a>
<ul>
<li><a href="#example-of-usage">Example of usage</a></li>
</ul></li>
<li><a href="#sec:mgis:2.1:postprocessings">Support for behaviours’ post-processings</a>
<ul>
<li><a href="#example-of-usage-1">Example of usage</a></li>
</ul></li>
</ul></li>
<li><a href="#issues-solved">Issues solved</a>
<ul>
<li><a href="#issue-83-add-support-for-extended-variable-types">Issue #83: Add support for extended variable types</a></li>
<li><a href="#issue-82-add-support-for-behaviour-post-processings">Issue #82: Add support for behaviour post-processings</a></li>
<li><a href="#issue-78-add-support-for-behaviours-which-does-not-declare-the-temperature-as-the-first-external-state-variable">Issue #78: Add support for behaviours which does not declare the temperature as the first external state variable</a></li>
<li><a href="#issue-74-support-for-tensorial-external-state-variables">Issue #74: Support for tensorial external state variables</a></li>
<li><a href="#issue-50-new-feature-request-initialize-initial-stress-in-mgis.fenics">Issue #50: new feature request: initialize initial stress in <code>mgis.fenics</code></a></li>
</ul></li>
</ul>
</div>
<h1 id="known-incompatibilities">Known incompatibilities</h1>
<h2 id="integral-values-of-variablevector-and-variablestensor">Integral values of <code>Variable::VECTOR</code> and <code>Variable::STENSOR</code></h2>
<p>The integral values of <code>Variable::VECTOR</code> and <code>Variable::STENSOR</code> have changed to match <code>TFEL</code> conventions.</p>
<h2 id="removed-function-in-c">Removed function in <code>C++</code></h2>
<p>The following functions were removed:</p>
<ul>
<li><code>getUniformMaterialProperty</code></li>
<li><code>getNonUniformMaterialProperty</code></li>
<li><code>getUniformExternalStateVariable</code></li>
<li><code>getNonUniformExternalStateVariable</code></li>
</ul>
<h2 id="c-bindings"><code>C</code> bindings</h2>
<h3 id="integral-values-of-mgis_bv_vector-and-mgis_bv_stensor">Integral values of <code>MGIS_BV_VECTOR</code> and <code>MGIS_BV_STENSOR</code></h3>
<p>The integral values of <code>MGIS_BV_VECTOR</code> and <code>MGIS_BV_STENSOR</code> have changed to match <code>TFEL</code> conventions.</p>
<h3 id="removed-functions">Removed functions</h3>
<p>The following functions were removed:</p>
<ul>
<li><code>mgis_bv_material_state_manager_get_uniform_material_property</code></li>
<li><code>mgis_bv_material_state_manager_get_non_uniform_material_property</code></li>
<li><code>mgis_bv_material_state_manager_get_uniform_external_state_variable</code></li>
<li><code>mgis_bv_material_state_manager_get_non_uniform_external_state_variable</code></li>
</ul>
<h2 id="fortran-bindings"><code>fortran</code> bindings</h2>
<h3 id="mgis_behaviour-module"><code>mgis_behaviour</code> module</h3>
<h4 id="integral-values-of-vector-and-stensor">Integral values of <code>VECTOR</code> and <code>STENSOR</code></h4>
<p>The integral values of <code>VECTOR</code> and <code>STENSOR</code> have changed to match <code>TFEL</code> conventions.</p>
<h4 id="removed-functions-1">Removed functions</h4>
<p>The following functions were removed from the <code>mgis_behaviour</code> module:</p>
<ul>
<li><code>material_state_manager_get_uniform_material_property</code></li>
<li><code>material_state_manager_get_non_uniform_material_property</code></li>
<li><code>material_state_manager_get_uniform_external_state_variable</code></li>
<li><code>material_state_manager_get_non_uniform_external_state_variable</code></li>
</ul>
<h1 id="new-features">New features</h1>
<h2 id="sec:mgis:2.1:exented_types">Support for extended types</h2>
<p>In previous versions, only four types of variables were supported (scalars, vectors, symmetric tensors and unsymmetric tensors). The size of those variables is a function on the modelling hypothesis. The type of the variables was given by the <code>Variable::Type</code> enumeration which could hold the values <code>SCALAR</code>, <code>VECTOR</code>, <code>STENSOR</code>, and <code>TENSOR</code>.</p>
<p>The <code>Variable::Type</code> enumeration may now hold the following values: <code>SCALAR</code>, <code>VECTOR</code>, <code>VECTOR_1D</code>, <code>VECTOR_2D</code>, <code>VECTOR_3D</code>, <code>STENSOR</code>, <code>STENSOR_1D</code>, <code>STENSOR_2D</code>, <code>STENSOR_3D</code>, <code>TENSOR</code>, <code>TENSOR_1D</code>, <code>TENSOR_2D</code>, <code>TENSOR_3D</code>, <code>HIGHER_ORDER_TENSOR</code> and <code>ARRAY</code>.</p>
<p>The <code>Variable</code> class exposes an integer named <code>type_identifier</code> describing more precisely the type of the variable. The meaning of this identifier is fully described in <a href="https://thelfer.github.io/tfel/web/mfront-types.html">this page</a>.</p>
<p>The <code>getVariableTypeSymbolicRepresentation</code> returns a symbolic representation of a object using a <code>C++</code>-like representation from a type identifier, as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> python3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> import <span class="ex">mgis.behaviour</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> print<span class="kw">(</span><span class="ex">mgis.behaviour.getVariableTypeSymbolicRepresentation</span><span class="er">(</span><span class="ex">780</span><span class="kw">))</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ex">derivative_type</span><span class="op">&lt;</span>stensor<span class="op">&lt;</span>N, real<span class="op">&gt;</span>, tensor<span class="op">&lt;</span>N, real<span class="op">&gt;&gt;</span></span></code></pre></div>
<h2 id="sec:mgis:2.1:initialize_functions">Support for behaviours’ initialize functions</h2>
<p>Since version 4.1, <code>MFront</code> behaviours can declare initialize functions which are meant to initialize the state of the material.</p>
<p>The available initialize functions are described by the <code>initialize_functions</code> member of the <code>Behaviour</code> class which associates the name of the initialize function and a small data structure containing:</p>
<ul>
<li>the pointer to the initialize function,</li>
<li>the list of inputs of the initialize function, if any.</li>
</ul>
<p>The <code>getInitializeFunctionVariablesArraySize</code> function returns the size of an array able to contain the inputs an initialize function for an integration point.</p>
<p>The <code>allocateInitializeFunctionVariables</code> functions return an array able to store the inputs of an initialize function for a given integration point or a set of integrations points.</p>
<p>The <code>executeInitializeFunction</code> functions execute an initialization function on a unique integration point or a set of integration points.</p>
<blockquote>
<p><strong>Note about the result of the initialize function</strong></p>
<p>The <code>BehaviourDataView</code> class imposes that the initial state is immutable. Thus, initialize functions can thus only initialize the state of the material at the end of the time step. In most case, the call to the selected initialize functions shall be follow to a call to the <code>update</code> function.</p>
</blockquote>
<blockquote>
<p><strong>Note about the material properties and the external state variables</strong></p>
<p>The material properties and the external state variables must be set before calling the <code>executeInitializeFunction</code> functions. Only the values at the beginning of the time step are passed to the behaviour.</p>
</blockquote>
<h3 id="example-of-usage">Example of usage</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> d = BehaviourData{b};</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">// initialize the material properties and the external state variables</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">// calling an initialize function which requires an input</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> inputs = allocateInitializeFunctionVariables(b, <span class="st">&quot;StressFromInitialPressure&quot;</span>);</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>inputs[<span class="dv">0</span>] = pr;</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> v = make_view(d);</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>executeInitializeFunction(v, b, <span class="st">&quot;StressFromInitialPressure&quot;</span>, inputs);</span></code></pre></div>
<h2 id="sec:mgis:2.1:postprocessings">Support for behaviours’ post-processings</h2>
<p>Since version 4.1, <code>MFront</code> behaviours can declare postprocessings which are meant to process the state of the material after the behaviour integration.</p>
<p>The available postprocessings are described by the <code>postprocessings</code> member of the <code>Behaviour</code> class which associates the name of the postprocessing and a small data structure containing:</p>
<ul>
<li>the pointer to the postprocessing,</li>
<li>the list of outputs of the postprocessing.</li>
</ul>
<p>The <code>getPostProcessingVariablesArraySize</code> function returns the size of an array able to contain the outputs an postprocessing for an integration point.</p>
<p>The <code>allocatePostProcessingVariables</code> functions return an array able to store the outputs of a postprocessing for a given integration point or a set of integrations points.</p>
<p>The <code>executePostProcessing</code> functions execute a postprocessing on a unique integration point or a set of integration points.</p>
<h3 id="example-of-usage-1">Example of usage</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode cxx"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> m = MaterialDataManager{b, <span class="dv">2</span><span class="bu">u</span>};</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">// initialize the state and perform the behaviour integration</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">// execute the post-processing</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> outputs = allocatePostProcessingVariables(m, <span class="st">&quot;PrincipalStrain&quot;</span>);</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>executePostProcessing(outputs, m, <span class="st">&quot;PrincipalStrain&quot;</span>);</span></code></pre></div>
<h1 id="issues-solved">Issues solved</h1>
<h2 id="issue-83-add-support-for-extended-variable-types">Issue #83: Add support for extended variable types</h2>
<p>This feature is described in depth in Section <strong>¿sec:mgis:2.1:extended_types?</strong>.</p>
<p>For more details, see <a href="https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/83" class="uri">https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/83</a>.</p>
<h2 id="issue-82-add-support-for-behaviour-post-processings">Issue #82: Add support for behaviour post-processings</h2>
<p>This feature is described in depth in Section 2.3.</p>
<p>For more details, see <a href="https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/82" class="uri">https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/82</a>.</p>
<h2 id="issue-78-add-support-for-behaviours-which-does-not-declare-the-temperature-as-the-first-external-state-variable">Issue #78: Add support for behaviours which does not declare the temperature as the first external state variable</h2>
<p>For more details, see <a href="https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/78" class="uri">https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/78</a>.</p>
<h2 id="issue-74-support-for-tensorial-external-state-variables">Issue #74: Support for tensorial external state variables</h2>
<p>For more details, see <a href="https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/74" class="uri">https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/74</a>.</p>
<h2 id="issue-50-new-feature-request-initialize-initial-stress-in-mgis.fenics">Issue #50: new feature request: initialize initial stress in <code>mgis.fenics</code></h2>
<p>This feature is described in depth in Section 2.2.</p>
<p>For more details, see <a href="https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/50" class="uri">https://github.com/thelfer/MFrontGenericInterfaceSupport/issues/50</a>.</p>
</body>
</html>
